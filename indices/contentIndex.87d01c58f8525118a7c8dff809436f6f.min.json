{"/":{"title":"ğŸª´ Main Page","content":"\næˆ‘æœƒå°‡æˆ‘æ‰€è®€æ‰€å­¸çš„ä¸€é»é»æ‘˜è¦é€²ä¾†ï¼Œå¸Œæœ›æœ‰ä¸€å¤©ä»–å€‘å¯ä»¥å»ºæ§‹èµ·å¼·å¤§çš„çŸ¥è­˜ç¶²è·¯ã€‚\n\n\n\n## è¿‘æœŸé–±è®€\n\n- [[notes/Resource/Books/The Second Brain]]\n\n\n## æ–‡ç« å¼•å°\n\n- [[notes]]\n- [[tags]]\n- [[notes/Project/Effective C++ Series/Effective C++ Outline]]\n\n\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":[]},"/notes/Archive/Special-Syntax-in-Theme-Things-2":{"title":"Special Syntax in Theme Things 2","content":"\n## Basic\n- [ ] to-do\n- [/] incomplete\n- [x] done\n- [-] canceled\n- [\u003e] forwarded\n- [\u003c] scheduling\n\n## Extras\n- [?] question\n- [!] important\n- [*] star\n- [\"] quote\n- [l] location\n- [b] bookmark\n- [i] information\n- [S] savings\n- [I] idea\n- [p] pros\n- [c] cons\n- [f] fire\n- [k] key\n- [w] win\n- [u] up\n- [d] down\n\n\nhttps://github.com/colineckert/obsidian-things\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":[]},"/notes/Area/Arom/%E7%B2%BE%E6%B2%B9%E6%93%B4%E9%A6%99":{"title":"ç²¾æ²¹æ“´é¦™","content":"# ç²¾æ²¹æ“´é¦™é…æ–¹\n\n\n\n## é©…èšŠ\n\næ²‰é¦™ç±½ï¼‹æª¸æª¬é¦™èŒ… or é¦™èŒ… or å±±é›æ¤’ï¼‹ç”œæ©™ï¼ˆå…¶ä»–æŸ‘æ©˜é¡ä¹Ÿé©ï¼‰æ¯”ä¾‹å¾ˆéš¨å¿ƒæ‰€æ¬²ï¼Œå¯èƒ½çš„æ¯”ä¾‹ æ²‰é¦™ç±½ 1ï¼šæŸ‘æ©˜ 2ï¼šæª¸æª¬é¦™èŒ… 0.5ã€‚å¦å¤–å†åŠ é’æª¸è‘‰ã€‚\n\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":[]},"/notes/Area/Arom/DIY":{"title":"DIY","content":"# DIY \n\n## è­·å”‡è†\n\n- æ²¹ã€è„‚ã€èœ‚è Ÿï¼Œ3:1:2ã€‚\n- æ²¹ã€èœ‚è Ÿï¼Œ3:1ã€‚\n\n- å¯¦é©—: æ¶²é«”é‡ 40gï¼Œæ²¹ 32 gã€èœ‚è Ÿ 8 gã€‚\n\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":[]},"/notes/Area/Hugo/Hugo-Publish-Simple-Page":{"title":"ä»¥ Hugo ç™¼ä½ˆç°¡å–®çš„é é¢","content":"## Hugo å»ºç«‹éƒ¨è½æ ¼çš„ç¯„ä¾‹\n\nç›´æ¥ç”¨ Hugo å»ºç«‹éƒ¨è½æ ¼ï¼Œä¸ä½¿ç”¨ Quartz çš„ç¯„ä¾‹:\n\n### Start\n\nhugo new site quickstart  \ncd quickstart  \ngit init  \ngit submodule add https://github.com/theNewDynamic/gohugo-theme-ananke themes/ananke  \necho \"theme = 'ananke'\" \u003e\u003e config.toml  \nhugo server\n\n[https://gohugo.io/getting-started/quick-start/](https://gohugo.io/getting-started/quick-start/)\n\n### å°‡ Markdown æª”æ¡ˆè½‰æ›æˆ Web Page\n\nhugo server --buildDrafts  \nhugo server -D\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":[]},"/notes/Area/Hugo/Hugo-front-matter":{"title":"Hugo å¯ä½¿ç”¨çš„metadata","content":"\nSource: https://gohugo.io/content-management/front-matter/\n\nèˆ‰ä¾‹:\n\n```yaml\ncategories:\n- Development\n- VIM\ndate: \"2012-04-06\"\ndescription: spf13-vim is a cross platform distribution of vim plugins and resources\n  for Vim.\nslug: spf13-vim-3-0-release-and-new-website\ntags:\n- .vimrc\n- plugins\n- spf13-vim\n- vim\ntitle: spf13-vim 3.0 release and new website\n```\n\nå¯å»ºç«‹ Obsidian æ¨¡æ¿:\n\n```yaml\ntitle: \ndate: {{date}}\ndescription: \n\nslug: alias-name\ntags:\n- default\ncategories:\n- default\n\n```\n\næœ¬é æ‰€ä½¿ç”¨çš„ metadata: \n```yaml\ntitle: \"å¯ä½¿ç”¨çš„metadata\"\ndate: 2023-04-09\nslug: usable meta data # ç¶²å€è®Šæˆæ­¤åç¨±\ncategories:\n- blog\n```\n\né€™è£¡ï¼Œæˆ‘è®“æª”æ¡ˆåç¨±è®Šæˆ\n- filename: `Hugo front matter.md` \n- title: `å¯ä½¿ç”¨çš„metadata` \u003e é é¢æ¨™é¡Œ\n- slug: `usable meta data` \u003e é€£çµåç¨±\n\n\n## Category vs. Tag\n\nåœ¨æ‰“é€ ç¬¬äºŒå¤§è…¦ä¸­ï¼Œä½œè€…æå‡º Tag æ˜¯ä¸€ç¨®æ‰“ç ´è³‡æ–™å¤¾é‚Šç•Œçš„é€£çµæ–¹å¼ã€‚æˆ‘å¸Œæœ›ï¼Œåœ¨æˆ‘çš„éƒ¨è½æ ¼ä¸­ï¼Œæˆ‘å¸Œæœ›è®“ç¶²é æœƒ Category åšè³‡æ–™å¤¾å£å£˜çš„åˆ†é¡ï¼Œæœ‰å¿…è¦æ™‚å†ä»¥ tag æ‰“ç ´é‚Šç•Œã€‚\n\nä½†ä¼¼ä¹ quartz æ”¯æ´çš„åªæœ‰ tags è€Œæ²’æœ‰ categoriesã€‚æˆ‘æƒ³åƒè€ƒé€™ç¯‡æ–‡ç« è©¦è©¦çœ‹èƒ½ä¸èƒ½æ‰“é–‹è©²åŠŸèƒ½: \nhttps://ithelp.ithome.com.tw/articles/10244921\n\n## Description\næ²’æœ‰ç”¨ï¼Œä¸æœƒæ”¹è®Šé è¦½é é¢çš„å…§å®¹ã€‚\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":[]},"/notes/Area/Obsidian/Obsidian-Map-View":{"title":"Obsidian Map View","content":"[Github: Obsidian Map View](https://github.com/esm7/obsidian-map-view)\n\n## ç´€éŒ„\n\n### å°å…¥å·²è¨˜éŒ„åœ¨ Map çš„åœ°é»\n1. é–‹å•Ÿå‘½ä»¤é¢æ¿ -\u003e Â \"Map View: add inline geolocation link\"ï¼Œæ–‡å­— `[](geo:)` æœƒè¢«æ’å…¥ã€‚\n2. åœ¨ä¸­æ‹¬è™Ÿä¸­è¼¸å…¥åœ°é»ï¼Œåƒæ˜¯: `[å°åŒ—101]`ï¼Œæœƒè·³å‡ºä¸‹æ‹‰é¸å–®ï¼Œé»é¸ä¹‹å¾Œç¶“ç·¯åº¦ä½ç½®æœƒè‡ªå‹•å¡«åœ¨ `(geo:)` ç•¶ä¸­ã€‚\n\n### å¾ Command ä¸Šæ–°å¢åœ°é»\n\n1. é–‹å•Ÿå‘½ä»¤é¢æ¿ -\u003e\"Map View: New geolocation note\"ã€‚\n2. è·³å‡ºä¸€å€‹ Dialogï¼Œè²¼ä¸Šé€£çµã€æˆ–æ˜¯ Search åœ°é»éƒ½å¯ä»¥ã€‚\n\t- ç¶²å€é€£çµåˆ†æçš„è¦å‰‡: [URL parsing rules](https://github.com/esm7/obsidian-map-view#url-parsing-rules)\n\t- Search åœ°é»æœƒå—åˆ°é¸æ“‡å“ªä¸€å€‹åœ°é»è³‡è¨Šæä¾›è€…æ‰€å½±éŸ¿: [configured geocoding provider](https://github.com/esm7/obsidian-map-view#changing-a-geocoding-provider)Â \n\n### å¾æ—¢æœ‰çš„ç­†è¨˜æ–°å¢åœ°é»\n### Inline geolocation link\nå¦‚å‰é¢ã€Œå¾ Command æ–°å¢åœ°é»ã€ï¼Œåœ¨æ–‡ç« ä¸­ä»¥ `[](geo:)` æ¨™ç¤ºåœ°é»ã€‚\n\n### ä»¥ Metadata æ¨™è¨»æœ¬æ–‡æ˜¯ä¸€å€‹åœ°é»\n\n1. é–‹å•Ÿå‘½ä»¤é¢æ¿ -\u003e\"Add geolocation (front matter) to current note\"ã€‚\n\n\n## Changing a Geocoding Provider\n1. å» Google ç”³è«‹ Googla Map API\n2. åœ¨ Obsidian Map View çš„è¨­å®šç•¶ä¸­æŠŠ Provider æ”¹æˆ Googleï¼Œè²¼ä¸Š API Key.\nhttps://github.com/esm7/obsidian-map-view#changing-a-geocoding-provider\n\n\nGoogle API å¯ä»¥è¨­æ¬Šé™ Query å“ªäº›å…§å®¹ï¼Œå…¶ä¸­ [Places API](https://developers.google.com/maps/documentation/places/web-service/cloud-setup) å¯ä»¥è®“æˆ‘å€‘åœ¨ Command Line ç›´æ¥æœå°‹ Google åœ°é»ã€‚èŠ±è²»æœƒæ¯”è¼ƒé«˜ï¼Œä½†å¦‚æœæ˜¯ä½œç‚ºç­†è¨˜è»Ÿé«”ï¼Œæ‡‰è©²æœƒæ˜¯åœ¨ Google çš„å…è²»é¡åº¦ 200ç¾é‡‘ä¹‹å…§ã€‚\n\n## æŠŠ Map Source åˆ‡æ›æˆ Google \nåƒè€ƒ : https://github.com/esm7/obsidian-map-view/issues/51\nåœ¨ Map source ä¸­æ–°å¢ä¸€å€‹ Google Map é¸é …ï¼ŒUrl: `https://mts1.google.com/vt/lyrs=m@186112443\u0026hl=x-local\u0026src=app\u0026x={x}\u0026y={y}\u0026z={z}\u0026s=Galile`\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["obsidian"]},"/notes/Area/Obsidian/Obsidian-Plugins":{"title":"Obsidian Plugins","content":"## Theme\n- ç•¶å‰ç”¨çš„æ˜¯ Thing2\n- [minimal](https://minimal.guide/Home) ä¹Ÿæ˜¯ç†±é–€çš„ä¸»é¡Œï¼Œä¸”èˆ‡è¨±å¤š plugin ç›¸å®¹\n\t- ä½†æ˜¯ header ä¹‹é–“ä¸åŒéšç´šæ²’æœ‰å¤§å°ä¹‹åˆ†ï¼Œæˆ‘ä¸å–œæ­¡ï¼Œè¦ç”¨éœ€è¦æ”¹ CSSã€‚\n\n\n\n## Plugin\n- Obsidian Dataview mode: like notion https://ithelp.ithome.com.tw/articles/10279262\n- [[Obsidian Map View]]: [source](https://github.com/esm7/obsidian-map-view#intro)\n- \n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":[]},"/notes/Area/Obsidian/Sync-Obsidian":{"title":"Obsidian Publish çš„æ›¿ä»£é¸æ“‡","content":"æƒ³åœ¨ IOS ä¸Šé¢ä¹Ÿæœ‰ Sync çš„ Obsidian å¯ä»¥ç”¨!\n\nç¤¾ç¾¤çš„ä½œæ³•æ˜¯è£ ISH ä»¥ Git åŒæ­¥ï¼Œæˆ‘æƒ³å¯¦é©—ç”¨ Terminus (æ¯”èµ· ISH æœ‰åœ¨ç¶­è­·)\n\n- [Sync with git on iOS for free using iSH](https://forum.obsidian.md/t/mobile-sync-with-git-on-ios-for-free-using-ish/20861)\n- [Setting up iOS git-based syncing with mobile app (using Working Copy)](https://forum.obsidian.md/t/mobile-setting-up-ios-git-based-syncing-with-mobile-app-using-working-copy/16499)\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":[]},"/notes/Area/Python/Asyncio":{"title":"Asyncio","content":"# Asyncio \n\nåœ¨ [Asyncio](https://brainynight.github.io/posts/2022-10-23-python-asyncio) é€™ç¯‡ç°¡ä»‹çš„æ–‡ç« ä¸­ï¼Œæœ‰ä¸€å€‹ç°¡å–®çš„ä¾‹å­å¦‚ä¸‹ã€‚æœ¬æ–‡å°‡é‡å°æ­¤ä¾‹ä»”ç´°æ¢è¨ã€‚\n\n```python\nimport asyncio\n\nasync def single_process(cmd):\n    proc = await asyncio.create_subprocess_shell(\n        cmd,\n        stdout=asyncio.subprocess.PIPE,\n        stderr=asyncio.subprocess.PIPE)\n    try:\n        await asyncio.wait_for(proc.communicate(), timeout=2)\n        print(cmd, \"complete\")\n    except asyncio.TimeoutError:\n        print(cmd, \"timeout\")\n        \nasync def run_all(cmds):\n    lt = []\n    for cmd in cmds:\n        lt.append(single_process(cmd))\n    await asyncio.gather(*lt)\n\nif __name__ == \"__main__\":\n    cmds = [\n        \"sleep 1 \u0026\u0026 echo hello\",\n        \"sleep 1.5\",\n        \"echo world\",\n        \"sleep 500\",        \n    ]\n    asyncio.run(run_all(cmds))\n```\n\n## Asyncio \n\nmain page: https://docs.python.org/zh-tw/3/library/asyncio.html\n\næ¥ä¸‹ä¾†åªæœƒä»‹ç´¹ main page ç•¶ä¸­é«˜éš API çš„éƒ¨åˆ†å…§å®¹ã€‚\n\n- [`asyncio.Runner`](https://docs.python.org/zh-tw/3/library/asyncio-runner.html): æ˜¯ä¸€å€‹ context manager (ä½¿ç”¨ `with` èªå¥)ï¼Œä½¿æˆ‘å€‘ä¸ç”¨ç®¡è³‡æºé—œé–‰æˆ–é‡‹æ”¾çš„å•é¡Œã€‚\n- [å”ç¨‹èˆ‡ä»»å‹™ (coroutines and tasks)](https://docs.python.org/zh-tw/3/library/asyncio-task.html): é€™å…©è€…æ˜¯ high level API ä½¿ç”¨è€…ä¸»è¦æœƒä½¿ç”¨åˆ°çš„é¡åˆ¥ï¼Œå»ºè­°å¯è©³è®€ã€‚\n- [Debug mode](https://docs.python.org/zh-tw/3/library/asyncio-dev.html)\n- [Synchronization Primitives](https://docs.python.org/zh-tw/3/library/asyncio-sync.html): asyncio æä¾›äº†ä¸€äº›å’Œ threading æ¨¡çµ„ç›¸ä¼¼çš„ç‰©ä»¶ï¼Œåƒæ˜¯ Lock, Semaphoreã€‚ä¸éè¦æ³¨æ„ï¼Œasyncio æ¨¡çµ„çš„å…§å®¹å¤§å¤šéƒ½æ˜¯ non-thread-safe çš„ã€‚\n- [High Level API Index](https://docs.python.org/zh-tw/3/library/asyncio-api-index.html)\n\n\n\n\n## Coroutine\n\nå®˜å°\"Coroutine\" é€™å€‹è©å½™çš„èªªæ˜ï¼Œæˆ‘ä¸æ‰“ç®—ä»”ç´°è§£é‡‹ã€‚\n\nåœ¨å®˜æ–¹æ–‡ä»¶ä¸­ï¼Œcoroutine å¾ˆåè¦†çš„è¢«æåŠï¼Œæœ‰æ™‚æŒ‡çš„æ˜¯ coroutine object ï¼Œæœ‰æ™‚æ˜¯ coroutine functionã€‚\n\n- coroutine function: è¢«ä»¥ `async def` å®£å‘Šçš„ function\n- coroutine object: å‘¼å« coroutine function æ™‚æ‰€å›å‚³çš„ç‰©ä»¶ã€‚\n\nè©³è¦‹ [PEP 492](https://peps.python.org/pep-0492/)ã€‚\n\n\u003e å”ç¨‹ coroutine[Â¶](https://docs.python.org/3/glossary.html#term-coroutine)\n\u003e\n\u003e Coroutines are a more generalized form of subroutines. Subroutines are entered at one point and exited at another point. Coroutines can be entered, exited, and resumed at many different points. They can be implemented with the [`async def`](https://docs.python.org/3/reference/compound_stmts.html#async-def) statement. See also [**PEP 492**](https://peps.python.org/pep-0492/).\n\u003e\n\u003e å”ç¨‹å‡½æ•¸ coroutine function\n\u003e\n\u003e A function which returns a [coroutine](https://docs.python.org/3/glossary.html#term-coroutine) object. A coroutine function may be defined with the [`async def`](https://docs.python.org/3/reference/compound_stmts.html#async-def) statement, and may contain [`await`](https://docs.python.org/3/reference/expressions.html#await), [`async for`](https://docs.python.org/3/reference/compound_stmts.html#async-for), and [`async with`](https://docs.python.org/3/reference/compound_stmts.html#async-with) keywords. These were introduced by [**PEP 492**](https://peps.python.org/pep-0492/).\n\n\n\nä¸€å€‹å”ç¨‹é€šå¸¸é€éå”ç¨‹å‡½æ•¸å–å¾—ï¼Œå¦‚ä¸‹ä¾‹ `cfunc` function ï¼Œæœƒå›å‚³ä¸€å€‹ coroutine objectã€‚\n\n```python\nimport asyncio\n\nasync def cfunc():\n    print('hello')\n    await asyncio.sleep(1)\n    print('world')\n```\n\nä½•ä»¥å¾—çŸ¥? å¦‚æœä½¿ç”¨ ipython é€™é¡çš„äº’å‹• consoleï¼Œç›´æ¥çœ‹ `cfunc()` ç‰©ä»¶æ˜¯ä»€éº¼æ±è¥¿ï¼Œæœƒçœ‹åˆ°é€™æ¨£çš„å…§å®¹:\n\n```python\n\u003e\u003e\u003e cfunc()\n\u003ccoroutine object cfunc at 0x7fe9094b2650\u003e\n\u003e\u003e\u003e type(cfunc())\n\u003cclass 'coroutine'\u003e\n```\n\né€™è¡¨ç¤ºï¼Œæ­¤ function å›å‚³çš„å…§å®¹æœƒæ˜¯ä¸€å€‹ coroutine object! è¦æ³¨æ„ï¼Œcoroutine object å¿…é ˆä½¿ç”¨ä¸€äº›æ”¯æ´ç•°æ­¥åŸ·è¡Œçš„å‡½å¼/èªæ³•ä¾†æ­£ç¢ºçš„é‹è¡Œï¼Œä¾‹å¦‚ `asyncio.run`ï¼Œ `cfunc()` å¯¦è³ªä¸Šçš„åŠŸèƒ½ï¼Œå°±åªæ˜¯å›å‚³ä¸€å€‹ coroutine object è€Œå·²ã€‚\n\n## Awaitable object \n\næŒ‡çš„æ˜¯å¯ä»¥ç”¨åœ¨ `await` expression çš„ç‰©ä»¶ï¼Œä¸»è¦çš„ä¸‰ç¨® awaitable object æ˜¯ coroutines, Tasks, å’Œ Futuresï¼Œå¦å¤–å°±æ˜¯æ“æœ‰ `__await__()` æ–¹æ³•çš„ç‰©ä»¶ã€‚`await` åªèƒ½è¢«ä½¿ç”¨åœ¨ coroutine function å…§ã€‚ä¸‰ç¨® type ç•¶ä¸­ï¼ŒFuture å±¬æ–¼æ¯”è¼ƒåº•å±¤çš„ APIï¼Œå°‡ä¸èªªæ˜ã€‚\n\n### coroutine object\n\nå‰ä¾‹çš„ `asyncio.sleep(1)` ï¼Œæœ¬è³ªä¸Šä¹Ÿæ˜¯é€éä¸€å€‹ coroutine function å–å¾— coroutine objectï¼Œå› æ­¤å¿…é ˆä»¥é—œéµå­—  `await` æ¥ä½é€™å€‹ coroutine objectã€‚\n\nè‹¥ coroutine function å…§é‚„æœƒå‘¼å«å¦ä¸€å€‹ coroutine functionï¼Œè¢«å‘¼å«çš„ coroutine function å‰å¿…é ˆåŠ  `await`ï¼Œå› ç‚ºå®ƒå›å‚³çš„æ˜¯å€‹ coroutine objectã€‚\n\n```python\nimport asyncio\nimport time\n\nasync def say_after(delay, what):\n    await asyncio.sleep(delay)\n    print(what)\n\nasync def main():\n    print(f\"started at {time.strftime('%X')}\")\n    # needs to add `await` when call a coroutine function, but not directly execute.\n    await say_after(1, 'hello') \n    await say_after(2, 'world')\n    print(f\"finished at {time.strftime('%X')}\")\n\n# The method for directly execute is asyncio.run\nasyncio.run(main())\n```\n\n-  `asyncio.run` æ‰æœƒçœŸæ­£åŸ·è¡Œè¢«çµ¦äºˆçš„ coroutine object\n\n### asyncio.Task\n\n`create_task` å›å‚³ä¸€å€‹ `asyncio.Task` ç‰©ä»¶ï¼Œæˆ‘å€‘å¾—ä»¥æå‰å‰µé€  taskï¼Œç­‰åˆ°éœ€è¦æƒ³è¦åŸ·è¡Œé€™å€‹ task çš„åœ°æ–¹ï¼Œå†ä»¥ `await` å‘¼å«ã€‚\n\nåŒæ¨£çš„ï¼Œé€™è£¡çš„ã€ŒåŸ·è¡Œã€ä¸¦ä¸æ˜¯çœŸçš„ã€Œè·‘ã€ä¸‹å»ï¼Œæ¯”è¼ƒåƒæ˜¯æ¨™ç¤ºã€Œæˆ‘æƒ³å†é€™è£¡åŸ·è¡Œé€™å€‹ functionã€ã€‚çœŸæ­£çš„åŸ·è¡Œä¾ç„¶æ˜¯äº¤çµ¦ `run`ã€‚\n\n\n```python\nasync def main():\n    task1 = asyncio.create_task(say_after(1, 'hello'))\n    task2 = asyncio.create_task(say_after(2, 'world'))\n    \n    print(f\"started at {time.strftime('%X')}\")\n    # Wait until both tasks are completed (should take around 2 seconds.)\n    await task1\n    await task2\n    print(f\"finished at {time.strftime('%X')}\")\nasyncio.run(main())\n```\n\n[`TaskGroup`](https://docs.python.org/3/library/asyncio-task.html#asyncio.TaskGroup) æ˜¯å¦å¤–ä¸€ç¨®å‰µå»º task ä¸¦åŸ·è¡Œçš„æ–¹æ³•ï¼Œå¯ä»¥ä¸ç”¨å¯« `await` (éš±æ€§çš„åœ¨ `with` çµæŸæ™‚å‘¼å« await æŠŠ tasks call ä¸€é)ï¼Œä¸éé€™å€‹ API åªåœ¨ Python3.11 èµ·æä¾›ï¼Œå°±ä¸å¤šæã€‚\n\n\n\n## asyncio.gather\n\n```python\nasyncio.gather(*aws, return_exceptions=False)\n```\n\n- æ¥æ”¶å¤šå€‹ awaitable ç‰©ä»¶ï¼Œå¦‚æœ awaitable ç‰©ä»¶ç•¶ä¸­æœ‰ coroutineï¼Œgather æœƒæŠŠå®ƒç•¶ä½œ Task èª¿åº¦ (scheduled as a `Task`)ã€‚\n- å›å‚³å€¼: ç•¶æ‰€æœ‰çš„ awaitable object éƒ½å®Œæˆä»»å‹™å¾Œï¼Œ`asyncio.gather` æœƒæŠŠé€™äº›ä»»å‹™çš„å›å‚³å€¼æ”¾åœ¨ä¸€å€‹ list è£¡é¢å›å‚³çµæœã€‚çµæœçš„é †åºèˆ‡æ”¾é€² `gather` çš„é †åºç›¸åŒã€‚\n- `return_exception` \n    - é è¨­æ˜¯ falseï¼Œç•¶ä»»å‹™åŸ·è¡Œä¸­ç™¼ç”Ÿ exceptionï¼ŒæœƒåŠæ™‚ raise exceptionï¼Œä¸¦å–æ¶ˆ gather (å‰©ä¸‹çš„ä»»å‹™å°‡ä¸æœƒè·‘åˆ°)\n    - è‹¥ç‚º trueï¼Œå‰‡ä¸æœƒ raise exceptionï¼Œè€Œæ˜¯å°‡ exception çš„å…§å®¹ (?) ç•¶ä½œåŸ·è¡ŒæˆåŠŸçš„çµæœï¼Œä¸€èµ·åœ¨ `gather` çš„å›å‚³æ¸…å–®ä¸­ã€‚\n\n## asyncio.wait\n\n```python\nasyncio.wait(aws, *, timeout=None, return_when=ALL_COMPLETED)\n```\n\n- æ¥æ”¶ä¸€å€‹ listï¼Œå…§å«å¤šå€‹ awaitable ç‰©ä»¶ã€‚\n- ç¨‹å¼æœƒåœåœ¨é€™è£¡åŸ·è¡ŒåŒæ™‚æ‰€æœ‰çš„ä»»å‹™\n\n\n\n## Subproccess\n\nhttps://docs.python.org/zh-tw/3/library/asyncio-subprocess.html\n\n\n\n\n\n\n\n## A\n\n`asyncio.create_subprocess_shell` æ˜¯ä¸€å€‹ coroutine functionï¼Œå›å‚³çš„æ˜¯ `asyncio.subprocess.Process` ç‰©ä»¶ã€‚[doc](https://docs.python.org/zh-tw/3/library/asyncio-subprocess.html#asyncio.create_subprocess_shell) \n\n\n\n\n\n\n\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":[]},"/notes/Area/Quartz/%E4%BD%BF%E7%94%A8-Quartz-%E5%BB%BA%E7%AB%8B%E9%83%A8%E8%90%BD%E6%A0%BC":{"title":"ä½¿ç”¨ Quartz å»ºç«‹éƒ¨è½æ ¼","content":"\n\n## Install\n\n1. Git\n2. Go lang\n3. Hugo: éœ€è¦æ‰‹å‹•åŠ ç’°å¢ƒè®Šæ•¸\n4.  `go-obsidian`\n    ```go\n    go install github.com/jackyzha0/hugo-obsidian@latest\n    ```\n5. **Optional**  `make` `: Windows ä¸‹é ˆä½¿ç”¨ MinGW å®‰è£ï¼Œåƒè€ƒ: [C++ é–‹ç™¼ç’°å¢ƒ åœ¨ Windows 11 ä¸­å®‰è£ mingw-w64 åŠè¨­å®šç’°å¢ƒè®Šæ•¸](http://kaiching.org/pydoing/cpp-guide4/how-to-install-mingw-w64-and-set-environment-variable.html)\n\nHugo éœ€è¦ä»¥ [PowerShell](https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell-on-windows) æˆ– WSL , Git Bash é€™ç¨® linux-based terminal é‹è¡Œã€‚\n\n## Start to Quzrtz\nå®˜æ–¹ç¶²ç«™æœ‰ç›¸é—œçš„æ•™å­¸: \n- https://quartz.jzhao.xyz/notes/setup/\n- https://quartz.jzhao.xyz/notes/obsidian/\n\nä»¥ä¸‹æˆ‘å°‡æ“·å–æœ€çŸ­æ­¥é©Ÿ\n### æ‘˜è¦æ­¥é©Ÿ\n\n1. Fork quartz çš„ Github å°ˆæ¡ˆï¼Œä¸¦ clone åˆ° Localã€‚\n2. åœ¨ Clone ä¸‹ä¾†çš„å€‰åº«ä¸­æ‰¾åˆ°è³‡æ–™å¤¾ `content`\n3. åœ¨ `content` è³‡æ–™å¤¾ä¸­å‰µå»º Obsidian å€‰åº«ï¼Œæˆ–æ˜¯æŠŠæ—¢æœ‰çš„å€‰åº«å…§å®¹æ”¾åˆ° content è£¡é¢ã€‚\n4. å°‡ Obsidian å€‰åº«è½‰æ›æˆ Hugo å¯ç”¨çš„\n\n    ```bash\n     hugo-obsidian -input=content -output=assets/indices -index -root=.\n    ```\n\n    éœ€è¦æ³¨æ„ï¼Œmarkdown æª”åä¸å¯ä»¥æœ‰ `.`ï¼Œä¸”æ¯ä¸€ç¯‡æ–‡ç« éƒ½è¦æœ‰ metadata: åœ¨é é¦–æœ‰ `title` çš„è³‡è¨Šï¼Œå¦‚ä¸‹: \n\n    ```markdown\n    ---\n    title: \"Private Stuff\"\n    ---\n    ```\n\n    å…¶å¯¦æœ‰æ›´å¤šçš„ meta-data å¯ä»¥è¨­å®šï¼Œå¯ä»¥çœ‹ quartz çµ¦çš„ç¯„ä¾‹ã€‚ç”±æ–¼ä½¿ç”¨ quartz å‰µå»ºæ¨¡æ¿å¿…é ˆè¦ metadataï¼Œ[ä½œè€…å»ºè­°](https://quartz.jzhao.xyz/notes/obsidian/)å¯ä»¥ç›´æ¥åœ¨ Obsidian è£¡é¢å‰µå»ºæ¨¡æ¿ï¼Œè®“æ¯æ–°å¢ä¸€å€‹æ¨¡æ¿éƒ½æœ‰é€™äº›è³‡è¨Š! \n\n5. å•Ÿç”¨ Hugo Server\n\n    ```bash\n     hugo server --enableGitInfo --minify \t# render faster\n     hugo server --disableFastRender \t\t# search bar will enable\n    ```\n\n\n## é—œæ–¼ Obsidian æ¨¡æ¿åŠŸèƒ½\n- å¯ä»¥åƒè€ƒæ­¤æ–‡ä»‹ç´¹å¦‚ä½•å»ºç«‹æ¨¡æ¿ [ã€Obsidian ä½¿ç”¨æ•™å­¸ã€‘ç­†è¨˜ç¯‡ 05 â€” çµåˆè³‡è¨Šè™•ç†æµç¨‹ï¼Œè®“ç­†è¨˜çš„ Metadata è®Šå¾—æ›´è©³ç´°](https://medium.com/pm%E7%9A%84%E7%94%9F%E7%94%A2%E5%8A%9B%E5%B7%A5%E5%85%B7%E7%AE%B1/obsidian-%E4%BD%BF%E7%94%A8%E6%95%99%E5%AD%B8-%E7%AD%86%E8%A8%98%E7%AF%87-05-%E7%B5%90%E5%90%88%E8%B3%87%E8%A8%8A%E8%99%95%E7%90%86%E6%B5%81%E7%A8%8B-e6a953438f43)\n- è¦æ³¨æ„ï¼Œæ’å…¥æ¨¡æ¿çš„æ™‚å€™ï¼Œéœ€è¦æ‰“å®Œæª”æ¡ˆåç¨±ï¼Œä¸¦æŠŠ Insert çš„é¼ æ¨™è¦åœ¨ Header 1 ä¸‹çš„ç¬¬ä¸€è¡Œã€‚\n\n## Obsidian Embed \nåœ¨ Obsidian æœƒæŠŠé é¢åµŒå…¥ï¼Œåœ¨ Quartz æœƒç›´æ¥è½‰æ›æˆå…§éƒ¨é€£çµã€‚\n\n## ç™¼ä½ˆåˆ° Github Page\n\nåƒè€ƒ [[Publish Quartz to Github Page]]\n\n\n## ä¿®æ”¹é¦–é \n\nå¦‚æœæƒ³åœ¨é¦–é æ”¾ç½®ä¸€äº›é€£çµï¼Œå¼•å°åˆ°ç‰¹å®šé é¢ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å¹¾é»: é›™å‘é€£çµå…§æ”¾çš„æ˜¯ã€Œç›¸å°æ–¼è©²é é¢çš„è·¯å¾‘ã€ï¼Œè·¯å¾‘å°æ‡‰çš„æ˜¯æª”æ¡ˆåç¨±ã€‚\n\n1.  ç•¶æª”æ¡ˆåç¨±æœ‰ç©ºç™½æ™‚ï¼Œç¶²å€æœƒä»¥ `-` å–ä»£ç©ºç™½ï¼Œä½†åœ¨é›™å‘é€£çµçš„æ’°å¯«ä¸­ä¸å¯ä»¥å¯« `-`ã€‚\n```\n[[notes/Area/PKM/Setup Quartz]] # OK  \n[[notes/Area/PKM/Setup-Quartz]] # Broken internal link\n```\n2.  æ³¨æ„çµå°¾ä¸è¦å¤šåŠ åæ–œç·š    \n3.  ä¸»é ç›¸å°æ–¼å„æª”æ¡ˆéƒ½æ˜¯ä»¥ `note/` é–‹å§‹\n\n## graphConfig\nåœ¨ `data/graphConfig` æœ€ä¸‹é¢æœ‰ä¸€å€‹è¨­å®šé … `paths`ï¼Œé€™æ˜¯å¯ä»¥è¨­å®šæŒ‡å®šé é¢ç¯€é»çš„é¡è‰²ï¼Œé€šå¸¸é‡å° MOC Pageï¼Œå¦‚ä¸‹ä¾‹å°±æ˜¯æŠŠ Effective-C++-Outline çš„ç¯€é»è¨­æˆè—è‰²ã€‚\n\n```yaml\npaths:\nÂ  Â  - /notes/Project/Effective-C++-Series/Effective-C++-Outline: \"#4388cc\"\n```","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":[]},"/notes/Area/Quartz/Publish-Quartz-to-Github-Page":{"title":"å°‡ Quartz ç™¼ä½ˆåˆ° Github Page","content":"ç”±æ–¼æˆ‘å° github action ä¸ç†Ÿæ‚‰ï¼Œåœ¨è¨­ç½®åˆ° github page çš„æ™‚å€™é‡åˆ°äº†ä¸€é»å›°é›£...ã€‚\n\né¦–å…ˆï¼Œå¦‚æœå°ˆæ¡ˆæ˜¯å¾ templage fork éä¾†çš„ï¼Œå®ƒæ‡‰è©²åˆ†æˆ `hugo` è·Ÿ `master` å…©å€‹ branchã€‚å…¶ä¸­\n\n- `hugo`: å­˜æ”¾ config, markdown files (`content` åº•ä¸‹) çš„åœ°æ–¹\n- `master`: åˆ©ç”¨ github action æŠŠå°ˆæ¡ˆå…§å®¹è½‰æˆéœæ…‹ç¶²é \n\næˆ‘å› ç‚ºæ˜¯ clone ä¸‹ä¾†å† push åˆ°è‡ªå·±çš„å°ˆæ¡ˆï¼Œæ²’æœ‰éµå®ˆé€™å…©å€‹å‘½åæ–¹å¼è€Œé‡åˆ°äº†ä¸€é»å›°é›£ã€‚åœ¨æˆ‘çš„å°ˆæ¡ˆä¸­ï¼Œ`main` å°æ‡‰çš„æ˜¯å­˜æ”¾ markdown files (è½‰æ›å‰) çš„ pageï¼Œ`publish` æ‰æ˜¯ github page å†ç”Ÿæˆæ™‚æ‰€æ ¹æ“šçš„ branchã€‚\n\n## è¨­ç½® Github Action \n\nå¦‚ä½œè€…çš„[æ•™å­¸](https://quartz.jzhao.xyz/notes/hosting/)æ‰€èªªï¼Œé¦–å…ˆè¦æ‰“é–‹ workflow permissionã€‚ä½ç½®æ˜¯ `Setting \u003e Action \u003e General`ã€‚\n\n![Set workflow Permission](https://quartz.jzhao.xyz/notes/images/github-actions.png)\n\n## è¨­ç½® Github Page \n\nåœ¨ `Setting \u003e Pages` ç•¶ä¸­ï¼Œå°‡è¨­ç½® Source é …ç›®çš„ branch è¨­æˆ `master` (æˆ‘å‰‡æ˜¯è¨­æˆ `pubslish`)ã€‚Domain name é™¤éè‡ªå·±æœ‰ç‰¹åˆ¥è²·ç¶²åŸŸï¼Œå¦å‰‡ä¸ç”¨å‹•ã€‚\n\n![Github page setting](https://quartz.jzhao.xyz//notes/images/github-pages.png)\n\n## Domain Name \n\nä¸€å…±æœƒå½±éŸ¿å…©å€‹åœ°æ–¹:\n\n- `config.toml`\n- `.github/workflows/deploy.yaml`\n\nå¦‚æœç”¨ github é è¨­çš„ç¶²å€æœƒæ˜¯ `\u003cYOUR-GITHUB-USERNAME\u003e.github.io/\u003cProject-Name\u003e`ã€‚`config.toml` çš„è¨­å®šå¾ˆç°¡å–®ï¼Œå°±å¯«é€™å€‹å°ˆæ¡ˆ root ç¶²å€ç‚ºä½•:\n\n```yaml\nbaseURL = \"https://\u003cYOUR-GITHUB-USERNAME\u003e.github.io/\u003cPROJ\u003e/\"\n```\n\n`.github/workflows/deploy.yaml` å‰‡è¦å°å¿ƒï¼Œé€™è£¡ç›´æ¥ä»¥æˆ‘çš„ç‚ºä¾‹ï¼Œéœ€è¦æ”¹å…©å€‹åœ°æ–¹ã€‚\n\n```yaml\non:\n  push:\n    branches:\n      - main # ä½œè€…çš„ç¯„ä¾‹æ˜¯ hugo, å› ç‚ºæˆ‘æœ‰æ› branch name æ‰€ä»¥è¦æ”¹      \n```\n\né€™æ¨£ï¼Œæ¯ç•¶ push è¡Œç‚ºç™¼ç”Ÿåœ¨ `main` branch ä¸Šï¼Œå°±æœƒè§¸ç™¼é€™å€‹ actionã€‚ \n\n\n```yaml\n      - name: Deploy\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./public\n          publish_branch: publish\t# ä½œè€…é è¨­æ˜¯ master\n          cname: brainynight.github.io # ä¸ç”¨æŠŠ proj name ä¹Ÿå¯«ä¸Šå»\n```\n\n## é è¦½è®Šæ›´\n\nGithub Action ç•¶ä¸­ï¼Œå·²ç¶“æŠŠå»ºç«‹ graph (`hugo-obsidian`) çš„æ­¥é©Ÿä¹ŸåŒ…å«ä¸Šå»äº†ã€‚ä½†è¦ç™¼å¸ƒä¹‹å‰æˆ‘å€‘ç¸½éœ€è¦è‡ªå·±æœ¬åœ°å…ˆçœ‹çœ‹ã€‚\n\nä½œè€…å…¶å¯¦æœ‰ makefileï¼Œæ‡‰è©²å¯ä»¥ `make server`ï¼Œæœƒè‡ªå‹•å»ºç«‹ graph å’Œ `hugo server`ï¼Œæˆ–æ˜¯æ‡¶å¾—å®‰è£ `make` ä¹Ÿå¯ä»¥ç›´æ¥æ‰“æŒ‡ä»¤ã€‚ä»¥ windows æƒ³è¤‡è£½ D æ§½æª”æ¡ˆç‚ºä¾‹: \n\n```bash\ncp /d/Database/*.md content/notes\nhugo-obsidian -input=content -output=assets/indices -index -root=.\nhugo server --disableFastRender\n```\n\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["Quartz"]},"/notes/Area/VimSeries/coc-snippets":{"title":"coc-snippets","content":"# Coc-snippets\n\n- åªè¦æª”åæœ‰åŒ…å«èªè¨€åç¨±ï¼Œå°±å¯ä»¥è¢«è¼‰å…¥\n\n    ```\n    python1.snippets\n    python2.snippets\n    ...\n    ```\n\n    \n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":[]},"/notes/Project/Effective-C++-Series/%E4%B8%8D%E8%A6%81%E7%82%BA%E9%9D%9E%E5%A4%9A%E5%9E%8B%E7%94%A8%E9%80%94%E7%9A%84-Base-Class-%E5%AE%A3%E5%91%8A-Virtual-Function":{"title":"ä¸è¦ç‚ºéå¤šå‹ç”¨é€”çš„ Base Class å®£å‘Š Virtual Function","content":"\n\u003e ç„¡ç«¯å°‡ä¸è©²æ“æœ‰ `virtual` çš„ class å®£å‘Š virtualï¼Œèˆ‡ç„¡ç«¯å°‡æ‰€æœ‰çš„ function å®£å‘Šæˆ virtualï¼Œéƒ½æ˜¯æœ‰æ¯’çš„ã€‚ \n\nç•¶é¡åˆ¥ä¸ä½œç‚º Base Classï¼Œæˆ–æ˜¯ä¸ä½œç‚ºå¤šå‹æ™‚çš„åŸºæœ¬ Class æ™‚ï¼Œä¸æ‡‰è©²ä½¿ç”¨ virtualã€‚\nåŸå› æ˜¯ï¼Œ`virtual` èƒŒå¾Œæ˜¯ä»¥ vptr (virtual table pointer) å’Œ vtbl (virtual table) å¯¦ä½œ virtualï¼Œéœ€è¦è€—è²»é¡å¤–çš„è¨˜æ†¶é«”ã€‚\n1. å°‡ä¸èƒ½æŠŠè³‡æ–™çµæ§‹å¼å‚³çµ¦å…¶ä»–èªè¨€ (C, FORTRAN) æ’°å¯«çš„ functionï¼Œå› ç‚ºå®ƒå€‘æ²’æœ‰ vptr çš„å°æ‡‰å…§å®¹\n2. å¢åŠ ç‰©ä»¶å¤§å°ï¼Œæ›¸ä¸­èˆ‰ä¾‹ä¸€å€‹ `Point` ç‰©ä»¶ï¼Œå…¶ä¸­æ“æœ‰å…©å€‹ int (64bits, in 32 bits system)ï¼Œå¢åŠ ä¸€å€‹ `virtual` (ä¸€å€‹ vptr) å°‡ä½¿ memory é”åˆ° 96 bitsï¼Œç›¸ç•¶å…¶ç‰©ä»¶å¤§å°çš„ 50%ï¼Œåœ¨ 64bits system ç”šè‡³é”åˆ°å¢åŠ  100%ã€‚\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E4%BA%86%E8%A7%A3%E5%A6%82%E4%BD%95%E5%9C%A8-Template-%E4%B8%AD%E6%8C%87%E6%B6%89-Base-Class-%E6%88%90%E5%93%A1":{"title":"äº†è§£å¦‚ä½•åœ¨ Template ä¸­æŒ‡æ¶‰ Base Class æˆå“¡","content":"\nè€ƒé‡ä»¥ä¸‹çš„é¡åˆ¥é—œä¿‚ï¼Œ`Company` classes æœƒä½œç‚º template çš„è¼¸å…¥åƒæ•¸å‚³å…¥ MsgSender é«”ç³»çš„ Templateã€‚\n`LoggingMsgSender` åœ¨ç¹¼æ‰¿ `MsgSender` çš„æ™‚å€™ï¼Œåˆ»æ„ç‚ºæ–°çš„ function å– `sendClearMsg` ï¼Œä¸åŒæ–¼ Base class `sendClear`ï¼Œé€™æ˜¯å¥½çš„åšæ³•ï¼Œé¿å…äº† [[ç¹¼æ‰¿æ™‚çš„åç¨±é®æ©è¡Œç‚º]] ä»¥åŠéµå®ˆ [[çµ•ä¸é‡æ–°å®šç¾©ç¹¼æ‰¿ä¾†çš„ Non-virtual Function]]ã€‚\n![[Item43.png]]\nä»¥ä¸‹æ˜¯ `LoggingMsgSender::sendClearMsg` çš„ function bodyï¼Œé€™æ®µ code å»**ç„¡æ³•é€šéç·¨è­¯**\n\n```c++\ntemplate\u003ctypename Company\u003e\nclass LoggingMsgSender: public MsgSender\u003cCompany\u003e {\npublic:\n\t... // ctors, dtor, etc.\n\tvoid sendClearMsg(const MsgInfo\u0026 info)\n\t{\n\t\t// do some log...\n\t\tsendClear(info); // å‘¼å«ç¹¼æ‰¿ä¾†çš„ base class function\n\t\t// do some log...\n\t}\n...\n}\n```\n\nå•é¡Œæ˜¯ï¼Œç•¶ Compiler è®€åˆ° `class LoggingMsgSender` çš„æ™‚å€™ï¼Œä¸¦ä¸çŸ¥é“å®ƒç¹¼æ‰¿çš„ `MsgSender\u003cCompany\u003e` å…·è±¡åŒ–èµ·ä¾†ï¼Œæ˜¯æ€éº¼æ¨£çš„ä¸€å€‹ classï¼ŒCompiler æ²’è¾¦æ³•ç¢ºä¿é€™å€‹æœªçŸ¥çš„ Base class æ˜¯å¦æœ‰ `sendClear` functionã€‚\n\n## Template ç¹¼æ‰¿è¦å‰‡èˆ‡ç‰©ä»¶å°å‘ç¹¼æ‰¿è¦å‰‡ä¸åŒ\né€™æ­£æ˜¯æ¢æ¬¾1æ‰€èªªçš„ï¼ŒC++ æ˜¯ä¸€å€‹è¯é‚¦ã€‚Template C++ èˆ‡ Object Oriented C++ æœ‰äº›æ¦‚å¿µæ˜¯ä¸åŒçš„åªèƒ½é€é Template Specialization å¯ä»¥å°ç‰¹å®šçš„é¡åˆ¥è¨‚è£½ç‰¹å®šçš„å…§å®¹ï¼ŒTemplate çš„ç¹¼æ‰¿è¦å‰‡ä¸¦ä¸å¦‚ç‰©ä»¶å°å‘ç¹¼æ‰¿è¦å‰‡ï¼Œåœ¨çŸ¥é“ `MsgSender\u003cCompany\u003e` æ‰€ä»£è¡¨çš„å¯¦é«” class ä¹‹å‰ï¼Œæ²’è¾¦æ³•ç¢ºå®š sendClear æ˜¯å¾å“ªä¾†çš„ï¼Œå› ç‚ºç•¶å‰çš„ LoggingMsgSender ä¸å­˜åœ¨é€™æ¨£çš„ functionã€‚\n\n## è§£æ±ºè¾¦æ³•\nä»¥ä¸‹çš„ä½œæ³•éƒ½æ˜¯æ¬Šå®œä¹‹è¨ˆï¼Œéƒ½æ˜¯å‡è¨­ Base Class ç¢ºå¯¦æ“æœ‰ `sendClear` çš„æƒ…æ³ï¼Œä½†æ›¸ä¸­æœ‰æ²’æœ‰ææ›´å¥½çš„è§£æ³•ã€‚\n### åœ¨ Base Class function å‰åŠ ä¸Š `this-\u003e`\n```c++\ntemplate\u003ctypename Company\u003e\nclass LoggingMsgSender: public MsgSender\u003cCompany\u003e {\npublic:\n\tvoid sendClearMsg(const MsgInfo\u0026 info)\n\t{\n\t\tthis-\u003esendClear(info); // pass, å‡è¨­ sendClear æœƒè¢«ç¹¼æ‰¿\n\t}\n}\n```\n\n### ä½¿ç”¨ Using å®£å‘Šå¼\n[[ä½¿ç”¨é—œéµå­— using è®“ç‰¹å®š function åœ¨ Scope å…§å¯è¦‹]]ï¼Œä½¿ç”¨çš„æ–¹æ³•ç›¸åŒã€‚ä¸éåœ¨è©²ä¾‹ä¸­æ˜¯ç‚ºäº† [[ç¹¼æ‰¿æ™‚çš„åç¨±é®æ©è¡Œç‚º]] å•é¡Œï¼Œæœ¬ä¾‹çš„è‚‡å› å»æ˜¯ Compiler ä¸æœƒé€²å…¥ Base Class Scope æ‰¾ functionï¼Œæˆ‘å€‘é€é `using` è«‹ Compiler é€™éº¼åšã€‚\n\n```c++\ntemplate\u003ctypename Company\u003e\nclass LoggingMsgSender: public MsgSender\u003cCompany\u003e {\npublic:\n\tusing MsgSender\u003cCompany\u003e::sendClear;\n\tvoid sendClearMsg(const MsgInfo\u0026 info)\n\t{\n\t\tsendClear(info);\n\t}\n}\n```\n\n\n### ä»¥ Base Class çš„ Namespace å‘¼å«è©² Function\n```c++\ntemplate\u003ctypename Company\u003e\nclass LoggingMsgSender: public MsgSender\u003cCompany\u003e {\npublic:\n\tvoid sendClearMsg(const MsgInfo\u0026 info)\n\t{\n\t\tMsgSender\u003cCompany\u003e::sendClear(info);\n\t}\n}\n```\n\né€™å€‹æ–¹æ³•çš„ç¼ºé»æ˜¯å¦‚æœè¢«å‘¼å«çš„æ˜¯ virtual functionï¼Œé€™å€‹æ˜ç¢ºçš„ä¿®é£¾(explicit qualification) (`MsgSender\u003cCompany\u003e::`) æœƒé—œé–‰ virtual çš„ç¶å®šè¡Œç‚ºã€‚\n\n### çµè«–\nåœ¨ invalid reference to base class member é€™å€‹å•é¡Œä¸Šï¼ŒCompiler æœ‰å…©ç¨®åšæ³•\n1. åœ¨æª¢è¦– Derived Class Template Definition æ™‚å°±è¨ºæ–·ï¼Œæ­¤è™•çš„ç¼ºé»æ˜¯ Template åƒæ•¸å°šæœªå…·è±¡åŒ–ï¼Œç„¡æ³•å¾—çŸ¥ \"çœŸæ­£çš„ Base Class\" çš„é•·ç›¸\n2. ç­‰åˆ° Template åƒæ•¸å…·è±¡åŒ–æ™‚ï¼Œå†æª¢è¦–é€™å€‹ reference æ˜¯å¦æœ‰æ•ˆã€‚\n\nC++ çš„æ”¿ç­–æ˜¯å‚¾å‘ç¬¬ä¸€ç¨®ï¼ŒåŠæ—©è¨ºæ–·ã€‚å› æ­¤ Compiler å½·å½¿å®Œå…¨ä¸çŸ¥é“ Base Class æœ‰å“ªäº›æ±è¥¿å¯ä»¥å‘¼å«ä¸€æ¨£ã€‚\n\nè€Œä¸Šè¿°çš„ä¸‰å€‹æ‰‹æ®µï¼Œå°±æ˜¯è®“ Compiler ä¸è¦çœ‹åˆ°é»‘å½±å°±é–‹æ§(çˆ† error)ï¼Œã€Œå…ˆã€å‡è¨­ Base Class æœ‰é€™å€‹ functionï¼Œè®“ç·¨è­¯å¾€ä¸‹èµ°ã€‚å¦‚æœå¾Œä¾†ç™¼ç¾å› ç‚º template specialization ç­‰åŸå› ï¼Œå‘¼å«çš„ function ä¸å­˜åœ¨ï¼Œä¾ç„¶ä¸æœƒé€šéç·¨è­¯ï¼Œé€™ä¾ç„¶æ˜¯ä¸€å€‹ç„¡æ•ˆçš„ referenceã€‚","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E4%BA%86%E8%A7%A3-Inline-%E7%9A%84%E8%A3%A1%E8%A3%A1%E5%A4%96%E5%A4%96":{"title":"äº†è§£ Inline çš„è£¡è£¡å¤–å¤–","content":"\n## åŸç†\nç”¨ç¨‹å¼ç¢¼å–ä»£ function call\n\n## å‘ Compiler ç™¼å‡ºç”³è«‹\n\nProgrammer å¯ä»¥æ˜ç¢ºçš„æå‡ºè«‹æ±‚ï¼Œæˆ–éš±å–»çš„æå‡ºã€‚ä½†ç·¨è­¯å™¨å¯ä»¥æ‹’çµ•é€™å€‹ç”³è«‹ï¼Œå¤§éƒ¨åˆ†éæ–¼è¤‡é›œçš„å‡½å¼éƒ½æœƒè¢«æ‹’çµ• inline:\n- æœ‰ loop çš„\n- å¤šæ•¸çš„ virtual function (ç­‰ Runtime æ‰ç¢ºå®šå“ªå€‹è¢«å–šé†’)\n\né¡¯ç¤ºèˆ‡éš±å¼çš„åˆ†åˆ¥:\n- é¡¯å¼: é—œéµå­— `inline` æ˜¯ä¸€ç¨®å° Compiler ç™¼å‡ºçš„æ˜ç¢ºè«‹æ±‚ï¼Œä½† Compiler ä¸ä¸€å®šæœƒè½è©±ã€‚\n- éš±å¼: æœ‰å¦ä¸€ç¨®æš—ç¤ºè«‹æ±‚ï¼Œå°±æ˜¯æŠŠ function å¯¦ä½œå¯«åœ¨ class å®šç¾©è£¡é¢ã€‚é€™ç¨®é€šå¸¸æ˜¯ member functionï¼Œä½† friend function ä¹Ÿå¯ç›´æ¥å®šç¾©åœ¨ class å…§ï¼Œå› æ­¤ä¹Ÿå¯èƒ½è¢«éš±å¼å®£å‘Šç‚º inlineã€‚\n\n```cpp\nclass Person {\npublic:\n\tint age() const { return theAge; } \n\t// an implicit inline request: age is  defined in a class efinition\nprivate:\n\tint theAge;\n};\n```\n\n\n\n## å„ªé»\nç•¶ inline function æœ¬èº«å¾ˆå°çš„æ™‚å€™ï¼ŒæŠŠç¨‹å¼ç¢¼å±•é–‹åœ¨å‘¼å«è€…çš„ã€Œå‡½å¼æœ¬é«”ã€çš„æˆæœ¬(object code å¤§å°) ï¼Œæœƒæ¯”å‘¼å«è©² function æ‰€ç”¢ç”Ÿçš„æˆæœ¬ä¾†çš„å°! \n\n## ç¼ºé»\n1. ç•¶ inline func å‡½å¼æœ¬é«”é¾å¤§ï¼Œé€™äº›é¾å¤§çš„ç¢¼æœƒæ•£å¸ƒåœ¨å„å€‹å‘¼å«è€…çš„å‡½å¼æœ¬é«”ï¼Œå°è‡´ç¨‹å¼å¤ªå¤§ã€‚\n2. ç”±æ–¼å®ƒçš„è¡¨ç¾ç›¸ç•¶æ–¼ç›´æ¥å±•é–‹åœ¨å„å€‹å‘¼å«è€…èº«ä¸Šï¼Œä¸€æ—¦ inline function æœ‰æ›´æ”¹ï¼Œcaller ä¹Ÿæœƒè¢«æ›´å‹•ã€‚è€Œ non-inline å°±åªæœƒæ˜¯é‡æ–°é€£çµçš„å•é¡Œï¼Œå°é‡æ–° Compile çš„è² æ“”æ¯”è¼ƒå°ã€‚\n3. Debugger æ²’è¾¦æ³•å°ä»˜ Inline function --- æ€éº¼å°ä¸€å€‹ä¸å­˜åœ¨çš„å‡½å¼è¨­å®šä¸­æ–·é»å‘¢?\n\n## Guidline \n- é™åˆ¶ Inline ä½¿ç”¨çš„æ™‚æ©Ÿ: å®ƒæœ‰çµ•å°çš„ç†ç”±å¿…é ˆæ˜¯ inline (template è¦å®š?) [[éœ€è¦å‹åˆ¥è½‰æ›æ™‚è«‹ç‚ºæ¨¡æ¿å®šç¾©éæˆå“¡å‡½å¼]]\n- ååˆ†å¹³æ·¡ç„¡å¥‡ï¼Œåƒæ˜¯ `return m_size` é€™èˆ¬ç„¡èŠã€‚\n\n## Library Provider å¿…é ˆè¬¹æ…è©•ä¼°æ˜¯å¦å®£å‘Šå‡½å¼ç‚º Inline \næœ‰é—œ Inline å¸¶ä¾†çš„å£è™•ï¼Œæ•˜è¿°æ–¼ [[å»ºæ§‹å’Œè§£æ§‹å¼æ˜¯ inline çš„ç³Ÿç³•äººé¸]]ã€‚\n\nè¦æ³¨æ„ï¼Œinline ç„¡æ³•éš¨è‘—å‡½å¼åº«å‡ç´šè€Œå‡ç´šï¼Œä¸€æ—¦ inline funciton å…§å®¹æœ‰è®Šæ›´ï¼ŒClient ç«¯æ‰€æœ‰æœ‰ç”¨åˆ°è©² function çš„ç¨‹å¼éƒ½éœ€è¦é‡æ–°ç·¨è­¯ã€‚\nè€Œè‹¥ä¸ç”¨ inlineï¼ŒClient ç«¯åªéœ€è¦é‡æ–° Link å³å¯ã€‚\n\n## Template and Inline\n\ninline function é€šå¸¸ä¸€å®šæ”¾åœ¨ header file è£¡é¢ï¼Œå› ç‚ºå¤§å¤šæ•¸çš„å»ºç½®ç’°å¢ƒæœƒåœ¨ç·¨è­¯ä¸­åš inliningï¼Œç‚ºäº†æŠŠ function call æ›æˆã€Œè¢«å‘¼å«å‡½å¼ã€æœ¬é«”ï¼Œå¿…é ˆçŸ¥é“è¢«å‘¼å«å‡½å¼çš„å…§å®¹ã€‚\n\nTemplate ä¹Ÿé€šå¸¸æ”¾åœ¨ header fileï¼Œå› ç‚ºä¸€æ—¦ä½¿ç”¨ï¼ŒCompiler ç‚ºäº†å…·ç¾åŒ–ï¼ŒåŒæ¨£éœ€è¦çŸ¥é“å…¶å…§å®¹ã€‚\n\nä½† inline å…·ç¾åŒ–èˆ‡ template å…·ç¾åŒ–ç„¡é—œï¼Œä¸éï¼Œå¦‚æœ template çš„ä½œè€…**å¸Œæœ›** function ç‚º inlineï¼Œæ‡‰è©²æ˜ç¢ºä»¥é—œéµå­— `inline` å®£å‘Šã€‚\n\n## å¦‚ä½•æ±ºå®šæ˜¯å¦è¦ Inline? \nå–„ç”¨ [[80-20 Rule]] æ‰¾å‡ºæœ€é—œéµã€æœ€å¸¸è¢« Call çš„ç¨‹å¼ç¢¼å»åˆ¤æ–·æ˜¯å¦è©²ç”¨ Inline å„ªåŒ–å®ƒ!","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E4%BB%A5-Const-%E5%8F%96%E4%BB%A3%E4%BD%BF%E7%94%A8-Define":{"title":"ä»¥ Const å–ä»£ä½¿ç”¨ Define","content":"\n## ä»¥ç·¨è­¯å™¨å–ä»£å‰è™•ç†å™¨\n\n `#define` çš„æœ¬è³ªæ˜¯ word replacementï¼Œå¦‚: `#define RATIO 1.653`ï¼Œç·¨è­¯å™¨å¯èƒ½ä¸èªå¾— `RATIO` ä¸¦åœ¨éŒ¯èª¤è¨Šæ¯ä¸­å¾é ­åˆ°å°¾ä»¥ 1.653 å–ä»£ `RATIO`ã€‚\n```cpp\n const double Ratio=1.653; // Prefer\n```\n\nç•¶ä»¥ `const` å–ä»£ `#define` æ™‚ï¼Œæœ‰å…©å€‹éœ€è¦æ³¨æ„çš„é»\n1. å®šç¾©å¸¸æ•¸æŒ‡æ¨™ (const pointer): å¸¸æ•¸æŒ‡æ¨™ç”¨æ–¼ ã€Œä¸å…è¨±æ­¤Pointeræ›´æ”¹æŒ‡å‘çš„å°è±¡ã€ï¼Œå› æ­¤éœ€è¦å° pointer å®£å‘Š const\n\n```cpp\nconst std::string = authorName(\"Scott\");\n ```\n\n2. Class çš„å°ˆå±¬å¸¸æ•¸: ç›®çš„æ˜¯é™åˆ¶å¸¸æ•¸çš„ Scopeï¼Œå› æ­¤è¦å®£å‘Šåœ¨ class å…§éƒ¨ã€‚è€Œç‚ºäº†ä½¿é€™å€‹å¸¸æ•¸åªæœ‰ä¸€å€‹å¯¦é«”(æ‰€æœ‰ instance å…±äº«åŒä¸€å€‹å¸¸æ•¸)ï¼Œé‚„éœ€è¦å®£å‘Š `static`ã€‚\n\n```cpp\nclass Player {\nprivate:\n\tstatic const int num = 5;\n\tint scores[num];\n}\n ``` \n\n\n## å…·æœ‰ Access Level\nç¬¬äºŒé»çš„ç”¨é€”ï¼Œè¨­ç½®ä¸€å€‹åœ¨æŸç‰¹å®šé¡åˆ¥æ‰ç”Ÿæ•ˆçš„å¸¸æ•¸è®Šæ˜¯ `#define` åšä¸åˆ°çš„ï¼Œ`#deinfe` ä¸åœ¨ä¹ scopeï¼Œä¸èƒ½å¸¶ä¾†å°è£æ€§ï¼Œæ›´æ²’æœ‰ `private #deinfe` é€™ç¨®æ±è¥¿ã€‚\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E4%BD%BF%E7%94%A8%E9%97%9C%E9%8D%B5%E5%AD%97-using-%E8%AE%93%E7%89%B9%E5%AE%9A-function-%E5%9C%A8-Scope-%E5%85%A7%E5%8F%AF%E8%A6%8B":{"title":"ä½¿ç”¨é—œéµå­— using è®“ç‰¹å®š function åœ¨ Scope å…§å¯è¦‹","content":"é¦–å…ˆäº†è§£ [[ç¹¼æ‰¿æ™‚çš„åç¨±é®æ©è¡Œç‚º]]ã€‚\n\nå¦‚æœï¼Œæˆ‘å€‘åªæ˜¯æƒ³ç‚º Derived Class å¢åŠ åŒåç¨±ã€Signature ä¸åŒçš„ function? æˆ‘å€‘å¸Œæœ› Base Class çš„ function ä»ç„¶å¯ä»¥è¢«ä½¿ç”¨! å‰‡ï¼Œéœ€è¦åšçš„æ˜¯ç”¨ `using` è®“ Base Function è®Šå¾—å¯è¦‹ï¼Œå¦‚ä¸‹ä¾‹: \n\n```cpp\nclass Derived: public Base {\npublic:\n\tusing Base::mf1; // make all things in Base named mf1 and mf3\n\tusing Base::mf3; // visible (and public) in Derivedâ€™s scope\n\tvirtual void mf1();\n\tvoid mf3(); // override Derived::mf3, even \n\tvoid mf4();\n...\n};\n\nDerived d;\nint x;\n...\nd.mf1(); // still fine, still calls Derived::mf1\nd.mf1(x); // now okay, calls Base::mf1\nd.mf2(); // still fine, still calls Base::mf2\nd.mf3(); // fine, calls Derived::mf3\nd.mf3(x); // now okay, calls Base::mf3 \n// (The int x is implicitly converted to a double so that  the call to Base::mf3 is valid.)\n```\n\n`using` æ”¾åœ¨ public æ˜¯å› ç‚º Public ç¹¼æ‰¿ï¼Œfunction åœ¨ Base class æ˜¯ public ï¼ŒåŸºæ–¼æ­£ç¢ºçš„ public ç¹¼æ‰¿å‰æï¼ŒDerived Class åœ¨ `using` æš´éœ² Base Class çš„ function name æ™‚ï¼Œä¹Ÿæ‡‰è©²è¦æ˜¯ Public ã€‚\n\n- å¯ä»¥ä¸è¦ç¹¼æ‰¿æ‰€æœ‰ Base Class çš„æ‰€æœ‰å‡½å¼å—?\n\t- åœ¨ Public ç¹¼æ‰¿ä¸‹é€™ä¸å¯èƒ½ç™¼ç”Ÿï¼Œé€™é•åäº† [[ç¢ºä¿ Derived Class å’Œ Base Class ä¹‹é–“å¿…ç„¶ä¿æŒ Is-a é—œä¿‚]]ã€‚\n\n## Private ç¹¼æ‰¿: ä½¿ç”¨ forwarding function ç¹¼æ‰¿éƒ¨åˆ†å‡½å¼\nä¸ç¹¼æ‰¿æ‰€æœ‰ Base Class çš„æ‰€æœ‰å‡½å¼ï¼Œåœ¨ Private ç¹¼æ‰¿æ˜¯æœ‰æ„ç¾©çš„ã€‚åŒæ¨£çš„é‡åˆ°åç¨±é®æ©å•é¡Œï¼Œè©²æ€éº¼åš?\n\nåŒæ¨£ä»¥ä¸‹åœ–ç‚ºä¾‹ï¼Œå¦‚æœ Derived Class åªè¦ `void mf3()`ï¼Œä¸è¦ `void mf3(double)`? \n![[Itm33.png]]\n\né‚£å°‡ç„¡æ³•ä½¿ç”¨ `using`ï¼Œå› ç‚ºç”¨ä¸‹å»æ‰€æœ‰çš„ `Base::mf3` éƒ½æœƒè®Šå¾—å¯è¦‹ã€‚é€™æ™‚å€™è¦æ›å€‹æ‰‹æ³•: forwarding functionã€‚\n\n```cpp\nclass Base {\npublic:\n\tvirtual void mf1() = 0;\n\tvirtual void mf1(int);\n\t... // as before\n};\nclass Derived: private Base {\npublic:\n\tvirtual void mf1() { Base::mf1(); } \n\t// forwarding function; implicitly inline â€” see Item 30. \n\t// (For info on calling a pure virtual function, see Item 34.)\n}; \n\nDerived d;\nint x;\nd.mf1(); // fine, calls Derived::mf1\nd.mf1(x); // error! Base::mf1() is hidden\n```\n\n\nç•¶ç¹¼æ‰¿çµåˆ Templateï¼Œç¹¼æ‰¿åç¨±é­åˆ°é®æ©çš„å•é¡Œæœƒå†åº¦ç™¼ç”Ÿï¼Œåƒè¦‹ [[äº†è§£å¦‚ä½•åœ¨ Template ä¸­æŒ‡æ¶‰ Base Class æˆå“¡]]","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E5%8D%80%E5%88%86%E4%BB%8B%E9%9D%A2%E7%B9%BC%E6%89%BFinterface%E5%92%8C%E5%AF%A6%E4%BD%9C%E7%B9%BC%E6%89%BFimplement":{"title":"å€åˆ†ä»‹é¢ç¹¼æ‰¿(interface)å’Œå¯¦ä½œç¹¼æ‰¿(implement)","content":"\n## èƒŒæ™¯\nBase Class Designer åœ¨è¨­è¨ˆç•Œé¢çš„æ™‚å€™ï¼Œå¯èƒ½å° Derived Class å¯¦è¸è€…æœ‰ä¸‰ç¨®æœŸè¨±\n- åªç¹¼æ‰¿ Member Function Interface (æ‰¿è¥²å®£å‘Šå¼)\n- åŒæ™‚ç¹¼æ‰¿ Member Function Interface å’Œ**é è¨­çš„**å¯¦ä½œï¼Œä¹Ÿå¯ä»¥ overrideã€‚\n- åŒæ™‚ç¹¼æ‰¿ Member Function Interface å’Œå¯¦ä½œï¼Œä¸å…è¨± override (ä¸è¦è‡ªå·±æ”¹å¯¦ä½œ!)\n\n## Pure Virtual Function : åªç¹¼æ‰¿ Interface éœ€è‡ªè¡Œå¯¦åš\n[[Pure Virtual Function]] ç›¸ç•¶æ–¼å‘Šè¨´ Client: ä½ éœ€è¦æä¾›ä¸€å€‹é€™æ¨£çš„å‡½å¼ï¼Œä½†æˆ‘ä¸å¹²æ¶‰ä½ æ€éº¼åšå®ƒã€‚\n```cpp\nclass Shape {\npublic:\n\tvirtual void draw() const = 0;\n};\n```\n\n## Impure Virtual Function : ç¹¼æ‰¿ Interface å’Œé è¨­å¯¦ä½œ\n```cpp\nclass Shape {\npublic:\n\tvirtual void error(const std::string\u0026 msg);\n};\n```\n\nç›¸ç•¶æ–¼å‘Šè¨´ Client: ä½ éœ€è¦æä¾›ä¸€å€‹é€™æ¨£çš„å‡½å¼ï¼Œå¦‚æœä¸æƒ³è‡ªå·±å¯«ï¼Œå¯ä»¥ç”¨é è¨­çš„å…§å®¹! \n\nä½†æ˜¯ï¼Œè®“ impure virtual function åŒæ™‚æ“”ä»»ã€Œè¦æ±‚ client çµ¦ä¸€å€‹é€™æ¨£çš„å‡½å¼ã€åˆåœ¨ã€Œå¯¦ä½œä¸­æ”¾äº†é è¨­è¡Œç‚ºã€ Client ç«¯å¯èƒ½åœ¨ä¸çŸ¥æƒ…ä¸‹å¿½ç•¥è¦è‡ªå·±å¯¦ä½œï¼Œè€Œå¼•ç™¼å•é¡Œ [[Impure Virtual Function]]ã€‚\n\n## Non-Virtual Function: ç¹¼æ‰¿ä»‹é¢èˆ‡å¯¦ä½œï¼Œä¸æ‡‰é‡æ–°æ’°å¯«å¯¦ä½œ\nä»£è¡¨ä¸è®Šæ€§(invariant)ã€å‡Œé§•ç‰¹ç•°æ€§(specializationï¼Œå› æ­¤ä¸è©²åœ¨ Derived Class ä¸­é‡æ–°è¢«å®šç¾©ã€‚\n[[çµ•ä¸é‡æ–°å®šç¾©ç¹¼æ‰¿ä¾†çš„ Non-virtual Function]]\n\n## Conclustion\n1. ä¸è©²å°‡æ‰€æœ‰çš„å‡½å¼å®£å‘Šæˆ non-virtualï¼Œé€™æœƒå°è‡´ Derived æ²’æœ‰ç©ºé–“ç‰¹ç•°åŒ–ï¼Œç‰¹åˆ¥æ˜¯ non-virtual destructor æœƒå¸¶ä¾†å•é¡Œ: [[ç‚ºå¤šå‹ç”¨é€”çš„åŸºç¤é¡åˆ¥å®£å‘Š virtual è§£æ§‹å¼]]\n2. ä¸è©²å°‡æ‰€æœ‰çš„å‡½å¼å®£å‘Šæˆ virtualï¼ŒæŸäº›æ™‚å€™é€™æ˜¯æ­£ç¢ºçš„ï¼Œåƒæ˜¯ Interface Classã€‚ä½†å¤šæ•¸æ™‚å€™é€™æ˜¯ Base Class Designer æ²’æœ‰å …å®šç«‹å ´ï¼ŒæŸäº› Function å°±æ˜¯ä¸è©²åœ¨ Base Class è¢«é‡æ–°å®šç¾©! \n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E5%A4%9A%E9%87%8D%E7%B9%BC%E6%89%BF-Multiple-Inheritance-MI":{"title":"å¤šé‡ç¹¼æ‰¿","content":"- å–®ä¸€ç¹¼æ‰¿ (Single Inheritance, SI)\n- å¤šé‡ç¹¼æ‰¿ (Multiple Inheritance, MI)\n---\n\n## äº†è§£ C++ å¦‚ä½•è§£æ±ºæ­§ç•° (ambiguity)\n\nå‡½å¼åç¨±ã€typedef éƒ½å¯èƒ½ç™¼ç”Ÿæ­§ç•°ã€‚C++ è§£æ±ºæ­§ç•°çš„æ–¹å¼èˆ‡æ±ºè­°(resolving) overloading function çš„è¦å‰‡ç›¸åŒ\n- å…ˆæ‰¾æœ€åŒ¹é…çš„å‘¼å«å‡½å¼\n- å¦‚æœåŒ¹é…åº¦ç›¸åŒï¼Œæ‰æœƒç™¼ç”Ÿæ­§ç•°ï¼Œå› ç‚ºæ²’æœ‰æœ€ä½³åŒ¹é…ã€‚\n\né¢å°æ­§ç•°ï¼Œåœ¨å‘¼å«çš„æ™‚å€™éœ€è¦æ˜æŒ‡å‘¼å«çš„æ˜¯å“ªä¸€å€‹ class çš„ function:\n```cpp\nobj.BaseClass::someFunc();\nobj.DerivedClass::someFunc();\n```\n\n## é‘½çŸ³ç¹¼æ‰¿\nè©¦æƒ³ä¸‹åœ–ï¼Œå‡è¨­ `File` è£¡é¢æœ‰ä¸€å€‹ member data `fileName`ï¼Œè€Œåœ¨ `IOFile` ç•¶ä¸­ï¼Œå®ƒè©²æœ‰å¹¾å€‹ `fileName` data?\n![[Item40.png]]\n\n1. ä¾†è‡ª `InputFile::fileName`, `OutputFile::fileName`å„ä¸€ä»½\n2. åªè©²ä¸€ä»½ï¼Œä¾†è‡ªå…©å€‹ Parent Class çš„ fileName æ‡‰è©²è¦ç›¸åŒï¼Œä¸”åªæœ‰ä¸€ä»½ `fileName` è³‡æ–™æ¡åœ¨ `IOFile`ã€‚\n\nC++ çš„é è¨­åšæ³•æ˜¯ (1)ï¼Œå„è¤‡è£½ä¸€ä»½ã€‚ä½†åŒæ™‚ä¹Ÿæ”¯æ´ (2)ï¼Œåªæ˜¯åœ¨ç¹¼æ‰¿æ™‚éœ€è¦å®£å‘Š virtual: [[Virtual Base Class]]ã€‚\n\n## çµè«–\n- æœ‰å–®ä¸€ç¹¼æ‰¿ï¼Œå°±ç”¨å–®ä¸€ç¹¼æ‰¿\n- å¦‚æœå¤šé‡ç¹¼æ‰¿èƒ½å¸¶ä¾†æ¯”å–®ä¸€ç¹¼æ‰¿ä½çš„ç¶­è­·æˆæœ¬ã€ä¸”åˆç†ï¼Œåˆ¥çŒ¶è±«ã€‚\n\t- å…¶ä¸­ä¸€ç¨®ä¾‹å­ (P195~199) : public ç¹¼æ‰¿æŸå€‹ Interface class, private ç¹¼æ‰¿æŸå€‹å”ä½œå¯¦ä½œçš„ classï¼Œå°±æ˜¯å¤šé‡ç¹¼æ‰¿çš„ä¸€å€‹åˆç†å±•ç¾ã€‚\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E5%AF%A9%E6%85%8E%E7%9A%84%E4%BD%BF%E7%94%A8-Private-%E7%B9%BC%E6%89%BF":{"title":"å¯©æ…çš„ä½¿ç”¨ Private ç¹¼æ‰¿","content":"- Private ç¹¼æ‰¿ä»£è¡¨ implemented in terms of (æ ¹æ“šæŸç‰©å¯¦ä½œå‡º)\n- ç•¶ `class D` ä»¥ Private ç¹¼æ‰¿ `class B`ï¼Œç›®çš„æ˜¯ã€Œèª¿ç”¨ class B çš„ APIã€ï¼Œé€šå¸¸æ„å‘³è‘—åªæœ‰å¯¦ä½œè¦è¢«ç¹¼æ‰¿ï¼Œä»‹é¢ä¸éœ€è¦ã€‚æ‰€ä»¥ private ç¹¼æ‰¿ä¾†çš„ function ä¹Ÿåªæ‡‰è©²æ”¾åœ¨ private å€å¡Šã€‚\n- Private ç¹¼æ‰¿æ˜¯å¯¦ä½œä¸Šçš„æ‰‹æ®µï¼Œè·Ÿ OO design æ²’æœ‰é—œä¿‚ã€‚\n\n## implemented in terms of (æ ¹æ“šæŸç‰©å¯¦ä½œå‡º)\nåœ¨ [[ç¢ºå®š Composition å¡‘é€ çš„æ˜¯ 'Has-A'é—œä¿‚ æˆ– 'æ ¹æ“šæŸç‰©å¯¦ä½œ'çš„é—œä¿‚]] è£¡é¢ä¹ŸæåŠ implemented in terms of (æ ¹æ“šæŸç‰©å¯¦ä½œå‡º) çš„é—œä¿‚ã€‚\n\nåœ¨å¤šæ•¸çš„æƒ…æ³ä¸‹ï¼Œcomposition æ˜¯å„ªæ–¼ private ç¹¼æ‰¿çš„ï¼Œåªæœ‰ç•¶\n- è¦èª¿ç”¨ protected member \n- virtual function éœ€è¦é‡æ–°å®šç¾©\nè¢«ç‰½æ‰¯é€²ä¾†æ™‚æ‰æ‡‰è©²è€ƒæ…® Private ç¹¼æ‰¿ã€‚\n\nå³ä½¿å¿…é ˆä½¿ç”¨ Private ç¹¼æ‰¿ï¼Œè¨˜ä½[[è®“ä»‹é¢æ˜“æ–¼è¢«ä½¿ç”¨ï¼Œä¸æ˜“èª¤ç”¨]]ï¼Œæˆ‘å€‘å¯ä»¥é€éä¸€äº›æ‰‹æ®µæŠŠ Private ç¹¼æ‰¿çš„å½±éŸ¿ã€Œè—èµ·ä¾†ã€\n## Private ç¹¼æ‰¿çš„ç¯„ä¾‹\næƒ…å¢ƒ\n1. æœ‰ä¸€å€‹ `Widget` ç‰©ä»¶ï¼Œæˆ‘å€‘æƒ³è¦çŸ¥é“ä»–è¢«å‘¼å«çš„æ¬¡æ•¸ï¼Œä¸¦ä¸”æœƒé€±æœŸæ€§çš„æª¢è¦–å®ƒçš„è³‡æ–™ã€‚\n2. ç‚ºæ­¤ï¼Œéœ€è¦ä¸€å€‹è¨ˆæ™‚å™¨ `Timer`ï¼Œåœ¨å·¥å…·ç®±ä¸­ç™¼ç¾äº†å®ƒ! åªè¦é‡æ–°å®šç¾© `onTick`ï¼Œåœ¨è£¡é¢å¯«å–å‡º Widget ç‰©ä»¶çš„ç‹€æ…‹å³å¯!\n```c++\nclass Timer {\npublic:\n\texplicit Timer(int tickFrequency);\n\tvirtual void onTick() const; // automatically called for each tick\n...\n};\n```\n\n- Question: æ‡‰è©²è®“ Widget ç¹¼æ‰¿ Timer å—?\n\t- Public ç¹¼æ‰¿: Widget ä¸¦é Timerï¼Œé€™é•å [[ç¢ºä¿ Derived Class å’Œ Base Class ä¹‹é–“å¿…ç„¶ä¿æŒ Is-a é—œä¿‚]]\n\t- Private ç¹¼æ‰¿: å¯ä»¥é‡æ–°å®šç¾© `onTick`ï¼Œå®¢æˆ¶ç«¯ä¹Ÿæ²’èƒ½åŠ›å‘¼å«åˆ°å®ƒï¼ŒOKã€‚\n\n## Composition + Private ç¹¼æ‰¿\næ¯”èµ·ç›´æ¥çš„ Private ç¹¼æ‰¿ï¼Œæˆ‘å€‘æœ‰æ›´å¥½çš„åšæ³•ã€‚\n![[Item39.png]]\n\næ­¤ä½œæ³•çš„å¥½è™•æœ‰å…©å€‹\n### ç‚º Base Class è¨­è¨ˆåšè€ƒé‡\n- å¦‚æœ Widget è¢«è¨­è¨ˆæˆ Base Classï¼Œå»ä¸å¸Œæœ› Derived Class é‡æ–°å®šç¾© `onTick`ï¼Œå°±ä¸é©åˆç›´æ¥è®“ Widget ä»¥ Private ç¹¼æ‰¿ Timerã€‚ä½†æ–°çš„è¨­è¨ˆè®“ `WidgetTimer`ç¹¼æ‰¿ Timer å¾—ä»¥é‡æ–°å®šç¾© virtual functionï¼Œä¸¦æŠŠ timer ç‰©ä»¶æ”¾åœ¨ privateï¼Œç¾åœ¨ derived class æƒ³ç¢°ä¹Ÿç¢°ä¸åˆ° timer äº†ã€‚\n```c++\nclass Widget {\nprivate:\n\tclass WidgetTimer: public Timer {\n\tpublic:\n\t\tvirtual void onTick() const;\n\t\t...\n\t};\n WidgetTimer timer;\n...\n}\n```\n\n### é™ä½ç·¨è­¯ä¾å­˜æ€§\nå¦‚æœ Widget ç¹¼æ‰¿ Timer ï¼Œå‰‡ Widget è¢«ç·¨è­¯æ™‚ï¼ŒTimer çš„å®šç¾©ä¹Ÿå¿…é ˆå¯è¦‹ã€‚ä¹Ÿå°±æ˜¯èªª Widget éœ€è¦ `#include Timer.h`ã€‚ä½†å¦‚æœæŠŠ `WidgetTimer` ä»¥ä¸€å€‹ pointer å­˜åœ¨ `Widget`ï¼Œå‰‡ä¸å†éœ€è¦ includeï¼Œé”åˆ° decouplingã€‚\n[[å°‡æª”æ¡ˆçš„ç·¨è­¯ä¾å­˜é—œä¿‚é™åˆ°æœ€ä½]]\n\n```c++\nclass Widget {\nprivate:\n\tWidgetTimer* timer; // better way: use smart pointer\n}\n\n// In another file\nclass WidgetTimer: public Timer {\npublic:\n\tvirtual void onTick() const;\n\t...\n};\n```\n\n## å…¶ä»–\n[[EBO (Empty Base Optimization)]]","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp",""]},"/notes/Project/Effective-C++-Series/%E5%B0%87%E6%AA%94%E6%A1%88%E7%9A%84%E7%B7%A8%E8%AD%AF%E4%BE%9D%E5%AD%98%E9%97%9C%E4%BF%82%E9%99%8D%E5%88%B0%E6%9C%80%E4%BD%8E":{"title":"å°‡æª”æ¡ˆçš„ç·¨è­¯ä¾å­˜é—œä¿‚é™åˆ°æœ€ä½","content":"\né¦–å…ˆæ¸…æ¥šæ­¤å…§å®¹: [[ç·¨è­¯ä¾å­˜-å®£å‘Šå¼ã€å®šç¾©å¼èˆ‡å¯¦ä½œç´°ç¯€]]ã€‚\næ¥è‘—ï¼Œéœ€è¦åˆ†æ¸…æ¥šã€Œè¢« include çš„å°è±¡ã€èˆ‡ã€Œè¢«å‰ç½®å®£å‘Šçš„å°è±¡ã€ã€‚\n\n## è¢« include çš„å°è±¡\n1. ç•¶éœ€è¦å‰µå»ºæŸé¡åˆ¥çš„ç‰©ä»¶ï¼Œä¾‹å¦‚ : è¦å‰µå»º member data `m_date`ï¼Œå‰‡éœ€è¦ include Date.hppã€‚\n2. æœ‰ç”¨åˆ° STL ç‰©ä»¶ï¼Œå‰‡ç›´æ¥ include STL å‡½å¼åº«ã€‚\n\nå°æ–¼ STL å‡½å¼åº«ï¼Œæ‡‰è©²ç”¨ `#include`ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å‰ç½®å®£å‘Šã€‚include æ¨™æº–å‡½å¼åº«çš„ header file å¹¾ä¹ä¸æœƒé€ æˆç·¨è­¯ç“¶é ¸ã€‚\n\n```c++\n// æ­£ç¢ºåšæ³•\n#include \u003cstring\u003e\n\n// éŒ¯èª¤ä½œæ³•\nnamespace std {\n\tclass string;\n}\n```\n\n## è¢«å‰ç½®å®£å‘Šçš„å°è±¡\nåªè¦ä¸æ˜¯è¦å‰µå»ºç‰©ä»¶ï¼Œä¸æ˜¯ STL ç‰©ä»¶ï¼Œå°±å¯ä»¥ä½¿ç”¨å‰ç½®å®£å‘Šè§£æ±ºéœ€æ±‚!! \nSTL ç‰©ä»¶å·²ç¶“ç¶“éå„ªåŒ–ï¼Œä¸ç”¨æ“”å¿ƒ include è² æ“”ã€‚\n\n## é™ä½ç·¨è­¯ä¾å­˜çš„æ‰‹æ³•: Pimpl Idiom\n\n[[pimpl idiom (pointer to implementation)]]\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E5%B0%91%E5%81%9A%E8%BD%89%E5%9E%8B%E5%8B%95%E4%BD%9CMinimize-casting":{"title":"å°‘åšè½‰å‹ Minimize casting","content":"## å¸¸è¦‹çš„è½‰å‹èªæ³•\n\n```cpp\n// èˆŠå¼è½‰å‹\n(T) expr; // C-style\nT(expr);  // func style\n\n// New-style/ C++ Style  casting \nconst_cast\u003cT\u003e(expr);\nstatic_cast\u003cT\u003e(expr);\nreinterpret_cast\u003cT\u003e(expr);\ndynamic_cast\u003cT\u003e(expr);\n```\n\n- `dynamic_cast`: å®‰å…¨å‘ä¸‹è½‰å‹ (safe downcasting)ï¼Œæ˜¯ä¸€å€‹å¯èƒ½è€—è²»é‡å¤§åŸ·è¡Œæˆæœ¬çš„è½‰å‹å‹•ä½œ\n- `static_cast`: å¼·è¿«éš±å¼è½‰æ›ï¼Œåƒæ˜¯ non-const to const, int to double...ï¼Œä½†ä¸èƒ½åš const to non-const.\n- `const_cast`: å”¯ä¸€å¯ä»¥åšåˆ° const to non-const.\n\nå³ä½¿èˆŠå¼è½‰å‹ä¾ç„¶æœ‰ç”¨ï¼Œé€šå¸¸å»ºè­°ç”¨æ–°å¼ï¼Œå¥½è™•æ˜¯\n1. å®¹æ˜“åœ¨ç¨‹å¼ç¢¼ä¸­è¢«æœå°‹\n2. æ„åœ–çª„åŒ–ï¼Œåƒæ˜¯å¦‚æœæƒ³ç§»é™¤ constnessï¼Œå‰‡å¿…é ˆä½¿ç”¨ const_castï¼Œå…¶ä»–éƒ½ä¸æœƒé€šéç·¨è­¯ã€‚\n```cpp\nconst int a = 1;\nint b = static_cast\u003cint\u003e(a); // fail\nint b = const_cast\u003cint\u003e(a); // ok\n```\n\n\n## ä¸æ˜¯åœ–è‡†æ¸¬è½‰å‹çš„ Pointer å¦‚ä½•å¯¦ä½œ\n\nåœ¨æŸäº›èªè¨€ä¸­ï¼ŒDrived Class è½‰æˆ Base Class åœ¨ Pointer ä¸Šåªæ˜¯ä¸€å€‹ Offsetã€‚ä½†åœ¨ C++ ä¸­ï¼ŒPointer æ˜¯æ€éº¼ã€Œç®—ã€å‡ºä¾†çš„å–æ±ºæ–¼ Compilerã€‚ä¸è¦è©¦åœ–ã€ŒçŒœã€è¦æŠ“å“ªå€‹ Addressï¼Œç›¸ç•¶æ–¼ Castingï¼Œè©²ç”¨ `static_cast` å°±ä¹–ä¹–ç”¨ã€‚\n\n\n## å¸¸è¦‹çš„è½‰å‹èª¤ç”¨: è©¦åœ–ä½¿ç”¨ Casting ä»¥å‘¼å« Base Class æ–¹æ³•\næœ‰äº›æ¡†æ¶è¦æ±‚ Drived Classes çš„ Virtual func å¯¦ä½œæ™‚ï¼Œè¦å…ˆå‘¼å« Base Class çš„å°æ‡‰å‡½å¼ã€‚\nåœ¨ Python ä¸­ï¼Œå‘¼å« Parent çš„æ–¹æ³•å¯ä»¥ä½¿ç”¨ `super()`ï¼Œåœ¨ C++ ä¸­ï¼Œç›´æ¥åœ¨ Drived Class ç•¶ä¸­ï¼Œä½¿ç”¨ Base Class çš„åç¨±ç©ºé–“ä»¥å‘¼å« Base Class æ–¹æ³•! \n\nExample: \n```cpp\nclass Window {\npublic:\n\tvirtual void onResize;\n}\n\nclass SpecicalWindow: public Window {\npublic: \n\tvirtual void onResize() {\n\t\t// éŒ¯èª¤ä½œæ³•\n\t\tstatic_cast\u003cWindow\u003e(*this).onResize();\n\t\t// æ­£ç¢ºåšæ³•\n\t\tWindow::onResize();\n}\n```\n\néŒ¯èª¤æ–¹æ³•çš„å‘¼å«ï¼Œç›¸ç•¶æ–¼\n```cpp\nWindow tmp = static_cast\u003cWindow\u003e(*this);\ntmp.onResize();\n```\n\n## Dynamic Cast\n\n### æ•ˆç‡å•é¡Œ\n`dynamic_cast` æœ‰åš´é‡çš„æ•ˆç‡å•é¡Œï¼Œå¤šé‡ç¹¼æ‰¿/æ·±åº¦ç¹¼æ‰¿è¶Šå¤šï¼Œæ•ˆç‡æˆæœ¬è¶Šå¤§ã€‚\næŸäº›æ™‚å€™æ¡ç”¨å®ƒæœ‰å¿…è¦çš„åŸå› : éœ€è¦æ”¯æ´å‹•æ…‹é€£çµã€‚\n\n## å¦‚ä½•é¿å…ä½¿ç”¨?\n### Dynamic Cast çš„ä½¿ç”¨å ´åˆ\næ‰‹ä¸Šæ¡æœ‰ä¸€å€‹ base class pointer/referenceï¼Œä½†ä½ èªå®šé€™å€‹ base class pointer æ‰€æŒ‡å‘çš„å°è±¡æ˜¯æŸä¸€å€‹ dirved classsã€‚\n\n### Solution1 ä½¿ç”¨ Type-Safe Container\nåŒæ¨£æ¥çºŒä¸Šä¾‹çš„ `Window`\n\n```cpp\n\nstd::vector\u003cWindow\u003e winPtrs;\n\ntypedef std::shared_ptr\u003cSpecialWindow\u003e SPW;\nSPW sp_ptr;\nsp_ptr = *winPtrs.begin();\n```\n\n\u003e [!question] \n\u003e 1. é€™è£¡æœ¬è³ªä¸é‚„æ˜¯ static cast?\n\u003e 2. å¦‚ä½•ä¿è­‰ type æ­£ç¢º?? container æœ‰æ¸¬è©¦?\n\n### Solution2 åœ¨ Base Class æ’°å¯«å°æ‡‰çš„ Virtual Func\n[[å€åˆ†ä»‹é¢ç¹¼æ‰¿(interface)å’Œå¯¦ä½œç¹¼æ‰¿(implement)]]\n\n```cpp\nclass Window {\npublic:\n\tvirtual void onResize;\n\tvirtual void blink() {};\n}\n\nclass SpecicalWindow: public Window {\npublic: \n\tvirtual void onResize() {...};\n\tvirtual void blink() {\n\t\t// implement!!\n\t};\n}\n```\n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E5%B7%A5%E5%BB%A0%E5%87%BD%E5%BC%8F-Factory-Function":{"title":"å·¥å» å‡½å¼ (Factory Function)","content":"\u003e Factory method pattern enables us to create an object without exposing the creation logic to the client and refer to the newly-created object using a common interface. It is one of the most widely used creational patterns.\n\u003e This pattern is also known as the Virtual Constructor.\n\n\nhttps://dzone.com/articles/factory-method-design-pattern","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E5%BB%BA%E6%A7%8B%E5%92%8C%E8%A7%A3%E6%A7%8B%E5%BC%8F%E6%98%AF-inline-%E7%9A%84%E7%B3%9F%E7%B3%95%E4%BA%BA%E9%81%B8":{"title":"å»ºæ§‹å’Œè§£æ§‹å¼æ˜¯ inline çš„ç³Ÿç³•äººé¸","content":"\nè€ƒé‡ä»¥ä¸‹ä¾‹å­:\n```cpp\nclass Base {\npublic:\n...\nprivate:\n\tstd::string bm1, bm2; // base members 1 and 2\n};\nclass Derived: public Base {\npublic:\n\tDerived() {} // Derivedâ€™s ctor is empty â€” or is it?\n...\nprivate:\n\tstd::string dm1, dm2, dm3; // derived members 1â€“3\n};\n```\nå»ºæ§‹å¼ `Derived::Derived` ä¹çœ‹å…§å®¹æ˜¯ã€Œç©ºçš„ã€å¾ˆé©åˆ inlining?\n\nåˆ¥å¿˜äº†ï¼Œç‰©ä»¶ç”¢ç”Ÿçš„æ™‚å€™ï¼Œæ¯ä¸€å€‹ Base Classã€æ¯ä¸€å€‹æˆå“¡è®Šæ•¸çš„ constructor éƒ½æœƒè¢«å‘¼å«ï¼Œåä¹‹ï¼Œç‰©ä»¶è¢«éŠ·æ¯€æ™‚ï¼Œdestructor ä¹Ÿæœƒä¾åºå‘¼å«ã€‚\n\né€™äº›å‹•ä½œä¸¦éæ†‘ç©ºç™¼ç”Ÿï¼ŒCompiler åœ¨ç·¨è­¯æœŸé–“æœƒä»£ç‚ºç”¢ç”Ÿï¼Œä¸¦å®‰æ’åˆ°ç¨‹å¼ç¢¼ä¸­ï¼Œå½·å½¿ä»¥ä¸‹å…§å®¹å°±æ˜¯ Compiler ä»£ç‚ºæˆç”Ÿçš„ (é€™ä¸¦éå¯¦éš›æœƒç”Ÿæˆçš„ï¼Œç·¨è­¯å™¨æœƒæ›´ç²¾å·§çš„è™•ç† exception)ã€‚\n\n```cpp\nDerived::Derived() // conceptual implementation of\n{ // â€œemptyâ€ Derived ctor\n\tBase::Base(); // initialize Base part\n\ttry { dm1.std::string::string(); } // try to construct dm1\n\tcatch (...) { // if it throws,\n\tBase::~Base(); // destroy base class part and\n\tthrow; // propagate the exception\n}\ntry { dm2.std::string::string(); } // try to construct dm2\ncatch(...) { // if it throws,\n\tdm1.std::string::~string(); // destroy dm1,\n\tBase::~Base(); // destroy base class part, and\n\tthrow; // propagate the exception\n}\ntry { dm3.std::string::string(); } // construct dm3\ncatch(...) { // if it throws,\n\tdm2.std::string::~string(); // destroy dm2,\n\tdm1.std::string::~string(); // destroy dm1, \n\tBase::~Base(); // destroy base class part, and\n\tthrow; // propagate the exception\n}\n}\n```\n\nä½†å¾æœ¬ä¾‹æˆ‘å€‘å¯ä»¥çœ‹åˆ°ï¼Œ`Derived::Derived` æœƒå»å‘¼å« `Base::Base` ï¼Œå¦‚æœè©¦åœ–å° `Derived::Derived` åš `inline`ï¼ŒCompiler æœƒæª¢è¦– `Derived::Derived` æ‰€å‘¼å«çš„ funcitonï¼Œæ±ºå®š `Derived::Derived` æ˜¯å¦æœ‰è¢« `inline` çš„è³‡æ ¼ã€‚\n\nå¦‚æœæ¯ä¸€å€‹åœ¨ `Derived::Derived` ç•¶ä¸­è¢«å‘¼å«çš„éƒ½æ˜¯ inlined function .... è®“æˆ‘å€‘ä¸€ä¸€æª¢è¦–é€™ä»¶äº‹\n\n- å‡è¨­ std::string constructor æ˜¯ inline functionã€‚\n- `Base::Base` è¢«å®£å‘Š inline ï¼Œå®ƒè¦å‘¼å« `bm1`, `bm2` å…©æ¬¡ std::string constructorã€‚\n- `Derived::Derived`: è¢«å®£å‘Š inline ï¼Œå…‰æ˜¯è‡ªå·±çš„ member data (ä¸å« base) è¦å‘¼å« `dm1`, `dm2`, `dm3` ä¸‰æ¬¡ std::string constructorã€‚\n\n`Derived::Derived` ç¸½å…±è¦å‘¼å« 5æ¬¡ std::string constructorï¼Œä¸€æ—¦å®£å‘Šæˆ inlineï¼Œstd::string constructor code æœƒæ’å…¥**5ä»½**åœ¨ `Derived::Derived` !!\n\n\n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E6%80%9D%E7%B6%AD%E8%AA%A4%E5%8D%80-%E7%89%A9%E4%BB%B6%E5%BE%88%E5%B0%8F%E5%B0%B1%E5%8F%AF%E4%BB%A5-Pass-By-value":{"title":"æ€ç¶­èª¤å€-ç‰©ä»¶å¾ˆå°å°±å¯ä»¥ Pass By Value","content":"æœ‰ä¸‰å€‹ä¸»å› : \n1. ä¸¦éã€Œè©²ç‰©ä»¶/containerã€**çœ‹èµ·ä¾†**å¾ˆå°ï¼Œç”¨ Pass by value å°±æ²’æœ‰å•é¡Œã€‚è¨±å¤š  STL Container åœ¨å¯¦ä½œä¸Šçš„å¤§å°ä¹Ÿå°±ä¸€å€‹ Pointer å¤§ä¸€é»ï¼Œä½† Copy Container å»æœ‰ã€Œè¤‡è£½æ¯ä¸€å€‹ Pointer æ‰€æŒ‡å‘çš„ç‰©ä»¶ã€çš„é¢¨éšªåœ¨ã€‚\n2. è¦– Compiler è€Œå®šï¼Œæœ‰äº› Compiler å°å¾… Custom class è·Ÿ built-in class çš„æ…‹åº¦å¤§ä¸ç›¸åŒï¼Œå³ä½¿åº•å±¤è¡¨è¿°(underlying representation) ç›¸åŒï¼Œä»å¯èƒ½ä»¥ä¸åŒçš„æ“ä½œå°å¾…ï¼Œå°è‡´ Copy åœ¨ Custom Class å°±æ˜¯æ¯”è¼ƒæ…¢ã€‚\n3. Type å¯¦ä½œå¯èƒ½ç™¼ç”Ÿæ”¹è®Šï¼Œç¾åœ¨ Copy çš„ä»£åƒ¹ä¸æ˜‚è²´ï¼Œä¸ä»£è¡¨ä»¥å¾Œä¸æœƒã€‚\n\n## Pass By Value çš„ä»£åƒ¹\n[[Pass by value ç•¶ä¸­çš„ Copy è¡Œç‚º]]\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E6%89%93%E7%A0%B4-Constness-%E9%99%90%E5%88%B6":{"title":"æ‰“ç ´ Constness é™åˆ¶","content":"\n### Physical Constness\n\u003e ç·¨è­¯å™¨å …å®ˆçš„è§€é»: Physical Constnessï¼Œåˆç¨± Bitwise constnessã€‚Const member function ä¸å¯ä»¥ä¿®æ”¹ä»»ä½• non-static member dataã€‚\n\nç„¶è€Œï¼Œè«‹çœ‹ä¸‹ä¾‹: `operator[]` ç¢ºå¯¦ä¸æœƒæ›´å‹•åˆ° member dataï¼Œå¯ä»¥é€šé Bitwise Testingï¼Œå»æŠŠã€Œæ”¹å‹•æ¬Šã€æš´éœ²çµ¦ Client ç«¯ï¼Œé€ æˆä¸æ‡‰è©²çš„è³¦å€¼è¡Œç‚ºã€‚\n- [[é¿å…å‚³å› Handles æŒ‡å‘ç‰©ä»¶çš„ Private \u0026 Protected Member Data]]\n\n```cpp\nclass CTextBlock {\n\npublic:\nÂ  Â  // inappropriate (but bitwise const) declaration of operator[]\nÂ  Â  char\u0026 operator[](std::size_t position) const\nÂ  Â  { return pText[position]; }\nÂ  Â  \nprivate:\nÂ  Â  char *pText;\n}\n\nconst CTextBlock ctb(\"World\");\nctb[0]='F'; // Become \"Forld\"\n```\næ­¤ä¾‹æ‡‰è©²å°‡å›å‚³å‹æ…‹ä¿®æ”¹ç‚º `const char\u0026`ã€‚\n\nç·¨è­¯å™¨å …å®ˆçš„ Bitwise constness è§€å¿µï¼Œé€ æˆ Const Function ä½œç”¨éæ–¼ç¶æ‰‹ç¶è…³ï¼Œç”šè‡³åœ¨ Const \u0026 Non-Const function ä¹‹é–“æˆ‘å€‘å¯èƒ½éœ€è¦ Own å…©ä»½ç›¸ä¼¼çš„ Code! \næ¥ä¸‹ä¾†å°‡èªªæ˜ `mutable` èˆ‡ const castï¼Œä»–å€‘å°‡å¹«åŠ©æˆ‘å€‘ç ´é™¤ const çš„é™åˆ¶ï¼Œä½¿ç¨‹å¼è¨­è¨ˆæ›´åŠ éˆæ´»ã€‚\n\n### Logical Constness\n\u003e æ¦‚å¿µä¸Šçš„å¸¸æ•¸æ€§ (Conceptual Constness)\n\næˆ‘å°é€™å€‹è«–é»çš„è§£è®€æ˜¯ï¼ŒæŸäº› data æ˜¯è—æ–¼å°è£åº•ä¸‹ï¼Œæ²’æœ‰æš´éœ²çµ¦ User ä¿®æ”¹çš„ã€‚é€™ç¨® member data åœ¨ logical constness çš„è§€å¿µä¸‹æ˜¯å¯è¢«ä¿®æ”¹çš„ã€‚\næ›¸ä¸­èˆ‰ä¾‹ï¼Œè‹¥æˆ‘å€‘åœ¨ `CTextBlock` ç•¶ä¸­æœ‰ä¸€å€‹å¿«å– (cache) çš„ member data ï¼Œç”¨ä¾†è¨˜ç•¶å‰å­—ä¸²çš„é•·åº¦ã€‚ç•¶å­—ä¸²æ²’æœ‰ä¿®æ”¹é•·åº¦çš„è¡Œç‚º(å¢åŠ /æ¸›å°‘)æ™‚ï¼Œæ­¤å¿«å–éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚ä½†è‹¥æœ‰ä¿®æ”¹è¡Œç‚ºï¼Œå‰‡åœ¨ `length()` è¢« Query æ™‚ï¼Œæˆ‘å€‘æœƒéœ€è¦æ›´æ–°é€™å€‹å¿«å–ã€‚\n\nåœ¨ Bitwise Constness çš„è§€å¿µä¸‹ï¼Œä¿®æ”¹é€™å€‹å¿«å–ç”¨é€”çš„ member data æ˜¯ä¸åˆæ³•çš„ï¼Œä¸”é€™ä¹Ÿæ˜¯ Compiler çš„è§€é»ã€‚\nè§£æ±ºè¾¦æ³•æ˜¯ï¼Œä½¿ç”¨é—œéµå­— `mutable` å®£å‘Šé€™äº›æœ‰è³‡æ ¼åœ¨ const function å…§è¢«æ”¹å‹•çš„ dataï¼Œ`mutable` ä½¿å¾— const function åœ¨å¯¦è¸ä¸Šæœ‰è¨åƒ¹é‚„åƒ¹çš„ç©ºé–“ã€‚\n\n\u003e `mutable` é‡‹æ”¾ non-static member data çš„ bitwise constness ç´„æŸ (é‡‹æ”¾ member data çš„ä¸å¯è®Šå‹•æ€§)ã€‚\n\n\n### Avoiding Duplication in const and Non-const Member Functions\n\u003e ç•¶ const å’Œ non-const member function æœ‰ç­‰åƒ¹çš„å¯¦ä½œæ™‚ï¼Œè®“ non-const å‘¼å« const å¯ä»¥é¿å… duplicated codeã€‚\n\nè‹¥æˆ‘å€‘åœ¨ const \u0026 non-const function ç•¶ä¸­ï¼Œéƒ½æœ‰ç›¸åŒçš„ç¨‹åºè¦åš: é‚Šç•Œæª¢æŸ¥ã€write logã€verty data...ï¼Œå³ä½¿å­æ­¥é©Ÿéƒ½å¯ä»¥æŠ½å‡ºä¾†ï¼Œé‚„æ˜¯é€ æˆã€Œèµ° flow çš„æµç¨‹ã€æœƒé‡è¤‡åœ¨å…©å€‹ function ç•¶ä¸­ã€‚\n\n```cpp\nclass TextBlock \n{\n\tconst char\u0026 operator[](std::size_t position) const;\n\tchar\u0026 operator[](std::size_t position);\n}\n```\n\næˆ‘å€‘è©²åšçš„æ˜¯ï¼ŒæŠŠæ‰€æœ‰çš„æ±è¥¿å¯«åœ¨å…¶ä¸­ä¸€å€‹ï¼Œè€Œå¦ä¸€å€‹å»å‘¼å«å¯«è‘— flow çš„ functionã€‚é€™èªªæ˜äº†æˆ‘å€‘çš„ä¸€å€‹éœ€æ±‚: å»é™¤ Constness!\n\næˆ‘æ‡·ç–‘é€™å€‹æ‰‹æ³•åœ¨ C++11 \u0026 14 å¯èƒ½æœ‰å…¶ä»–è§£ï¼Œé€™è£¡å…ˆè·³éç´°ç©¶ã€‚ç°¡å–®ä¾†èªªå°±æ˜¯é€é `const_cast` å°‡ const function çš„çµæœå†è½‰æˆé constã€‚\n\n```cpp\nclass TextBlock {\npublic:  \n\t// same as before\nÂ  Â  const char\u0026 operator[](std::size_t position) const {\nÂ  Â  Â  Â  return text[position];\nÂ  Â  }\n\t// now just calls const op[]\nÂ  Â  char\u0026 operator[](std::size_t position) \nÂ  Â  {\nÂ  Â  Â  Â  // cast away const on op[]â€™s return type\nÂ  Â  Â  Â  // add const to *this's type, call const version of op[]\nÂ  Â  Â  Â  return const_cast\u003cchar\u0026\u003e(\\\n\tÂ  Â  Â  Â  static_cast\u003cconst TextBlock\u0026\u003e(*this)[position]\n\t\t);\nÂ  Â  }\n};\n```\n ","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E7%82%BA%E4%BB%80%E9%BA%BC%E8%A6%81%E7%94%A8%E7%8D%A8%E7%AB%8B%E5%8F%A5%E5%B0%87%E7%89%A9%E4%BB%B6%E6%94%BE%E5%85%A5-Smart-Pointer":{"title":"ç‚ºä»€éº¼è¦ç”¨ç¨ç«‹å¥å°‡ç‰©ä»¶æ”¾å…¥ Smart Pointer","content":"\u003e ç›¡å¯èƒ½ç¢ºä¿ `new` å‡ºä¾†çš„ç‰©ä»¶ï¼Œå¯ä»¥ç«‹å³è¢«æ”¾å…¥ smart pointer è£¡é¢ï¼Œé¿å…ä»»ä½•é¡å¤–çš„æ­¥é©Ÿã€‚åªè¦æœ‰å¤šé¤˜çš„æ­¥é©Ÿï¼Œå°±å¯èƒ½å› ç‚ºæ„å¤–è€Œä½¿å¾— smart pointer æ²’æœ‰çœŸæ­£æŒæ§åˆ°è³‡æºã€‚\n\nä»¥ç¨ç«‹ä¸€å¥è©±å°‡ newed ç‰©ä»¶åŠ å…¥ smart pointerï¼Œæ ¼å¼å¦‚ä¸‹\n\n```cpp\nstd::shared_ptr\u003cWidget\u003e pw(new Widget);\nprocessWidget(pw, priority());\n```\n\n---\n\nå…¶åŸå› æ˜¯ï¼Œå¦‚æœåƒä»¥ä¸‹å¯«æ³•\n```cpp\nprocessWidget(std::shared_ptr\u003cWidget\u003e pw(new Widget), priority());\n```\n\nç·¨è­¯å™¨è¦åšçš„æœ‰ä¸‰ä»¶äº‹\n1. å‘¼å« `priority`\n2. åŸ·è¡Œ `new` \n3. å‘¼å« smart pointer constructor\n\nè€Œæˆ‘å€‘ç„¡æ³•ç¢ºä¿é€™ä¸‰ä»¶äº‹çš„æœ€çµ‚é †åºç‚ºä½•ï¼Œå¿…ç„¶çš„é—œä¿‚åªæœ‰ ã€Œæœƒå…ˆ `new` ï¼Œå†åŸ·è¡Œ smart pointer constructorã€ã€‚è€Œ `priority` æ˜¯**å¯èƒ½**å®‰æ’æ–¼ new ä¹‹å¾Œçš„ã€‚\n\n1. `new` \n2. `priority` (ç™¼ç”ŸéŒ¯èª¤)\n3. smart pointer constructor\n\nå¦‚æœä¸å¹¸çš„ï¼Œç·¨è­¯å™¨é¸æ“‡é€™ç¨®é †åºï¼Œä¸¦ä¸”åœ¨æŠŠç‰©ä»¶æ”¾å…¥ smart pointer ä¹‹å‰ç™¼ç”Ÿäº†éŒ¯èª¤ï¼Œé€™å¡Šè¨˜æ†¶é«”å°‡æ²’æœ‰ smart pointer å”åŠ©éŠ·æ¯€! \n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E7%82%BA%E5%A4%9A%E5%9E%8B%E7%94%A8%E9%80%94%E7%9A%84%E5%9F%BA%E7%A4%8E%E9%A1%9E%E5%88%A5%E5%AE%A3%E5%91%8A-virtual-%E8%A7%A3%E6%A7%8B%E5%BC%8F":{"title":"ç‚ºå¤šå‹ç”¨é€”çš„åŸºç¤é¡åˆ¥å®£å‘Š virtual è§£æ§‹å¼","content":"\n## å¤šå‹\nå¤šå‹æœ‰å€‹ç‰¹é»: Base Class çš„å­˜åœ¨æ˜¯ç‚ºäº†ã€Œç¶“ç”± Base Class Interface è™•ç½® Drived Class Objectã€ï¼Œä»¥ä¸‹ä¾‹ä¾†èªªï¼Œ `TimeKeeper` æ˜¯ä¸€å€‹ Polymorphic Base Classï¼Œæ‰€ä»¥æŒæœ‰ä¸€å€‹ `TimeKeeper` Pointer å°±å¯ä»¥è™•ç† `WaterClock`, `WristWatch` ç‰©ä»¶ï¼Œé€™å°±æ˜¯ä¸Šé¢é‚£å¥è©±çš„æ„æ€ã€‚\n\n```cpp\nclass TimeKeeper {\npublic:\n\tTimeKeeper();\n\tvirtural ~TimeKeeper();\n};\nclass AtomicClock: public TimeKeeper { ... };\nclass WaterClock: public TimeKeeper { ... };\nclass WristWatch: public TimeKeeper { ... };\n\nTimeKeeper* getTimeKeeper(); \n// Returned pointer may be AtomicClock, WaterClock, WristWatch\n// But they can be owned by base class \"TimeKeeper\"\n// This is polymorphy.\n```\n\nç¹¼æ‰¿èˆ‡å¤šå‹ä¹‹é–“ä¸¦éå……åˆ†å¿…è¦æ¢ä»¶ï¼Œ**éæ‰€æœ‰çš„ Base Class éƒ½æ˜¯ä½œç‚ºå¤šå‹ä½¿ç”¨**ã€‚\nåƒæ˜¯ [[Item47 Use traits classes for information about types]] çš„ `input_iterator_tag`ï¼Œç¹¼æ‰¿æ›´åƒæ˜¯ \"enable æŸç¨®ç‰¹æ€§\" çš„ç”¨é€”ã€‚ \n\n\n## å¤šå‹çš„ Base Class æ²’æœ‰ Virtural Destructor åˆå¦‚ä½•\nå¤šå‹ (polymorphic) çš„æ‰‹æ³•ä½¿æˆ‘å€‘å¯ä»¥æŒæœ‰ base class çš„ Pointer æŒ‡å‘å„ç¨® child class çš„å¯¦ä½œã€‚[[å·¥å» å‡½å¼ (Factory Function)]]  å°±æ˜¯å…¸å‹çš„å¯¦ä½œã€‚\n\n\u003e [!question]\n\u003e ç‚ºäº†éµå®ˆ factory function çš„è¦çŸ©ï¼Œå“ªä¾†çš„è¦çŸ©?\n\nç‚ºäº†éµå®ˆ factory function çš„è¦çŸ©ï¼Œfactory function å›å‚³çš„ç‰©ä»¶å¿…é ˆä½æ–¼ heap (åœ¨ function ä¸­è¢« `new` å‡ºä¾†çš„)ï¼Œè¢« `new` å‡ºä¾†çš„ç‰©ä»¶å¿…é ˆæ‰‹å‹•åˆªé™¤å®ƒã€‚\n```cpp\nTimeKeeper* ptk = getTimeKeeper();\ndelete ptk;\n```\n\nå„˜ç®¡ [[Smart Pointer|æ¢æ¬¾13 ä½¿ç”¨è³‡æºç®¡ç†å™¨]] å’Œ [[è®“ä»‹é¢æ˜“æ–¼è¢«ä½¿ç”¨ï¼Œä¸æ˜“èª¤ç”¨]] èªªæ˜äº†ä¾è³´ client åš `delete` æœ‰æ½›åœ¨çš„å±éšªè·Ÿä¸ç¢ºå®šï¼Œé€™è£¡è¦èªªæ˜çš„æ˜¯æ›´åš´é‡ã€æ›´æ ¹æœ¬æ€§çš„å•é¡Œã€‚\n- æˆ‘å€‘å®£å‘Šçš„æ˜¯ **Base class pointer**ï¼ŒæŒ‡å‘çš„æ˜¯ **child class ç‰©ä»¶**ã€‚\n- Base class æ“æœ‰ä¸€å€‹ non-virtural çš„ destructor\n- C++ æ˜ç™½çš„å‘Šè¨´æˆ‘å€‘ï¼Œç•¶ child ç‰©ä»¶ç¶“ç”±æ“æœ‰ non-virtural destructor çš„ Base class pointer æŒæœ‰ï¼Œè€Œé€™å€‹ pointer è¢«åˆªé™¤æ™‚ï¼Œå±¬æ–¼ **Undefined behavior**\n\næ­¤ Undefined Behavior **é€šå¸¸**æœƒç™¼ç”Ÿçš„æ˜¯ï¼Œå±¬æ–¼ Base class éƒ¨åˆ†æˆåŠŸéŠ·æ¯€ï¼Œåªå±¬æ–¼ Child Class çš„ member data **æ²’æœ‰è¢«éŠ·æ¯€**ï¼Œé€ æˆ**éƒ¨åˆ†éŠ·æ¯€**çš„è©­ç•°ç‹€æ³ã€‚\n\nè¦æ¶ˆé™¤é€™ç¨®ä½œæ³•çš„è§£ç­”å°±æ˜¯ï¼Œçµ¦ Base class çš„ destructor è¨­ç½® `virtural`ã€‚\n\n\u003e ä¸€å€‹ Class è‹¥æœ‰å¸¶æœ‰ `virtural` çš„å‡½å¼ï¼Œå¹¾ä¹å¯ä»¥ç¢ºå®š**è©²æœ‰**æœƒå¸¶æœ‰ `virtural` çš„ destructorã€‚å¦‚æœä¸€å€‹ class ä¸å¸¶æœ‰ `virtural` functionï¼Œé€šå¸¸ä»£è¡¨å®ƒä¸æ„åœ–è¢«ç•¶ä½œ base classã€‚\n\n (å¯¦ä½œéƒ½å¯«å®Œåœ¨ base äº†ï¼Œé‚„ç‰¹æ„æç¹¼æ‰¿ override å¹¹å˜›?)ã€‚ç„¶è€Œï¼Œ`virtural` ä¹Ÿä¸æ‡‰è©²äº‚ç”¨: [[ä¸è¦ç‚ºéå¤šå‹ç”¨é€”çš„ Base Class å®£å‘Š Virtual Function]]ã€‚\n\n## ä¼åœ–ä»¥å¤šå‹è¨­è¨ˆæ¶æ§‹å‰ï¼Œæª¢æŸ¥ Base Class çš„ Destructor æ˜¯å¦ç‚º Virtual\n\nå¦‚æœä¸æ˜¯ virtural destructorï¼Œè«‹æƒ³åˆ¥çš„è¾¦æ³•!! \næ¥çºŒå‰é¢ç« ç¯€ï¼Œ**ä¸¦é** class ä¸­æ²’æœ‰ `virtural` functionï¼Œ**å°±ä¸éœ€è¦** è€ƒæ…® non-virtural destructor çš„å•é¡Œã€‚\n\nä»¥ä¾‹å­ä¾†èªªï¼Œè‹¥æœ‰å€‹ `SpecialString` ç¹¼æ‰¿ `std::string` (non-virtural destructor)ï¼Œåœ¨ `new` ä¸€å€‹ `SpecialString` ä¹‹å¾ŒæŒ‡çµ¦ `std::string` pointer ä¹‹å¾Œå°±æœƒé‡åˆ° Undefined Behavior çš„å•é¡Œ! \n\n```cpp\nSpecialString *pss = new SpecialString(\"Impending Doom\");\nstd::string *ps;\n\nps = pss;\ndelete ps; // undefined behavior\n```\n\nåŒæ¨£éœ€è¦æ³¨æ„çš„å¦‚ `std::vector`, `std::list`, `tr1::unordered_map` ([[Item55 Familiarize yourself with Boost]]) ç­‰ã€‚å¦‚æœä½ æƒ³ç¹¼æ‰¿ä¸€å€‹ STL containerï¼Œä½†å®ƒæ²’æœ‰ virtural destructorï¼Œè«‹åƒè¬ä¸è¦å˜—è©¦ç¹¼æ‰¿å®ƒ! é€™åªæœƒå¸¶ä¾†ç½é›£ã€‚\n\n## æƒ³è¦ä¸€å€‹æŠ½è±¡é¡å—\næƒ³è¦ä¸€å€‹æŠ½è±¡é¡ï¼Œå»è‹¦æ–¼æ²’æœ‰äººé¸(function)ã€Œè¢« virturalã€? è€ƒæ…® Destructor å§: [[Pure Virtual Destructor]]\n\n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E7%82%BA%E7%95%B0%E5%B8%B8%E5%AE%89%E5%85%A8-Exception-safe-%E8%80%8C%E5%8A%AA%E5%8A%9B%E6%98%AF%E5%80%BC%E5%BE%97%E7%9A%84":{"title":"ç‚ºç•°å¸¸å®‰å…¨ (Exception-safe) è€ŒåŠªåŠ›æ˜¯å€¼å¾—çš„","content":"\n## ç•°å¸¸å®‰å…¨çš„æ¢ä»¶\n1. ä¸æ´©æ¼ä»»ä½•è³‡æº\n2. ä¸å…è¨±è³‡æ–™æ•—å£\n\n## Bad Case\n\nå…ˆçœ‹ä¸€å€‹å¾ˆç³Ÿç³•çš„ä¾‹å­: \n```cpp\nclass PrettyMenu {\npublic:\n...\nvoid changeBackground(std::istream\u0026 imgSrc); // change background\n... // image\nprivate:\n Mutex mutex; // mutex for this object \nImage *bgImage; // current background image\nint imageChanges; // # of times image has been changed\n};\n\nvoid PrettyMenu::changeBackground(std::istream\u0026 imgSrc)\n{\nlock(\u0026mutex); // acquire mutex (as in Item 14)\ndelete bgImage; // get rid of old background\n++imageChanges; // update image change count\nbgImage = new Image(imgSrc); // install new background\nunlock(\u0026mutex); // release mutex\n}\n```\n\n1. ä¸æ´©æ¼ä»»ä½•è³‡æº: ç¬¬ 17 è¡Œï¼Œä¸€æ—¦ `new` éç¨‹ä¸­æ‹‹å‡º exceptionï¼Œç¬¬ 18 è¡Œå°±ä¸æœƒåŸ·è¡Œï¼Œmutex æ°¸é ä¸æœƒ unlockã€‚\n\t- å¯é€é smart pointer ç®¡ç† heap-based è³‡æº (created by `new` ) æ´©æ¼å•é¡Œã€‚\n\t- ä½¿ç”¨ [[Mutex]] çš„ `Lock` ç¢ºä¿é›¢é–‹ `changeBackground` ä¹‹å¾Œï¼Œmutex å°±æœƒè‡ªå‹•è§£é–ã€‚\n```cpp\nvoid PrettyMenu::changeBackground(std::istream\u0026 imgSrc)\n{\nLock ml(\u0026mutex); // from Item 14: acquire mutex and ensure its later release\ndelete bgImage;\n++imageChanges;\nbgImage = new Image(imgSrc);\n}\n```\n\n2. ä¸å…è¨±è³‡æ–™æ•—å£: ä¸€æ—¦ `new Image(imgSrc)` çš„éç¨‹æ‹‹å‡º exception\n\t1. `bgImage` æœƒæŒ‡å‘ä¸€å€‹å·²ç¶“åˆªé™¤çš„ç‰©ä»¶\n\t2. image æ²’æœ‰å‰µå»ºæˆåŠŸï¼Œ`imageChanges` è¨˜æ•¸å»å·²ç¶“åŠ ä¸Šå»ã€‚\nåœ¨è§£æ±ºè³‡æ–™æ•—å£å•é¡Œä¹‹å‰ï¼Œå…ˆå°å…¥ exception safe çš„ä¿è­‰\n\n## Exception-Safe Functions\nå¿…é ˆæä¾›ä¸‰è€…ä¹‹ä¸€\n1. åŸºæœ¬æ‰¿è«¾: \n\t- å¦‚æœç•°å¸¸è¢«æ‹‹å‡ºï¼Œç¨‹å¼çš„ä»»ä½•è³‡æ–™éƒ½è™•æ–¼æœ‰æ•ˆçš„ç‹€æ…‹ (åªè¦æœ‰æ•ˆå³å¯ï¼Œä¸ä¿è­‰æ˜¯å“ªä¸€å€‹ status)ã€‚\n\t- ç¨‹å¼å…§ä»»ä½•çš„è³‡æ–™ã€ç‹€æ…‹ä»è™•æ–¼å‰å¾Œä¸€è‡´çš„ç‹€æ…‹ -- ä½†ç¾å¯¦ä¸­æœ‰äº›ä¸å¯èƒ½ï¼Œèˆ‰ä¾‹ä¸Šé¢çš„ç¨‹å¼ï¼Œç•¶ `changeBackground` æ‹‹å‡º exception æ™‚ï¼Œ`PrettyMenu` ç‰©ä»¶è¦ä½¿ç”¨å“ªä¸€ç¨®èƒŒæ™¯? é è¨­èƒŒæ™¯? åŸèƒŒæ™¯? Client ç«¯éœ€è¦ query æ‰çŸ¥é“ã€‚\n2. å¼·çƒˆä¿è­‰: å¦‚æœç•°å¸¸è¢«æ‹‹å‡ºï¼Œå‘¼å«è€…çš„ç¨‹å¼ç‹€æ…‹ä¸æ”¹è®Šã€‚å‘¼å«ç•°å¸¸å®‰å…¨å‡½å¼è€…æœƒçŸ¥é“: å‡½å¼æˆåŠŸå‰‡å®Œå…¨æˆåŠŸï¼Œå¤±æ•—å‰‡ç¨‹å¼å›åˆ°ã€Œå‘¼å«å‡½å¼ã€ä¹‹å‰ã€‚\n\t- é€™ç¨®ä¿è­‰æ¯”åŸºæœ¬æ‰¿è«¾å¥½ï¼ŒClient ä¸ç”¨çŒœæ¸¬ã€Œåˆæ³•ç‹€æ…‹ã€æ˜¯å“ªä¸€ç¨®ç‹€æ…‹ã€‚\n3. ä¸æ‹‹æ“² (nothrow) ä¿è­‰: æ‰¿è«¾æ±ºä¸æ‹‹å‡ºç•°å¸¸ï¼Œå…§å»ºå‹åˆ¥ (int, pointer) èº«ä¸Šçš„æ‰€æœ‰æ“ä½œéƒ½å±¬æ–¼æ­¤é¡ã€‚\n\t- è¦æ³¨æ„ï¼ŒEmpty exception specification ä¸æ˜¯ nothrow å‡½å¼ï¼Œè€Œæ˜¯å¦‚æœæ­¤å‡½å¼æ‹‹å‡ºç•°å¸¸ï¼Œå°‡æ˜¯åš´é‡çš„éŒ¯èª¤ï¼Œæœƒæœ‰æ„æƒ³ä¸åˆ°çš„å‡½å¼ (æœå°‹ C++ æ–‡ä»¶ `set_unexpected`) è¢«å–šèµ·ã€‚\n\t- [[Modern C++ noexcept]]\n```cpp\nint doSomething() thorw(); // empty exception specification\n```\n\n\u003e [!todo]\n\u003e P132\n\n\n\n\n\n\n\n\n\n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E7%95%B6%E6%89%80%E6%9C%89%E7%9A%84%E5%8F%83%E6%95%B8%E9%83%BD%E9%9C%80%E8%A6%81%E5%9E%8B%E5%88%A5%E8%BD%89%E6%8F%9B%E6%8E%A1%E7%94%A8-Non-member-Function":{"title":"ç•¶æ‰€æœ‰çš„åƒæ•¸éƒ½éœ€è¦å‹åˆ¥è½‰æ›ï¼Œæ¡ç”¨ Non-member Function","content":"\nè®“ Class æ”¯æ´éš±å¼è½‰æ›é€šå¸¸ä¸æ˜¯å¥½äº‹ -- ä½†ä¹Ÿæœ‰ä¾‹å¤–ï¼Œæœ€å¸¸è¦‹çš„å°±æ˜¯æ•¸å€¼å‹åˆ¥ã€‚æ›¸ä¸­ä»¥æœ‰ç†æ•¸ `Rational` ç‚ºä¾‹ï¼Œä»–è¨­è¨ˆäº†ä¸€å€‹å…è¨± Int éš±å¼è½‰æ›æˆ Rational çš„ Constructorã€‚\n```cpp\nclass Rational {\nÂ  Â  public:\nÂ  Â  Â  Â  Rational(int numerator=0, int denominator=1); \nÂ  Â  Â  Â  // å…è¨± int-to-Rational çš„éš±å¼è½‰æ›\n\nÂ  Â  Â  Â  int numerator(); // åˆ†å­\nÂ  Â  Â  Â  int denominator(); // åˆ†æ¯\nÂ  Â  Â  Â  const Rational operator*(const Rational rhs) const;\n}\n```\n\nç•¶å¯¦ä½œä¹˜æ³•é‹ç®—æ™‚ï¼Œè‹¥å…©å€‹æ•¸å­—éƒ½æ˜¯æœ‰ç†æ•¸æ²’æœ‰å•é¡Œã€‚èˆ‡ Int ç›¸ä¹˜ï¼ŒInt åœ¨å‰é …å»å‡ºäº†å•é¡Œã€‚\n```cpp\nRational oneEight(1, 8);\nRational oneHalf(1, 2);\n\nRational res = oneEight*oneHalf; // OK\nres = res*oneEight; // OK\n\n# eq3\nres = oneHalf*2; // OK: oneHalf.operator*(2)\n# eq4\nres = 2*oneHalf; // Error: 2.operator*(oneHalf)\n```\nåœ¨ eq4 æœƒéŒ¯èª¤æ˜¯å› ç‚ºï¼Œä¹˜æ³•éš±å«çš„æ˜¯\n1. å°‹æ‰¾ `2` çš„ `operator*`ï¼Œä½†é€™ä¸å­˜åœ¨ (2 æ²’æœ‰å°æ‡‰çš„ class)\n2. Compiler å˜—è©¦å°‹æ‰¾ Namespace ä¸‹æˆ– global scrope ä¸‹ï¼Œ Signature èƒ½ç›¸é…åˆçš„ `operator*`ï¼Œä¹Ÿå°±æ˜¯å˜—è©¦ `res = operator*(2, oneHalf)` èƒ½å¦æˆç«‹ã€‚ä½†é€™ä¹Ÿæ‰¾ä¸åˆ°è€Œ\n3. æ²’æ‹›äº†ï¼Œå¼•ç™¼ errorã€‚\n\nè€Œ eq3 èƒ½æˆåŠŸæ˜¯å› ç‚º Compiler å˜—è©¦å…ˆå‘¼å« `oneHalf.operator*`ï¼Œ2 åœ¨å‚³é€²å»æ™‚æœƒå› ç‚º Rational æ¥å—éš±å¼è½‰æ› (implicit type conversion)ï¼Œè€Œè‹¥ constructor é™å®šè¦ explicit type conversionï¼Œç”šè‡³æœƒé€£ eq3 éƒ½ä¸é! \n\n## åŸå› : åªæœ‰åˆ—æ–¼åƒæ•¸åˆ— (Parameter List) æ‰èƒ½åƒèˆ‡éš±å¼è½‰æ›\n\nç¶œåˆ eq3, eq4 æ‰€è¿°ï¼Œåªæœ‰ç•¶ `int` åˆ—åœ¨ `Rational` ç‰©ä»¶å¾Œé¢ï¼Œä¹Ÿå°±æ˜¯æˆç‚º `Rational::operator*`  çš„ Parameter Listï¼Œæ‰æ˜¯éš±å¼è½‰æ›çš„åˆæ ¼åƒèˆ‡è€…ã€‚\n\n## è§£æ³•:ä»¥ Non-member Function å®šç¾© operator*\nåªè¦å°‡ `operator*` æ‹†é›¢ class `Rational`ï¼Œè®“ operator çš„å…©å€‹åƒæ•¸ `lhs` \u0026 `rhs` éƒ½æœ‰åƒèˆ‡éš±å¼è½‰æ›çš„è³‡æ ¼ï¼Œé‚£éº¼ eq3 å’Œ eq4 å°±éƒ½å¯ä»¥é€šéäº†!\nç”šè‡³ï¼Œé€™å€‹ non-member function ä¹Ÿä¸éœ€è¦å®šç¾©ç‚º friendï¼Œå› ç‚ºå…‰é€é Rational çš„ Public interface å°±å¯æ»¿è¶³ä¸€åˆ‡éœ€æ±‚äº†! \n[[operator overloading]]\n\n```cpp\n\nclass Rational {\n    ...\n};\n\nconst Rational operator*(const Rational\u0026 lhs, const Rational\u0026 rhs) {\n    return Rational(lhs.numerator()*rhs.numerator(), \\\n\t\t\t\t\tlhs.denominator()*rhs.denominator());\n}\n```\n\t\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E7%9B%A1%E5%8F%AF%E8%83%BD%E5%BB%B6%E5%BE%8C%E8%AE%8A%E6%95%B8%E5%AE%9A%E7%BE%A9%E5%BC%8F%E7%9A%84%E5%87%BA%E7%8F%BE%E6%99%82%E9%96%93":{"title":"ç›¡å¯èƒ½å»¶å¾Œè®Šæ•¸å®šç¾©å¼çš„å‡ºç¾æ™‚é–“","content":"\n\u003e ä¸åªå»¶å¾Œè®Šæ•¸çš„å®šç¾©å¼çš„å‡ºç¾ï¼Œç”šè‡³è©²å˜—è©¦å»¶å¾Œé€™ä»½å®šç¾©ç›´åˆ°èƒ½å¤ çµ¦å®ƒåˆå§‹å€¼å¼•æ•¸ç‚ºæ­¢ã€‚\n\n- ç›¡å¯èƒ½å»¶å¾Œåƒæ•¸çš„å®šç¾©ï¼Œç›´åˆ°å®ƒè¢«ä½¿ç”¨çš„å‰ä¸€åˆ»å†å®šç¾©ã€‚\n\t- éæ—©çš„å®šç¾©å®ƒï¼Œæœ‰å¯èƒ½æ ¹æœ¬æ²’ç”¨åˆ°å°±å…ˆ return äº†ï¼Œç„¡è¬‚çš„æ‰¿å—äº†è©²è®Šæ•¸çš„ construct \u0026 destruct æˆæœ¬ã€‚\n- ã€Œå‰ä¸€åˆ»ã€ç”šè‡³æ˜¯æŒ‡: å¾—åˆ°åˆå§‹å€¼äº†å†ä¸€å£æ°£ã€Œå»ºæ§‹ä¸¦æŒ‡å®šåˆå§‹å€¼ã€\n\n```cpp\nstd::string worstCase(const std::string\u0026 password) {\n\tstd::string encrypted;  // éæ—©å®£å‘Š: æ‰¿å—å»ºæ§‹æˆæœ¬\n\tif (password.length() \u003c 8 ) {\n\t\treturn;  // æ²’ç”¨åˆ°å»æ‰¿å—è§£æ§‹æˆæœ¬\n\t}\n\treturn encrypted(password); \n}\n\n// worse: å…ˆå®šç¾©ã€å†çµ¦å€¼\nstd::string encrypted;  // default constructor\nencrypted = password;   // copy assignment.\n\n// better: æœ€å¥½åœ¨å®šç¾©æ™‚å°±çµ¦å€¼ï¼Œåªè¦å‘¼å«ä¸€æ¬¡ constructor\nstd::string encrypted(password); \n\n\n```\n\n## è¿´åœˆæ€éº¼è¾¦\n\næ¡å–æ–¹æ³• A æˆ– B å–æ±ºæ–¼\n1. çŸ¥é“è³¦å€¼æˆæœ¬ \u003c (å»ºæ§‹+è§£æ§‹)\n2. ç¨‹å¼ç¢¼ Performance-sensitive\nå¦å‰‡ï¼Œé€šå¸¸é¸ B æ¯”è¼ƒå¥½ã€‚\n\n- æ–¹æ³•A: å…ˆå®£å‘Šï¼Œåœ¨è¿´åœˆä¸­è³¦å€¼\n\t- 1 ctor + 1 dtor + n å€‹è³¦å€¼\n\t- å„ªé»: ç•¶ Class è³¦å€¼æˆæœ¬ä½æ–¼å»ºæ§‹+è§£æ§‹ï¼ŒAæ–¹æ³•æ¯”è¼ƒé«˜æ•ˆï¼Œç‰¹åˆ¥æ˜¯ n å¾ˆå¤§æ™‚ã€‚\n\t- ç¼ºé»: Variable Name Scope æ¯”è¼ƒå¤§\n\n- æ–¹æ³•B: åœ¨è¿´åœˆä¸­å‰µå»º\n\t- n ctor + n dtor\n\t- é™¤éæ»¿è¶³ä¸Šè¿°çš„å…©å€‹æ¢ä»¶ï¼Œå¦å‰‡é€šå¸¸æ­¤æ–¹æ³•æ¯”è¼ƒå¥½ï¼Œè®Šæ•¸åç¨±å½±éŸ¿çš„ç¯„åœåªåœ¨ For Loop ç•¶ä¸­ã€‚\n\n```cpp\n// Method A\nWidget w;\nfor (int i=0; i \u003c n; ++i) {\n\tw = ...;\n}\n\n// Method B\nfor (int i=0; i \u003c n; ++i) {\n\tWidget w(...);\n}\n```","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E7%A2%BA%E4%BF%9D-Derived-Class-%E5%92%8C-Base-Class-%E4%B9%8B%E9%96%93%E5%BF%85%E7%84%B6%E4%BF%9D%E6%8C%81-Is-a-%E9%97%9C%E4%BF%82":{"title":"ç¢ºä¿ Derived Class å’Œ Base Class ä¹‹é–“å¿…ç„¶ä¿æŒ Is-a é—œä¿‚","content":"\n\"Is A\" é—œä¿‚ï¼Œä»£è¡¨æ˜¯ç”¨æ–¼ Base Class çš„æ¯ä¸€ä»¶äº‹ï¼Œ**å¿…å®š**ä¹Ÿæ˜¯ç”¨åœ¨ Derived Classï¼Œå› ç‚ºæ¯ä¸€å€‹ Derived Class éƒ½ \"Is A\" Base Classã€‚\n\nç‰©ä»¶å°å‘ä¸Šçš„é—œä¿‚å¯èƒ½è·ŸçœŸå¯¦ä¸–ç•Œçš„ç†è§£æœ‰æ‰€ä¸åŒï¼Œ\nä¾‹å¦‚: ä¼éµæ˜¯ä¸€ç¨®é³¥ï¼Œè‹¥ \n- Base Class ç‚º Birdã€Bird è£¡é¢æœ‰å€‹ function `fly`ã€‚\n- Derived Class ç‚º Penguinï¼ŒPenguin ç¹¼æ‰¿ Birdï¼Œä½†ä¼éµä¸æœƒé£›!! \né€™å°±ä¸æ˜¯ä¸€å€‹é©ç•¶çš„ç¹¼æ‰¿ï¼Œ `fly` ä¸¦ä¸èƒ½é©ç”¨åœ¨ Derived Class Penguinã€‚\n\nåˆæ¯”å¦‚ï¼ŒRectangle èˆ‡ Squareï¼ŒSquare ç¹¼æ‰¿ Rectangleï¼ŒSquare æœ‰é•·å¯¬å¿…å®šç›¸ç­‰çš„å¼·çƒˆä¿è­‰ã€‚ä½†åœ¨ä»¥ä¸‹ function ä¸­ï¼Œå‚³å…¥ `Square` ç‰©ä»¶æ™‚ï¼ŒAssert ä¸€å®šæœƒç™¼ç”Ÿ!\n```cpp\nvoid makeBigger(Rectangle\u0026 r) // function to increase râ€™s area\n{\n\tint oldHeight = r.height();\n\tr.setWidth(r.width() + 10); // add 10 to râ€™s width\n\tassert(r.height() == oldHeight); // assert that râ€™s\n}\n```\n\né€™å°±ä»£è¡¨ï¼Œåœ¨ç‰©ä»¶å°å‘çš„è¦–è§’ï¼ŒRectangle çš„æ¯ä¸€ä»¶äº‹ä¸¦ä¸èƒ½å®Œå…¨å¥—ç”¨åœ¨ Square ä¸Šï¼Œé€™å€‹ç¹¼æ‰¿é—œä¿‚æ˜¯æœ‰å•é¡Œçš„ã€‚\n\næŸ¥è¦ºåˆ°ä¸é©åˆä»¥ Is A é—œä¿‚å¡‘æ¨¡ï¼Œå¯ä»¥è€ƒæ…® [[Has A]] è·Ÿ [[Is Implemented in Terms of]]ï¼Œé€™äº›å°‡åœ¨ [[ç¢ºå®š Composition å¡‘é€ çš„æ˜¯ 'Has-A'é—œä¿‚ æˆ– 'æ ¹æ“šæŸç‰©å¯¦ä½œ'çš„é—œä¿‚]]ã€ [[å¯©æ…çš„ä½¿ç”¨ Private ç¹¼æ‰¿]]\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E7%A2%BA%E5%AE%9A-Composition-%E5%A1%91%E9%80%A0%E7%9A%84%E6%98%AF-Has-A%E9%97%9C%E4%BF%82-%E6%88%96-%E6%A0%B9%E6%93%9A%E6%9F%90%E7%89%A9%E5%AF%A6%E4%BD%9C%E7%9A%84%E9%97%9C%E4%BF%82":{"title":"ç¢ºå®š Composition å¡‘é€ çš„æ˜¯ 'Has-A'é—œä¿‚ æˆ– 'æ ¹æ“šæŸç‰©å¯¦ä½œ'çš„é—œä¿‚","content":"\n## Has A é—œä¿‚\n\"Has-A\" æŒ‡çš„æ˜¯æ“æœ‰ä¸€å€‹ æ‡‰ç”¨åŸŸ (application domain) çš„ç‰©ä»¶ï¼Œåƒæ˜¯ \n- Person 'has a' name.\n- Person 'has a' address\n- ...\né€™æ²’ä»€éº¼çˆ­è­°ã€‚\n\n## æ ¹æ“šæŸç‰©å¯¦ä½œå‡ºçš„é—œä¿‚\né€™æ˜¯æŒ‡ å¯¦ä½œåŸŸ (implementation domain)ï¼Œè¡¨ç¤º is-implemented-in-terms-of é—œä¿‚ã€‚åƒæ˜¯\n- buffer\n- mutex\n- search tree\n\né€™éº¼èªªé‚„æ˜¯å¾ˆæŠ½è±¡ï¼Œèˆ‰ä¾‹: \nstd::set æ˜¯ä¸€å€‹ä»¥å¹³è¡¡æ¨¹å¯¦ä½œçš„è³‡æ–™çµæ§‹ï¼Œæ¯ä¸€å€‹å…ƒç´ éœ€è¦è€—è²»ä¸‰å€‹ pointerï¼Œå®ƒé‡è¦–é€Ÿåº¦å¤§æ–¼ç©ºé–“ç”¨é‡ã€‚è‹¥æˆ‘å€‘æœ‰ä¸€å€‹ã€Œç©ºé–“ç”¨é‡æ¯”é€Ÿåº¦æ›´é‡è¦ã€çš„éœ€æ±‚ï¼Œå‰‡ç„¡æ³•ä½¿ç”¨ std::setï¼Œæœ‰éœ€æ±‚è‡ªå·±æ’°å¯« Templateã€‚\nç¾åœ¨ï¼Œæˆ‘å€‘ç¶“æ­·äº†é€™ä¸€ä¸²æ™æ‰: \n\n1. å¯¦ä½œ set æœ‰å¾ˆå¤šç¨®æ–¹æ³•ï¼Œæƒ³æ¡ç”¨ linked list çš„ä½œæ³•ã€‚\n2. æƒ³åˆ°äº† std::list å°±æ˜¯é€™æ¨£çš„è³‡æ–™çµæ§‹ï¼Œæˆ‘è©²ç¹¼æ‰¿å®ƒå—?\n3. ä¸€æ—¦ç¹¼æ‰¿å°±ä»£è¡¨ IS-A é—œä¿‚ï¼Œé©ç”¨æ–¼ std::list çš„æ¯ä»¶äº‹ï¼Œé€™å€‹æ–°çš„ set éƒ½å¯ä»¥æ¥å—\n4. ä½†æ˜¯ std::list å…è¨±é‡è¤‡çš„å…ƒç´ å‡ºç¾åœ¨å®¹å™¨ä¸­ï¼Œset ä¸å…è¨±ï¼Œåœ¨æ’å…¥æ–°å…ƒç´  (insert) æ™‚æœƒåšè™•ç½®ã€‚é€™é•åäº† IS-A è¦å‰‡ã€‚\n5. ä¸é©åˆä½¿ç”¨ç¹¼æ‰¿ã€‚\n\n### ä»¥ä¸€å€‹ Private member data æ“æœ‰ (has a) ä¸€å€‹ std::list container\næ­£ç¢ºçš„åšæ³•æ˜¯ï¼Œè®“ Set ç‰©ä»¶æ˜¯æ ¹æ“šä¸€å€‹ std::list ç‰©ä»¶å¯¦ä½œå‡ºä¾†ã€‚æˆ‘å€‘æœƒä»¥ä¸€å€‹ private member data å» own (has a) ä¸€å€‹ std::list ç‰©ä»¶ï¼Œè—‰æ­¤é”åˆ° reuse linked list çš„éœ€æ±‚ã€‚\n\n```c++\ntemplate\u003cclass T\u003e // the right way to use list for Set\nclass Set {\npublic:\n\tbool member(const T\u0026 item) const;\n\tvoid insert(const T\u0026 item);\n\tvoid remove(const T\u0026 item);\n\tstd::size_t size() const;\nprivate:\n\tstd::list\u003cT\u003e rep; // representation for Set data \n};\n\n// å–ä¸€å€‹å‡½å¼å¯¦ä½œèˆ‰ä¾‹\ntemplate\u003ctypename T\u003e\nstd::size_t Set\u003cT\u003e::size() const\n{\nreturn rep.size();\n}\n...\n```\n\nå°æ–¼æ¯å€‹ member function çš„å¯¦ä½œï¼Œåœ¨ own äº†ä¸€å€‹ `std::list` container ä¹‹å¾Œï¼Œå¯ä»¥å¾ˆè¼•æ˜“çš„å‘¼å« std::list API é”åˆ°æˆ‘å€‘çš„éœ€æ±‚ï¼Œé”åˆ° reuse çš„ç›®çš„ã€‚ç”šè‡³ç›¸ç•¶é©åˆæŠŠé€™äº› function å¯«æˆ inline function! \n\nä¸éåœ¨åš inline ä¹‹å‰ï¼Œå…ˆæª¢è¦– [[äº†è§£ Inline çš„è£¡è£¡å¤–å¤–]]ã€‚\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E7%B5%95%E4%B8%8D%E9%87%8D%E6%96%B0%E5%AE%9A%E7%BE%A9%E7%B9%BC%E6%89%BF%E4%BE%86%E7%9A%84-Non-virtual-Function":{"title":"çµ•ä¸é‡æ–°å®šç¾©ç¹¼æ‰¿ä¾†çš„ Non-virtual Function","content":"![[Item36.png]]\nè©¦æƒ³åœ–ä¸­é€™å€‹ç¹¼æ‰¿é—œä¿‚ï¼Œ`D` ç¹¼æ‰¿ `B`ã€‚è€Œä¸‹é¢é€™æ®µ code åˆ†åˆ¥ä»¥ `B` pointer å’Œ `D` pointer æŒæœ‰ `x` ç‰©ä»¶å¾Œå‘¼å« `mf` æ–¹æ³•ã€‚ä½ æœƒé æœŸï¼Œé€™å…©è€…çš„çµæœæœƒç›¸åŒï¼Œå› ç‚ºä»–å€‘æŒ‡å‘åŒä¸€å€‹ç‰©ä»¶ã€‚\n```cpp\nD x; // x is an object of type D\n\nB *pB = \u0026x; // get pointer to x\npB-\u003emf(); // call mf through pointer\n\nD *pD = \u0026x; // get pointer to x\npD-\u003emf(); // call mf through pointer\n```\n\näº‹å¯¦å»æ˜¯ï¼Œç•¶ `D` ç¹¼æ‰¿ `B` å¾Œå¦‚æœè‡ªè¡Œå¯¦ä½œäº† `mf`ï¼Œåœ¨ä»¥ä¸Šé€™æ®µä¾‹å­ä¸­ï¼Œ`x` æœƒå› ç‚ºè¢« `B*` æˆ– `D*` æŒæœ‰ï¼Œè€Œæœ‰ä¸åŒçš„è¡¨ç¾!! ç•¶ `D` æœ‰å¦‚æ­¤å¯¦ä½œæ™‚ï¼Œç›¸ç•¶æ–¼è—ä½äº† `B::mf`ã€‚åƒè¦‹ [[ç¹¼æ‰¿æ™‚çš„åç¨±é®æ©è¡Œç‚º]]\n```cpp\nclass D: public B {\npublic:\n\tvoid mf();\n...\n};\n```\n\né€ æˆé€™å€‹ç¾è±¡çš„åŸå› ï¼Œåƒè¦‹ [[éœæ…‹ç¶å®š (statically bound) èˆ‡å‹•æ…‹ç¶å®š (dynamically bound)]]\n\n## çµ•å°éµå®ˆ Is-A é—œä¿‚\næœ¬æ¢æ¬¾å…¶å¯¦æ˜¯ [[ç¢ºä¿ Derived Class å’Œ Base Class ä¹‹é–“å¿…ç„¶ä¿æŒ Is-a é—œä¿‚]] çš„å»¶ä¼¸ï¼Œåœ¨\n[[å€åˆ†ä»‹é¢ç¹¼æ‰¿(interface)å’Œå¯¦ä½œç¹¼æ‰¿(implement)]] èªªåˆ° non-virtual ä»£è¡¨ä¸è®Šæ€§ï¼Œç¶œåˆæ­¤äºŒæ¢è¦å®šæª¢è¦–é€™å€‹ç¹¼æ‰¿é—œä¿‚\n1. é©ç”¨ Base Class çš„æ¯ä»¶äº‹éƒ½é©ç”¨æ–¼ Derived Classã€‚\n2. å°æ–¼ Non-virtual functionï¼ŒDerived Class æ‡‰è©²ç¹¼æ‰¿**ä»‹é¢èˆ‡å¯¦ä½œ**\n\nä¸€æ—¦ `D::mf` é‡æ–°å®šç¾©ï¼Œå°±é•åäº† Is-A é—œä¿‚ï¼Œç‰¹ç•°æ€§å‡Œé§•äº†ä¸è®Šæ€§ã€‚","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E7%B7%A8%E8%AD%AF%E4%BE%9D%E5%AD%98-%E5%AE%A3%E5%91%8A%E5%BC%8F%E5%AE%9A%E7%BE%A9%E5%BC%8F%E8%88%87%E5%AF%A6%E4%BD%9C%E7%B4%B0%E7%AF%80":{"title":"ç·¨è­¯ä¾å­˜-å®£å‘Šå¼ã€å®šç¾©å¼èˆ‡å¯¦ä½œç´°ç¯€","content":"\nåˆ†è¾¨ä»¥ä¸‹ä¸‰å€‹åè©\n- å®£å‘Šå¼: åƒ…åƒ…å®£å‘ŠæŸå€‹é¡åˆ¥åç¨±(?)\n- å®šç¾©å¼: å®šç¾©ç‰©ä»¶çš„ member dataã€functionï¼Œé€éå®šç¾©å¼å¯ä»¥å¾—çŸ¥ç‰©ä»¶çš„å¤§å°\n- å¯¦è¸ç´°ç¯€: æ¼”ç®—æ³•ç´°ç¯€ã€‚\n\n```cpp\nclass Date; // å®£å‘Šå¼\nclass Person {\npublic:\n\tPerson(const std::string\u0026 name, const Date\u0026 birthday,\n\tconst Address\u0026 addr);\n\nprivate: // ptr to implementation;\n\tstd::tr1::shared_ptr\u003cPersonImpl\u003e pImpl; // see Item 13 for info on\n};\n```\n\nCompiler åœ¨ç·¨è­¯æœŸé–“éœ€è¦çŸ¥é“ç‰©ä»¶çš„å¤§å°ï¼Œå¦‚ä¸‹ä¾‹ã€‚Compiler å¯ä»¥è¼•é¬†çŸ¥é“ built in type `int`çš„å¤§å°ï¼Œä½† `Person` å‘¢? é€™å¾—å‘å®ƒçš„å®šç¾©å¼è©¢å•è¦é…å¤šå°‘ç©ºé–“ã€‚å› æ­¤ï¼Œæœƒéœ€è¦ `include person.hpp` \n```cpp\n#include \u003cperson.hpp\u003e\n\nint main()\n{\n\tint x; // å®šç¾©ä¸€å€‹ int object\n\tPerson p(params) // å®šç¾©ä¸€å€‹ Person object\n}\n```\n\n### èƒ½ç”¨ object reference/pointer å°±ä¸è¦ own ä¸€å€‹ objectã€‚\nReference \u0026 Pointer éƒ½å¯ä»¥ forward declareï¼Œå®£å‘Šä¸€å€‹ object å»å¿…é ˆ include header file (å–å¾—ç‰©ä»¶çš„å®šç¾©å¼)ã€‚\n\n### ä»¥å®£å‘Šå¼å–ä»£å®šç¾©å¼\n\nå®£å‘Šä¸€å€‹ Functionã€‚è€Œå®ƒè¦ç”¨åˆ°æŸå€‹ Classçš„æ™‚å€™ï¼Œéƒ½ä¸éœ€è¦è©² Class çš„å®šç¾©ã€‚å³ä½¿ Pass by value ä¹Ÿæ˜¯!!! \n\n```cpp\nclass Date; // forward declare\n\nDate today(); // declare a function which return Date object. OK!!\nvoid clearAppointments(Date d); // Pass by value. OK!!\n```\n\n#### å³ä½¿å›å‚³ä¸€å€‹ object ä¹Ÿä¸éœ€è¦å®šç¾©å¼?\nåœ¨ä¸Šä¾‹ä¸­ï¼Œ`today()` å‡½å¼å›å‚³ä¸€å€‹ `Date` ç‰©ä»¶ï¼Œå»ä¸éœ€è¦ include Date çš„ header file? è½èµ·ä¾†å¾ˆå¥‡æ€ªï¼Œä½†åŸç†ä¹Ÿæ¥µç°¡å–®ã€‚\n\nä¸€æ—¦æœ‰äººè©¦åœ–å‘¼å« `today()`ï¼Œ`Date` çš„å®šç¾©å¼éœ€è¦å…ˆè¢«æ›å…‰: å‘¼å«è€…éœ€è¦å…ˆå‰µå»ºä¸€å€‹ Date ç‰©ä»¶ä¾†æ¥ä½ `today()` çš„å›å‚³å€¼! é€™å€‹ include çš„è²¬ä»»äº¤çµ¦å‘¼å«è€…å°±å¥½ã€‚\n\nè©¦æƒ³ï¼Œé€™ä»½ header file ä¸¦éæ¯å€‹äººéƒ½è¦ç”¨åˆ° `today()` å‡½å¼ï¼Œå°å…¥ `Date.hpp` å°±æœƒå¢åŠ ä¾è³´æ€§ã€‚ä½†ï¼Œè¦å‘¼å« `today()` çš„äºº**å¿…é ˆ**å°å…¥ `Date` çš„å®šç¾©å¼ (hpp)ï¼Œæ‰€ä»¥ include å¯ä»¥äº¤çµ¦ Client ç«¯å°±å¥½! \n\n### ç‚ºå®£å‘Šå¼èˆ‡å®šç¾©å¼æä¾›ä¸åŒçš„ header file\nç¨‹å¼åº«çš„æä¾›è€…æ‡‰è©²æŠŠå®£å‘Šå¼å’Œå®šç¾©å¼åˆ†é–‹ï¼Œè®“å®¢æˆ¶ç«¯å°å…¥è¦ç”¨åˆ°çš„ header file å³å¯ã€‚\næ¥çºŒå‰é¢çš„ä¾‹å­ï¼Œç•¶ Client ç«¯æƒ³å®£å‘Š `today` æ™‚ï¼Œæ‡‰è©² `include  \"datefwd.h\"`ï¼Œè€Œéæ‰‹å‹•ä½œ forward declarationï¼Œé€™æ˜¯ Provider å¿…é ˆæä¾›çš„ã€‚è€Œ `datefwd.h` é€™å€‹å‘½åæ–¹å¼ï¼Œå‰‡æ˜¯è·Ÿ STL çš„ [`iosfwd`](https://github.com/gcc-mirror/gcc/blob/master/libstdc%2B%2B-v3/include/std/iosfwd) ç›¸åŒã€‚\n\n```cpp\n#include \"datefwd.h\"\n\nDate today(); // declare a function which return Date object. OK!!\nvoid clearAppointments(Date d); // Pass by value. OK!\n```\n\nSTL æ‰€æä¾›çš„ `iosfwd` åŒ…å«äº†ä¾†è‡ª `sstream, iostream, fstream ...` å¤šå€‹ header file çš„ forward declarationï¼Œä¹Ÿå°±æ˜¯èªªï¼Œä»–å€‘çš„å®šç¾©å¼å¯¦éš›æ•£åœ¨å¤šå€‹ header file ï¼Œä½†  forward declaration é›†ä¸­æ”¾åœ¨åŒä¸€å€‹ header fileã€‚\n\n\n\n\n\n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E7%B9%BC%E6%89%BF%E6%99%82%E7%9A%84%E5%90%8D%E7%A8%B1%E9%81%AE%E6%8E%A9%E8%A1%8C%E7%82%BA":{"title":"ç¹¼æ‰¿æ™‚çš„åç¨±é®æ©è¡Œç‚º","content":"\nç•¶ Derived å’Œ Base Class æœ‰ç›¸åŒåç¨±çš„ function æ™‚ï¼ŒDerived çš„ function æœƒç›´æ¥**é®ä½** Base Class çš„åŒåç¨± function (è®“ Compiler ä¸æœƒå»æ‰¾ Base Class çš„è©²åŒå function)ï¼Œå³ä½¿ signature ä¸åŒã€ä¸æ˜¯åš overrideï¼Œä¹Ÿæœƒæ‰¾ä¸åˆ°è©² Base Class Functionã€‚\n\n![[Itm33.png]]\nå¦‚åœ–ä¸­æ’°å¯«ï¼Œå…¶çµæœ: \n```cpp\nDerived d;\nint x;\n...\nd.mf1(); // fine, calls Derived::mf1\nd.mf1(x); // error! Derived::mf1 hides Base::mf1\nd.mf2(); // fine, calls Base::mf2\nd.mf3(); // fine, calls Derived::mf3\nd.mf3(x); // error! Derived::mf3 hides Base::mf3\n```\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E8%97%89%E7%94%B1-Function-Pointer-%E5%92%8C-tr1-function-%E6%89%8B%E6%B3%95%E5%AF%A6%E7%8F%BE-Strategy-Pattern":{"title":"è—‰ç”± Function Pointer æ‰‹æ³•å¯¦ç¾ Strategy Pattern","content":"\nNVI æ–¹æ³•ç‚º Public Virtual Function æä¾›äº†æ›¿ä»£æ–¹æ¡ˆï¼Œä½†ä»æ²’æœ‰è„«é›¢ virtualã€‚\næ–°çš„åšæ³•æ˜¯ï¼ŒæŠŠ Function ç”¨ Function Pointer å‚³å…¥ï¼Œé€™å¯¦éš›ä¸Šæ˜¯  [[Classic Strategy Pattern|Strategy Pattern]] çš„ä¸€ç¨®å¯¦ä½œã€‚\n\n```cpp\nclass GameCharacter; // forward declaration\n// function for the default health calculation algorithm\nint defaultHealthCalc(const GameCharacter\u0026 gc);\nclass GameCharacter {\npublic:\n\ttypedef int (*HealthCalcFunc)(const GameCharacter\u0026);\n\n\texplicit GameCharacter(HealthCalcFunc hcf = defaultHealthCalc)\n\t: healthFunc(hcf) {}\n\t\n\tint healthValue() const { return healthFunc(*this); }\n\nprivate:\n\tHealthCalcFunc healthFunc;\n}\n```\n\næ›´é€²ä¸€æ­¥çš„ï¼Œä½¿ç”¨ `tr1::function`ï¼Œä½¿å¾—ä»»ä½•åƒæ˜¯ function ä¸€èˆ¬ callable ä¸” signature ç¬¦åˆçš„ callable ç‰©ä»¶ (`std::tr1::function\u003cint (const GameCharacter\u0026)\u003e`)ï¼Œéƒ½å¯ä»¥æ˜¯è¢«å‚³å…¥çš„ç‰©ä»¶ã€‚\n[[C++11 std function]]\n\n```cpp\nclass GameCharacter; // as before\nint defaultHealthCalc(const GameCharacter\u0026 gc); // as before\nclass GameCharacter {\npublic:\n// HealthCalcFunc is any callable entity that can be called with\n// anything compatible with a GameCharacter and that returns anything\n// compatible with an int; see below for details\ntypedef std::tr1::function\u003cint (const GameCharacter\u0026)\u003e HealthCalcFunc;\nexplicit GameCharacter(HealthCalcFunc hcf = defaultHealthCalc)\n: healthFunc(hcf )\n{}\nint healthValue() const \n{ return healthFunc(*this); }\n...\nprivate:\nHealthCalcFunc healthFunc;\n}\n```\n\n## å„ªé»\n- å¯ä»¥åœ¨ RT æœŸé–“æ±ºå®šå‚³å…¥çš„å‡½å¼\n\n## ç¼ºé»\nç•¶æˆ‘å€‘æƒ³è¨ˆç®—çš„å…§å®¹éƒ½å¯ä»¥ç”¨ Public Interface å–å¾—ç›¸é—œè³‡è¨Šï¼Œæ²’æœ‰å•é¡Œã€‚ä½†å¦‚æœéœ€è¦å–å¾— non-public data (å…§éƒ¨è³‡è¨Š)ï¼Œå°±æœ‰ç–‘æ…®äº†ã€‚\n- è®“ class çš„æŸå€‹**å…§éƒ¨**æ©Ÿèƒ½ä¾è³´æ–¼å¤–éƒ¨çš„æŸå€‹ [[non-member \u0026\u0026 non-friend function]] æ˜¯å€‹çˆ­è­°ã€‚\n- è§£æ±ºä½œæ³•æ˜¯å¼±åŒ– class çš„å°è£ï¼Œå®£å‘Šè©² function ç‚º friend function å°±æ˜¯ä¸€ç¨®å¼±åŒ–çš„ä½œæ³•ï¼Œæˆ–æ˜¯æä¾›ä¸€å€‹ public getterã€‚\n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E8%97%89%E7%94%B1-Non-Virtual-Interface-%E6%89%8B%E6%B3%95%E5%AF%A6%E7%8F%BE-Template-Method-Pattern":{"title":"è—‰ç”± Non-Virtual Interface æ‰‹æ³•å¯¦ç¾ Template Method Pattern","content":"\u003e The Template Method Pattern via the Non-Virtual Interface Idiom\n\né€™å€‹æ–¹æ³•æ˜¯ Design Pattern [[Template Method]] çš„è¡¨ç¾å½¢å¼ï¼Œè€Œè·Ÿ C++ Template ç„¡é—œã€‚\n\n## Non-Virtual Interface (NVI)\nNVI ä¸»å¼µ Virtual æ‡‰ç‚º Privateï¼Œå¦‚æœæœ‰æš´éœ²çš„éœ€æ±‚ï¼Œå‰‡æ‡‰è©²ä»¥ä¸€å€‹ Public non-virtual function (as a *wrapper*) å‘¼å« Private virtual functionã€‚\n\n## wrapper function\nWrapper çš„å„ªé»å¯ä»¥æŠŠä¸€äº›å‘¼å« virtual å‰å¾Œéœ€è¦è™•ç†çš„äº‹æƒ…è—èµ·ä¾†ï¼Œç¢ºä¿é€™äº›äº‹æƒ…å¿…å®šæœƒåŸ·è¡Œ: \nä¾‹å¦‚\n- åœ¨å‘¼å« virtual function å‰: ç‚º Mutex ä¸Šé–, Log entry, é©—è­‰äº‹å‰æ¢ä»¶...\n- åœ¨å‘¼å« virtual function ä¹‹å¾Œ: ç‚º Mutex è§£é–, é©—è­‰äº‹å¾Œæ¢ä»¶...\n\nå¦‚æœæŠŠ Virtual è¨­æˆ Public (ç›¸ç•¶å…è¨±å®¢æˆ¶ç«¯è‡ªè¡Œé‡æ–°å®šç¾©å®ƒ)ï¼Œé€™äº›äº‹ä»¶å°‡ç„¡è™•ç½®æ”¾ï¼Œä¹Ÿç„¡æ³•ç¢ºä¿äº‹å‰äº‹å¾Œæ¢ä»¶çµ•å°æœƒè¢«åŸ·è¡Œ (Client ç«¯å¯¦ä½œæ™‚å¯èƒ½æœƒå¿½ç•¥)ã€‚\n\n## ä¿ç•™ä½•æ™‚å‘¼å« virtual function çš„æ¬Šåˆ©\nNVI æ‰‹æ³•æŠŠã€Œå¦‚ä½•å¯¦ç¾æ©Ÿèƒ½ (é‡æ–°å®šç¾©å‡½å¼)ã€çš„æ¬Šåˆ©äº¤çµ¦äº†å®¢æˆ¶ç«¯ï¼Œã€Œä½•æ™‚å‘¼å«å‡½å¼ (when to call non-virtual function)ã€çš„æ¬Šåˆ©ç•™åœ¨æ‰‹ä¸Šã€‚\n\n## NVI å…è¨± Protected\næŸäº›æ™‚å€™ï¼ŒDerived Class æœƒéœ€è¦å‘¼å« Base Class çš„ functionï¼Œç•¶é€™å€‹ function æ­£æ˜¯å‰é¢æ‰€èªª NVI çš„ä¸»è§’ -- æ˜¯ä¸€å€‹ virtual function çš„æ™‚å€™ï¼Œå®ƒå¿…é ˆå¾—å®£å‘Šæˆ protectedï¼Œé€™åœ¨ NVI ä¸­ä¹Ÿæ˜¯è¢«å…è¨±çš„ã€‚\n\næŸäº›æ™‚å€™ï¼Œvirtual function å¿…é ˆæ˜¯ Public (ex. å¤šå‹ç”¨é€”çš„ Base Class è§£æ§‹å¼, [[ä¸è¦ç‚ºéå¤šå‹ç”¨é€”çš„ Base Class å®£å‘Š Virtual Function]]) ä»–å€‘å‰‡ä¸æ˜¯ç”¨æ–¼ NVI æ‰‹æ³•ã€‚\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E8%A7%A3%E6%A7%8B%E5%BC%8F%E8%88%87%E7%95%B0%E5%B8%B8":{"title":"è§£æ§‹å¼èˆ‡ç•°å¸¸","content":"\u003e åœ¨ C++11 ä¸­ï¼ŒDestructor and `delete` è¢«è‡ªå‹•å®£å‘Šç‚º  `noexcept`ã€‚\n\n\n\n[[Modern C++ noexcept]]\n\n## æƒ…å¢ƒ: ç•¶Destructor å¿…é ˆåŸ·è¡ŒæŸé …æœƒä¸ŸException çš„ç¨‹åº\nèˆ‰ä¾‹ï¼Œæˆ‘å€‘æœ‰ä¸€å€‹è³‡æ–™åº«é€£ç·šçš„ class `DBConnection`ï¼Œé€™é¡è³‡æºç®¡ç†çš„ Class åœ¨ [[Chapter3]] ä¸­æœƒæœ‰æ›´è©³ç´°çš„æ¢è¨ã€‚\n```cpp\nclass DBConnection {\npublic:\n...\nstatic DBConnection create();   // function to return DBConnection objects; params omitted for simplicity\nvoid close(); \n// close connection; throw an exception if closing fails\n};  \n```\n\n\n### ç›´æ¥ Catch Exception\nç‚ºäº†é˜²æ­¢ client æ²’æœ‰ close connection å°±ç›´æ¥åˆªé™¤ç‰©ä»¶ï¼Œæˆ‘å€‘éœ€è¦åœ¨ destructor å‘¼å« `close`ï¼Œç„¶è€Œé€™å€‹ function æœ‰ä¸Ÿå‡º exception çš„é¢¨éšªã€‚\næœ‰å…©ç¨®åšæ³•å¯ä»¥ç°¡å–®çš„è§£æ±º\n1. ä½¿ç”¨ `std::abort` æå‰ä¸­æ­¢ç¨‹å¼ï¼Œå®ƒå¯ä»¥æ¶åœ¨ Exception å‚³å‡ºå»ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯ Undefined Behavior å‚³å‡ºå»ä¹‹å‰ï¼Œå¼·è¿«ç¨‹å¼çµæŸã€‚\n\t```cpp\nDBConn::~DBConn() {\n\ttry { db.close(); }\n\tcatch (...) {\n\t\t// make log entry that the call to close failed;\n\t\tstd::abort();\n\t}\n}\n\t```\n2. åä¸‹ç•°å¸¸ã€‚ä¸€èˆ¬ä¾†èªªï¼Œé€™æ˜¯å€‹å£ä¸»æ„ï¼Œå®ƒæŠ‘åˆ¶äº†éŒ¯èª¤è¢«çŸ¥é“çš„æ©Ÿæœƒã€‚\n\t```cpp\nDBConn::~DBConn() {\n\ttry { db.close(); }\n\tcatch (...) {\n\t\t// make log entry that the call to close failed;\n\t}\n}\n\t```\n\nå“ªç¨®æ–¹æ³•å¥½ï¼Œç«¯çœ‹æƒ…å¢ƒå¦‚ä½•å–æ¨ã€‚ä¸éæ­¤å…©è€…åšæ³•éƒ½ä¸æ˜¯æ ¹æœ¬è§£æ±ºä¹‹é“ã€‚\n\n## è§£æ±ºæ–¹æ³•: è®“ Cilent è‡ªå·±æ¥ä½ Exception\næ›´å¥½çš„åšæ³•æ˜¯é‡æ–°è¨­è¨ˆ Interfaceï¼Œè®“ client ç«¯è‡ªå·± `close`ï¼Œå° Exception åšåæ‡‰ã€‚ä¸¦åœ¨ destructor ç•¶ä¸­å†è¨­ä¸€é“ç¢ºä¿é—œé–‰çš„é›™é‡ä¿éšœ -- å¦‚æœå®¢æˆ¶é‚„æ˜¯å¿˜äº†é—œï¼Œå†è®“ destructor å‹•æ‰‹å§! \n\n\n## è³ªç–‘\n- è½‰ç§»è²¬ä»»åˆ° Client èº«ä¸Šçš„å«Œç–‘? ä¸¦æ²’æœ‰ï¼Œå› ç‚º destructor ä¸­ä¹Ÿæ˜¯æœ‰ä¸€é“ Checkã€‚\n- é•å[[è®“ä»‹é¢æ˜“æ–¼è¢«ä½¿ç”¨ï¼Œä¸æ˜“èª¤ç”¨]]? \n\nå¦‚æœæŸå€‹æ“ä½œæœ‰ raise exception çš„é¢¨éšªï¼Œåˆå¿…é ˆè™•ç†è©² exceptionï¼Œé€™å€‹ç•°å¸¸å¿…é ˆä¾†è‡ª destructor ä¹‹å¤–çš„æŸå€‹ function (æ­¤ä¾‹: ä¾†è‡ª `close`)ï¼Œè€Œé€™æœ‰è®“ client ç«¯æ¥æ‰‹çš„å¿…è¦æ€§ï¼Œå°‡å®ƒè½‰ç§»å‡º destructor èƒ½é¿å… undefined behavior çš„ç™¼ç”Ÿæœ‰æ›´å¤§çš„åƒ¹å€¼ã€‚\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E8%A8%AD%E8%A8%88%E6%96%B0-Class-%E7%9A%84%E6%BA%96%E5%89%87":{"title":"è¨­è¨ˆæ–° Class çš„æº–å‰‡","content":"åœ¨è¨­è¨ˆ class ä¹‹å‰ï¼Œæ€è€ƒä»¥ä¸‹å•é¡Œ\n- è¨˜æ†¶é«”å¦‚ä½•ç”¢ç”Ÿè·ŸéŠ·æ¯€? (åƒè¦‹ç¬¬å…«ç« )\n- ç‰©ä»¶åˆå§‹åŒ–èˆ‡è³¦å€¼çš„å·®åˆ¥? Constructor \u0026 Assignment\n\t-  [[Effective C++ Outline#æ¢æ¬¾4 ç¢ºå®šç‰©ä»¶åœ¨ä½¿ç”¨å‰å·²ç¶“åˆå§‹åŒ– |æ¢æ¬¾4 ç¢ºå®šç‰©ä»¶åœ¨ä½¿ç”¨å‰å·²ç¶“åˆå§‹åŒ–]]\n- Pass by value å°å®ƒä»£è¡¨ç”šéº¼? Copy constructor\n- Member data çš„åˆæ³•å€¼?\n\t- åœ¨ä¸ç®¡æ˜¯ constructor, assignment, setter function åœ¨è¨­ data æ™‚ï¼Œéƒ½éœ€è¦é€²è¡ŒéŒ¯èª¤æª¢æŸ¥ã€‚\n\t- é€™æ„å‘³è‘—ä½ éœ€è¦è€ƒé‡å‡½å¼æ‹‹å‡ºçš„æ„å¤–ã€‚\n- å®ƒéœ€è¦é…åˆæŸå€‹ç¹¼æ‰¿åœ–ç³»(inheritance graph) å—?\n\t- æœƒå—åˆ°çˆ¶è¼©å€‘çš„ç´„æŸï¼Œç‰¹åˆ¥æ˜¯å‡½å¼æ˜¯ virtural or non-virtual [[å€åˆ†ä»‹é¢ç¹¼æ‰¿(interface)å’Œå¯¦ä½œç¹¼æ‰¿(implement)]]ã€[[Item36 Never redefine an inherited non-virtual function]]ã€‚\n\t- å¦‚æœå…è¨±å…¶ä»–é¡åˆ¥ç¹¼æ‰¿æ­¤ classï¼Œè«‹å°‡å¿…è¦çš„å‡½å¼å®£å‘Šç‚º virtualï¼Œç‰¹åˆ¥æ˜¯ destructorã€‚\n\t\t- [[Effective C++ Outline#æ¢æ¬¾7 ç‚ºå¤šå‹ç”¨é€”çš„åŸºç¤é¡åˆ¥å®£å‘Š virtual è§£æ§‹å¼|æ¢æ¬¾7 ç‚ºå¤šå‹ç”¨é€”çš„åŸºç¤é¡åˆ¥å®£å‘Š virtual è§£æ§‹å¼]]\n- éœ€è¦è€ƒé‡è½‰æ›å—? éš±æ€§è½‰æ›èˆ‡é¡¯æ€§è½‰æ›?\n- ç”šéº¼é‹ç®—å­èˆ‡å‡½å¼å°æ­¤æ–°é¡åˆ¥å¼åˆç†çš„?\n\t- [[Non-member \u0026\u0026 Non-friend Function çš„å°è£åº¦å„ªæ–¼ Member Function]]\n\t- [[ç•¶æ‰€æœ‰çš„åƒæ•¸éƒ½éœ€è¦å‹åˆ¥è½‰æ›ï¼Œæ¡ç”¨ Non-member Function]]\n\t- [[ç›¡å¯èƒ½å»¶å¾Œè®Šæ•¸å®šç¾©å¼çš„å‡ºç¾æ™‚é–“]]\n- ä»€éº¼æ¨™æº–å®£å‘Šå¼æ˜¯éœ€è¦é§å›çš„? è«‹ç”¨ `delete` æ˜ç¢ºåˆªé™¤å®ƒã€‚\n- å“ªäº› member éœ€è¦æš´éœ²å‡ºä¾†? (public/private/protected)\n- ä»€éº¼æ˜¯å®ƒçš„æœªå®£å‘Šä»‹é¢(undeclared interface)?\n\t- é€™æˆ‘çœ‹ä¸æ‡‚ã€‚\n- é€™å€‹æ–°çš„ class æœ‰å¤šä¸€èˆ¬åŒ–? è‹¥è¦å®šç¾©çš„æ˜¯ type family (ä¸€å † type) ï¼Œæ˜¯å¦è©²æ¡ç”¨ class template?\n- ","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E8%AE%93%E4%BB%8B%E9%9D%A2%E6%98%93%E6%96%BC%E8%A2%AB%E4%BD%BF%E7%94%A8%E4%B8%8D%E6%98%93%E8%AA%A4%E7%94%A8":{"title":"è®“ä»‹é¢æ˜“æ–¼è¢«ä½¿ç”¨ï¼Œä¸æ˜“èª¤ç”¨","content":"\n## ç”¨ `struct` åŒ…è¦†ç°¡å–®çš„è³‡æ–™çµæ§‹å¯ä»¥å¸¶ä¾†å¯è®€æ€§\n\nè€ƒé‡ä¸‹é¢çš„ä¾‹å­: \n\n```cpp\nclass Date {\npublic:\n\tDate(int month, int day, int year);\n}\nDate(3, 31, 1999); // æ­£ç¢º\nDate(30, 3, 1999); // å¯èƒ½æœƒèª¤æ‰“\nDate(3, 40, 1999); // å¯èƒ½æœ‰ç„¡æ•ˆå€¼\n```\n\nå¦‚æœæˆ‘å€‘æ”¹ä»¥ `struct`å¦‚ä¸‹ï¼Œä½ å¹¾ä¹ä¸æœƒçŠ¯ä¸‹å¯«éŒ¯æ ¼çš„éŒ¯ï¼ŒCompiler æœƒè‡ªå‹•æé†’! ç”šè‡³å¯ä»¥åœ¨ Struct å…§ç°¡å–®çš„åšæ•¸å€¼æª¢é©—ã€‚\n\n```cpp\nstruct Month;\nstruct Day;\nstruct Year;\n\nclass Date {\npublic:\n\tDate(Month m, Day d, Year y);\n}\n\nDate(Month(3), Day(31), Year(1999)); // æ­£ç¢º\nDate(Day(3), Month(31), Year(1999)); // å‹åˆ¥éŒ¯èª¤\n```\n\n\n## ä»¥å‡½å¼å–ä»£ç‰©ä»¶\n\nåƒæ˜¯æœˆä»½é€™æ¨£æœ‰ä¸€å®šçš„ç¯„åœï¼Œç”šè‡³å¯ä»¥ç›´æ¥åˆ—èˆ‰ 12 æœˆä»½ï¼ŒClient ç«¯é€éä»‹é¢å¾—åˆ°æœˆä»½ç‰©ä»¶ï¼Œå¹¾ä¹æ²’æœ‰éŒ¯èª¤æ•¸å€¼çš„å•é¡Œ!!\n\né¡ä¼¼ç”¨æ³•å¯ä»¥åƒè¦‹ [[Static Object]] ç•¶ä¸­çš„ non-local static object åˆå§‹åŒ–å•é¡Œã€‚\n\n```cpp\nclass Month {\npublic:\n\tstatic Month Jan() {return Month(1)};\n\tstatic Month Feb() {return Month(2)};\n\t...\nprivate:\n\texplicit Month(int m);\n}\nDate(Month::Jan(), Day(30), Year(1999));\n```\n\n## å’Œå…§å»ºå‹åˆ¥çš„è¡Œç‚ºä¸€è‡´ï¼Œä¸è¦ææ€ª\n\nç•¶æœ‰å’Œ STL lib ç›¸ä¼¼çš„å±¬æ€§æ™‚ï¼Œç›¡é‡ç”¨ä¸€æ¨£çš„å½¢å¼ã€‚\n\n## ä»»ä½•ä»‹é¢å¦‚æœæœ‰è¦æ±‚å®¢æˆ¶ã€Œè¨˜å¾—åšã€æŸä»¶äº‹ï¼Œå°±æœ‰ã€Œä¸æ­£ç¢ºä½¿ç”¨ã€çš„å‚¾å‘ï¼Œå› ç‚ºå®¢æˆ¶å¯èƒ½æœƒå¿˜è¨˜ã€‚\n\nä¾‹å¦‚: æ¯”èµ·å›å‚³ä¸€å€‹ raw pointer ä¸¦æœŸè¨±å®¢æˆ¶ç«¯è¨˜å¾—åˆªé™¤è¨˜æ†¶é«”ï¼Œå›å‚³ smart pointer èƒ½è§£æ±ºå•é¡Œã€‚\n\né˜²ç¯„å®¢æˆ¶ç«¯å¯èƒ½ç™¼ç”Ÿçš„éŒ¯èª¤æ˜¯æœ‰ä»£åƒ¹çš„ï¼Œåƒæ˜¯ Shared pointerï¼Œå®ƒæ¯”åŸæœ¬çš„é«”ç©æ›´å¤§ã€ä¸”æ›´æ…¢ã€‚ä½†åœ¨è¨±å¤šç¨‹å¼ä¸­é€™äº›æˆæœ¬çš„å½±éŸ¿ä¸¦ä¸é¡¯è‘—ï¼Œé˜²ç¯„å®¢æˆ¶ç«¯æ„šè ¢è¡Œç‚ºå¸¶ä¾†çš„ç›Šè™•å»æ¥µç‚ºé¡¯è‘—ã€‚\n\n\n## Return Const Value\né¿å…å›å‚³å€¼è¢«ä¿®æ”¹ï¼Œå¦‚æ­¤ä¾‹ä¸­ï¼Œé¡åˆ¥ `Rational` (æœ‰ç†æ•¸) çš„ä¹˜ç©ç¬¦è™Ÿç¦æ­¢å…¶å›å‚³å€¼è¢«è³¦äºˆå€¼ (assignment)ã€‚\n\n```cpp\nclass Rational { ... }; \nconst Rational operator*(const Rational\u0026 lhs, const Rational\u0026 rhs);\n```\n\nè½èµ·ä¾†æœ‰é»æ€ªï¼Œä½†å®ƒå¯ä»¥é é˜² client ç«¯å¯«å‡ºé€™ç¨® code: \n```cpp\nRational a, b, c;\n(a*b) = c;\n\nif (a*b = c) { ... };\n```\n\næˆ‘æƒ³ï¼Œä½œè€…çš„èˆ‰é€™å€‹ä¾‹å­æœ‰ Defensive programming çš„æ¦‚å¿µåœ¨ã€‚å¦‚è‹¥é€™äº›è®Šæ•¸æ˜¯å…§å»ºå‹åˆ¥ (ex. int)ï¼Œé€™ç¨®å¯«æ³•ç›´æ¥å°±æœƒè¢«æ“‹æ‰ã€‚ä½†åƒæ­¤ä¾‹ï¼Œå®ƒå€‘æ˜¯ User-defined çš„å‹åˆ¥ï¼Œå°æ–¼è¨­è¨ˆ class çš„ designer è€Œè¨€ï¼Œæœ€å¥½å°‡é€™ç¨®ç„¡æ„ç¾©çš„è¡Œç‚ºæ“‹æ‰ã€‚","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E9%81%8B%E7%94%A8%E6%88%90%E5%93%A1%E5%87%BD%E5%BC%8F%E6%A8%A1%E6%9D%BF%E6%8E%A5%E5%8F%97%E6%89%80%E6%9C%89%E7%9B%B8%E5%AE%B9%E7%9A%84%E5%9E%8B%E5%88%A5":{"title":"é‹ç”¨æˆå“¡å‡½å¼æ¨¡æ¿ï¼Œæ¥å—æ‰€æœ‰ç›¸å®¹çš„å‹åˆ¥","content":"\nåƒè€ƒä»¥ä¸‹ç¹¼æ‰¿é«”ç³»çš„ç¯„ä¾‹: åœ¨åŸç”Ÿçš„ Pointer ç³»çµ±ç•¶ä¸­ï¼Œåœ¨åˆç†çš„ç¹¼æ‰¿é—œä¿‚ä¹‹ä¸‹ï¼Œé€™äº›ä¸åŒé¡åˆ¥åœ¨ Raw Pointer å¾ˆå®¹æ˜“äº’ç›¸è½‰æ›ã€‚\n\n```cpp\nclass Top { ... };\nclass Middle: public Top { ... };\nclass Bottom: public Middle { ... };\nTop *pt1 = new Middle; // convert Middle* â‡’ Top*\nTop *pt2 = new Bottom; // convert Bottom* â‡’ Top*\nconst Top *pct2 = pt1; // convert Top* â‡’ const Top*\n```\n\nç„¶è€Œæ€è€ƒä»¥ä¸‹ç¯„ä¾‹: æˆ‘å€‘ä½¿ç”¨ template å®Œæˆä¸€å€‹ `SmartPtr`ï¼Œå®ƒèƒ½åƒ RAW pointer ä¸€èˆ¬äº’ç›¸è½‰æ›å—? æ²’è¾¦æ³•ï¼Œä»¥ä¸‹é€™æ®µç¨‹å¼ä¸æœƒé€šéç·¨è­¯ã€‚\n\n```cpp\ntemplate\u003ctypename T\u003e\nclass SmartPtr {\npublic: // smart pointers are typically\nexplicit SmartPtr(T *realPtr); // initialized by built-in pointers \n...\n};\n// convert SmartPtr\u003cMiddle\u003e â‡’ SmartPtr\u003cTop\u003e\nSmartPtr\u003cTop\u003e pt1 = SmartPtr\u003cMiddle\u003e(new Middle); \n// convert SmartPtr\u003cBottom\u003e â‡’ SmartPtr\u003cTop\u003e\nSmartPtr\u003cTop\u003e pt2 = SmartPtr\u003cBottom\u003e(new Bottom);\n// convert SmartPtr\u003cTop\u003e â‡’ SmartPtr\u003cconst Top\u003e\nSmartPtr\u003cconst Top\u003e pct2 = pt1; \n```\n\nå³ä½¿ Middle ç¹¼æ‰¿è‡ª Topï¼Œé€é**æ¨¡æ¿å…·ç¾åŒ–çš„é¡åˆ¥** `SmartPtr\u003cTop\u003e` è·Ÿ `SmartPtr\u003cMiddle\u003e` ä¹‹é–“ï¼Œå»**æ²’æœ‰ä»»ä½•é—œä¿‚**.... ä»–å€‘çš„é—œä¿‚å¤§æ¦‚è·Ÿ `vector\u003cdouble\u003e` å’Œ `Widget` é€™èˆ¬ç–é  -- ç‰›é¦¬ä¸ç›¸å¹²! \nè‹¥å¸Œæœ›é€™å€‹å®¢è£½åŒ–çš„ `SmartPtr` å¯ä»¥æœ‰å¦‚ Raw Pointer ä¸€èˆ¬èƒ½å¤ è¼•æ˜“åœ°è½‰æ›ï¼Œéœ€è¦è²»é»åŠŸå¤«ã€‚\n\nè¦è®“ä¸Šé¢çš„ç¯„ä¾‹é€šéç·¨è­¯ï¼Œå¿…é ˆè¦æœ‰å°æ‡‰çš„ã€åˆæ³•çš„ Copy Constructorã€‚é›£é“è¦å¦‚æ­¤é€ä¸€åˆ—èˆ‰....?\n\n\u003e[!todo]\n\u003eç¢ºå®šæ˜¯ ctor?? copy assignment??\n\n```cpp\ntemplate\u003c\u003e\nclass SmartPtr\u003cTop\u003e {\npublic:\n    explicit SmartPtr(Top *realPtr) { heldPtr = realPtr; }\n    Top* get() const { return heldPtr; }\n\n\tSmartPtr(const SmartPtr\u003cMiddle\u003e\u0026 other) { heldPtr = other.get(); }\n\tSmartPtr(const SmartPtr\u003cBottom\u003e\u0026 other) { heldPtr = other.get(); }\n    void print() { heldPtr-\u003eprint(); }\nprivate:\n    Top *heldPtr;\n};\n\n```\nä½†æˆ‘å€‘ä¸å¯èƒ½æŠŠæ‰€æœ‰çš„çµ„åˆåˆ—èˆ‰å‡ºä¾†ï¼Œé€™æ¨£ä¸€æ—¦ç¹¼æ‰¿é«”ç³»ä¸­æœ‰æ–°å¢/æ›´å‹•é¡åˆ¥ï¼Œå°±éœ€è¦å†é‡å¯«ã€‚\n\n[[Template and Generic Programming]]\n\n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E9%81%BF%E5%85%8D%E5%82%B3%E5%9B%9E-Handles-%E6%8C%87%E5%90%91%E7%89%A9%E4%BB%B6%E7%9A%84-Private-Protected-Member-Data":{"title":"é¿å…å‚³å› Handles æŒ‡å‘ç‰©ä»¶çš„ Private \u0026 Protected Member Data","content":"\n\u003e æ¶ˆæ»… handles çš„æš´éœ²å¯èƒ½\n\n\n## å¤§å¿Œ: å›å‚³ä¸€å€‹ Non-Const handles \nåœ¨ [[æ‰“ç ´ Constness é™åˆ¶#Physical Constness]] ç•¶ä¸­ï¼Œæˆ‘å€‘æ¢è¨é Physical (bitwise) Constness çš„å•é¡Œã€‚\nè®“ Getter å›å‚³ä¸€å€‹ non-const reference æŒ‡å‘ member dataï¼Œæœƒå‡ºç¾è®“ private data æš´éœ²åœ¨å¤– (ç­‰åŒæ–¼ public) çš„è©­ç•°ç¾è±¡ã€‚\næ­¤å•é¡Œä¸é™æ–¼ refï¼Œpointerã€iterator é€™äº› handles (ç”¨ä»¥å–å¾—æŸå€‹ç‰©ä»¶)ï¼Œéƒ½æœ‰ç›¸åŒçš„é¢¨éšªã€‚\n\n## å›å‚³ä¸€å€‹ Const Handles å°±æ²’å•é¡Œäº†å—?\n\n```cpp\nstruct RecData {\n\tPoint ulhc;\n\tPoint lrhc;\n}\n\nclass Rectangle {\npublic:\n\tconst Point\u0026 upperLeft() const {return pData-\u003eulhc;}\n}\n\nclass GUIObj;\nconst Rectangle bbox (cosnt GUIObj\u0026 obj);\n\nGUIObj* pgo;\nconst Point* pUpperLeft = \u0026(bbox(*pgo).upperLeft()); // dangling\n```\n\næ­¤ä¾‹çš„ç¬¬ 15 è¡Œï¼Œ\n1. ç›¸ç•¶æ–¼å…ˆå‰µå»ºäº† `tmp = bbox(*pgo*)`\n2. å° `tmp.upperLeft()`å–å¾—ä¸€å€‹ `const Point\u0026` å…§éƒ¨è³‡æ–™ ``\n3. å°æ­¤å…§éƒ¨è³‡æ–™å– addressï¼Œå‚³çµ¦ `pUpperLeft`\n4. 15 è¡ŒåŸ·è¡Œå®Œç•¢ï¼Œ`pUpperLeft` ç›´æ¥è®Šæˆ dangling pointer\n\næœ€å¤§çš„å•é¡Œæ˜¯ï¼Œ**handles æ¯”å…¶æ‰€å±¬çš„ç‰©ä»¶æ›´é•·å£½**!! æœ€ç°¡å–®çš„å°±æ˜¯æ¶ˆæ»… handles çš„æš´éœ²å¯èƒ½ã€‚\n\nä½†ä¸¦ä¸æ„å‘³ä¸èƒ½å›å‚³ handlesï¼Œæœ‰æ™‚æ˜¯å¿…é ˆçš„ï¼Œåƒæ˜¯ `operator[]` å°±å¿…é ˆå›å‚³ reference æŒ‡å‘ container å…§éƒ¨å…ƒç´ ã€‚\n\n\n\n\n\n[[Effective C++ Outline#æ¢æ¬¾3 ç›¡å¯èƒ½ä½¿ç”¨ const]]\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E9%97%9C%E9%8D%B5%E5%AD%97-typename-%E5%9C%A8-Template-%E4%B8%AD%E7%9A%84%E6%84%8F%E6%B6%B5":{"title":"é—œéµå­— typename åœ¨ Template ä¸­çš„æ„æ¶µ","content":"è©¦æƒ³ï¼Œä¸‹ä¾‹ä¸­ä½¿ç”¨ `class` è·Ÿ `typname` ä¹‹é–“æœ‰ç”šéº¼å€åˆ¥?\n```c++\ntemplate\u003cclass T\u003e class Widget; // uses â€œclassâ€\ntemplate\u003ctypename T\u003e class Widget; // uses â€œtypenameâ€\n```\nç­”æ¡ˆæ˜¯æ„ç¾©å®Œå…¨ç›¸åŒï¼Œåœ¨å®£å‘Š template åƒæ•¸æ™‚ï¼Œé€™å…©å€‹ keywords ä¸¦æ²’æœ‰å·®åˆ¥ï¼Œä½† `class` èˆ‡ `typename` ä¸¦ä¸æ˜¯ç¸½æ˜¯ç­‰åƒ¹ã€‚\n\n\n## æŒ‡æ¶‰ (refer to)\n\n- å¾å±¬åç¨± (dependent names): åœ¨ template ç•¶ä¸­çš„æŸå€‹**åç¨±**ç›¸ä¾æ–¼ template åƒæ•¸ã€‚\n- å·¢ç‹€å¾å±¬åç¨± (nested dependent names): ç•¶å¾å±¬åç¨±åœ¨ template å…§ä¸¦ä¸”æ˜¯ nested çš„ã€‚(ex. `T::member_data`)\n- å·¢ç‹€å¾å±¬å‹åˆ¥åç¨± (nested dependent type names): æ˜¯å·¢ç‹€å¾å±¬åç¨±ï¼Œä¸”é€™å€‹åç¨±ä»£è¡¨ä¸€å€‹**å‹åˆ¥** (Type)ã€‚(ex. `T::`)\n- éå¾å±¬åç¨± (non-dependent names): é¡åˆ¥èˆ‡ template åƒæ•¸æ²’æœ‰ç›¸ä¾æ€§ã€‚\n\n## å€åˆ†ã€Œå·¢ç‹€å¾å±¬å‹åˆ¥åç¨±ã€èˆ‡ã€Œå·¢ç‹€å¾å±¬åç¨±ã€\nå·¢ç‹€å¾å±¬å‹åˆ¥åç¨±æœƒé€ æˆ parsing å›°é›£ï¼Œä»¥ä¸‹ä¾‹ä¾†èªªï¼Œåœ¨ä¸çŸ¥é“ `C` æ˜¯ä»€éº¼ä¹‹å‰ï¼Œè¦å¦‚ä½•è§£è®€ `C::const_iterator * x;`?\n1. `C::const_iterator` å¯èƒ½æ˜¯ä¸€å€‹ member data? è€Œ `x` å¯èƒ½æ˜¯ä¸€å€‹ global int variable !\n2. `C` æ˜¯ä¸€å€‹ STL containerï¼Œå‰‡ `const_iterator` æ˜¯ä¸€å€‹ nested type name.\néš¨è‘—è§£è®€çš„æ–¹å¼ä¸åŒï¼Œ`*` ç¬¦è™Ÿä¹Ÿæœ‰ä¸åŒçš„æ„æ€ã€‚\n1. è¡¨ç¤ºä¹˜æ³•\n2. è¡¨ç¤º Type Pointer\n\né€™å°±æ˜¯ Compiler é‡åˆ°çš„çš„å›°å¢ƒã€‚\n\n```c++\ntemplate\u003ctypename C\u003e\nvoid print2nd(const C\u0026 container)\n{ \n\tC::const_iterator * x;\n\tC::const_iterator y;\n}\n```\n\n## Typename å¿…é ˆåšç‚º Nested Dependent Type Name çš„å‰å°è©\nåœ¨ä¸Šè¿°çš„å›°å¢ƒ (nested dependent name OR nested dependent *type* name ) è£¡ï¼ŒCompiler é è¨­è¡Œç‚ºæ˜¯ **å‡è¨­ C ä¸¦éä¸€å€‹å‹åˆ¥**ï¼Œé™¤éä»¥ `typename` æ˜ç¢ºå‘Šè¨´å®ƒé€™æ˜¯å‹åˆ¥ã€‚\næŒ‰ç…§é€™å€‹è¦å‰‡å†çœ‹ä¸€æ¬¡ä¸Šä¾‹ï¼Œç”±æ–¼æ²’æœ‰ typename æ˜ç¢ºæŒ‡æ¶‰ C::const_iterator æ˜¯ type nameï¼Œcompiler èªç‚ºé€™ä»£è¡¨ä¸€å€‹ member dataï¼Œé‚£ `y` æ˜¯ä»€éº¼? ä»¥ç©ºç™½ç›¸éš”? é€™é•åèªæ³•ï¼Œæœƒç›´æ¥å¼•ç™¼éŒ¯èª¤ã€‚\n\nä½œæ³•å¦‚ä¸‹ï¼Œç›´æ¥åœ¨æƒ³è¦æŒ‡æ¶‰çš„ nested dependent type name å‰é¢åŠ ä¸Šé—œéµå­— `typename` å³å¯ï¼Œåœ¨ signature æˆ–æ˜¯ç›´æ¥å¯«åœ¨ function body å…§éƒ½å¯ä»¥ä½¿ç”¨é€™å€‹ keywordã€‚ç”šè‡³èˆ‡ `typedef` çµåˆä¹Ÿæ²’å•é¡Œï¼Œ[[typedef and using]]\n\n```c++\ntemplate\u003ctypename C\u003e\nvoid f(const C\u0026 container, typename C::const_iterator* x);\n\n\ntemplate\u003ctypename C\u003e\nvoid print2nd(const C\u0026 container)\n{ \n\ttypename C::const_iterator y = container.begin();\n\ttypedef typename C::const_iterator citor;\n}\n```\n\n`typename` é™¤äº†ç”¨åœ¨ template åƒæ•¸ï¼Œå°±åªå…è¨±è¢«ä½¿ç”¨æ–¼**æŒ‡æ¶‰ nested dependent type name**ï¼Œé nested çš„ä¸èƒ½åŠ ã€‚\n```c++\ntemplate\u003ctypename C\u003e // OK, ç­‰åƒ¹æ–¼ `class`\nvoid f( const C\u0026 container, // non-nested name ä¸èƒ½ä»¥ typename æŒ‡æ¶‰\n\t\ttypename C::iterator iter); // nested name å¿…é ˆä»¥ typename æ˜ç¢ºæŒ‡æ¶‰ï¼Œå¦å‰‡ç·¨è­¯æœƒæœ‰å•é¡Œ\n```\n\n## Typename ä¸å¾—ç”¨åœ¨ Base Classes List èˆ‡ Member Initializer List \n\n- Base Class List: ç¹¼æ‰¿æ™‚å€™å†’è™Ÿå¾Œé¢é‚£ä¸€ä¸²ï¼Œä¸èƒ½ã€ä¹Ÿä¸éœ€è¦ç”¨ `typename` æ¨™ç¤º (èƒ½æ”¾åœ¨é€™è£¡å°±å·²ç¶“æ˜¯ type äº†)\n- Member Initializer List ä¹Ÿä¸éœ€è¦\né™¤äº†ä¸Šè¿°çš„å…©å€‹ä¾‹å¤–ï¼Œå…¶ä»–åœ°æ–¹ç…§æ¨£èƒ½ç”¨ `typedef`\n\n```c++\ntemplate\u003ctypename T\u003e\nclass Derived: public Base\u003cT\u003e::Nested { // base class list: typename not allowed\npublic:\nexplicit Derived(int x): \n\tBase\u003cT\u003e::Nested(x)  // base class identifier: \n\t\t\t\t\t\t// in member initializer list typename not allowed\n{\n\ttypename Base\u003cT\u003e::Nested temp;  // use of nested dependent type\n\t\t\t\t\t\t\t\t\t// name not in a base class list or\n} // as a base class identifier in a mem. init. list: typename required\n};\n```\n\n\u003e [!todo]\n\u003e å¯¦é©— mem init list ç‚ºä½•ä¸ç”¨?\n\n\n\n","lastmodified":"2023-09-05T15:34:45.966894908Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/%E9%9C%80%E8%A6%81%E5%9E%8B%E5%88%A5%E8%BD%89%E6%8F%9B%E6%99%82%E8%AB%8B%E7%82%BA%E6%A8%A1%E6%9D%BF%E5%AE%9A%E7%BE%A9%E9%9D%9E%E6%88%90%E5%93%A1%E5%87%BD%E5%BC%8F":{"title":"éœ€è¦å‹åˆ¥è½‰æ›æ™‚è«‹ç‚ºæ¨¡æ¿å®šç¾©éæˆå“¡å‡½å¼","content":"æ–‡ç«  [[ç•¶æ‰€æœ‰çš„åƒæ•¸éƒ½éœ€è¦å‹åˆ¥è½‰æ›ï¼Œæ¡ç”¨ Non-member Function]] ä¸­æåˆ°ï¼Œèƒ½è¢«éš±å¼è½‰æ›çš„åªæœ‰ä½æ–¼åƒæ•¸åˆ—çš„å°è±¡ï¼Œå› æ­¤é‡å° `operator*` æ¡ç”¨äº† Non-member functionã€‚\n\nç¾åœ¨ï¼Œå°‡é€™å€‹ `operator*` æ”¹æˆ Template functionã€‚\n\n```cpp\ntemplate\u003ctypename T\u003e\nclass Rational {\npublic:\n\tRational(const T\u0026 numerator = 0, // see Item 20 for why params\n\tconst T\u0026 denominator = 1); // are now passed by reference\n\tconst T numerator() const; // see Item 28 for why return\n\tconst T denominator() const; // values are still passed by value,\n};\n\ntemplate\u003ctypename T\u003e\nconst Rational\u003cT\u003e operator*(const Rational\u003cT\u003e\u0026 lhs, const Rational\u003cT\u003e\u0026 rhs) \n{  \n\t\n}\n```","lastmodified":"2023-09-05T15:34:45.966894908Z","tags":["empty"]},"/notes/Project/Effective-C++-Series/%E9%9D%9C%E6%85%8B%E7%B6%81%E5%AE%9A-statically-bound-%E8%88%87%E5%8B%95%E6%85%8B%E7%B6%81%E5%AE%9A-dynamically-bound":{"title":"éœæ…‹ç¶å®š (statically bound) èˆ‡å‹•æ…‹ç¶å®š (dynamically bound)","content":"## éœæ…‹ç¶å®š (statically bound, early binding) \n- Non-virtual function\n- Default Parameter\nNon-virtual function æ˜¯ statically boundï¼Œä¹Ÿå°±æ˜¯èªªï¼Œç”± Base Class Pointer å–šèµ·çš„ç‰©ä»¶åœ¨å‘¼å« non-virtual function æ™‚ï¼Œå°±åªæœƒå‘¼å« Base Class çš„ç‰ˆæœ¬ï¼Œå³ä½¿ Base Class Pointer æŒ‡å‘çš„ç‰©ä»¶æ˜¯ Derived Class Instance äº¦ç„¶ã€‚\né€™æœƒå½¢æˆ [[çµ•ä¸é‡æ–°å®šç¾©ç¹¼æ‰¿ä¾†çš„ Non-virtual Function]] ç•¶ä¸­æ•˜è¿°çš„ï¼Œç”± Base Class Pointer å’Œ Derived Class Pointer æŒ‡å‘åŒä¸€å€‹ç‰©ä»¶ï¼Œå»å°è‡´ä¸åŒçš„è¡Œç‚ºçµæœé€™ç¨®ï¼Œéé æœŸä¸­çš„å¥‡æ€ªç‹€æ…‹ã€‚ä¸åªæ˜¯ Pointer æœ‰æ­¤å•é¡Œï¼ŒReference ä¹Ÿç›¸åŒã€‚\n\n## å‹•æ…‹ç¶å®š (dynamically bound, late binding)\n- virtual function\nvirtual function èµ°çš„å»æ˜¯å‹•æ…‹ç¶å®š (dynamically bound)ï¼Œå®ƒä¸å—æ­¤å›°æ“¾ï¼Œä¸ç®¡ç”± `B*` æˆ– `D*` æŒ‡å‘ç‰©ä»¶ `x` (`D` çš„ instance)ï¼Œéƒ½æœƒå–šèµ· `D::func`ã€‚\n\n## ç‰©ä»¶çš„å‹•æ…‹å‹åˆ¥èˆ‡éœæ…‹å‹åˆ¥\n\nç‰©ä»¶åˆ†æˆå‹•æ…‹èˆ‡éœæ…‹å‹åˆ¥\n- éœæ…‹å‹åˆ¥ (static type): å®£å‘Šæ™‚çš„å‹åˆ¥\n- å‹•æ…‹å‹åˆ¥ (dynamic type): åŸ·è¡ŒæœŸé–“æ‰€æŒ‡çš„ç‰©ä»¶çš„å‹åˆ¥\n![[Item37.png]]\n\n```cpp\nShape *ps; // static type = Shape*\nShape *pc = new Circle; // static type = Shape*\nShape *pr = new Rectangle; // static type = Shape*\n\nps = pc; // psâ€™s dynamic type is now Circle*\nps = pr; // psâ€™s dynamic type is now Rectangle*\n```\n\nVirtual function é€éå‹•æ…‹ç¶å®šè€Œä¾†ï¼Œå› æ­¤å‘¼å« virtual function æ™‚æ˜¯å«åˆ°å“ªä¸€å€‹ functionï¼Œæ˜¯çœ‹ç•¶ä¸‹å‹•æ…‹å‹åˆ¥ã€‚\n```cpp\npc-\u003edraw(Shape::Red); // calls Circle::draw(Shape::Red)\npr-\u003edraw(Shape::Red); // calls Rectangle::draw(Shape::Red)\n```\nç„¶è€Œï¼Œåƒæ•¸æ˜¯éœæ…‹ç¶å®šçš„ï¼Œå‡è¨­ `Shape::draw` çš„é è¨­åƒæ•¸ç‚º `Red`ï¼Œ`Rectangle` é è¨­åƒæ•¸ç‚º `Green`ï¼Œè€Œä½¿ç”¨ Shape pointer `pr` ä¸çµ¦è¼¸å…¥åƒæ•¸çš„å‘¼å« `draw` æ™‚ï¼Œå»æœƒå‘¼å« `Rectangle::draw` ä½†å‚³å…¥ `Shape::draw` çš„é è¨­åƒæ•¸! \n\n```cpp\n// a class for geometric shapes\nclass Shape {\npublic:\n\tenum ShapeColor { Red, Green, Blue };\n\t// all shapes must offer a function to draw themselves\n\tvirtual void draw(ShapeColor color = Red) const = 0;\n};\n\nclass Rectangle: public Shape {\npublic:\n\t// notice the different default parameter value â€” bad!\n\tvirtual void draw(ShapeColor color = Green) const;\n};\n\nclass Circle: public Shape {\npublic:\n\tvirtual void draw(ShapeColor color) const;\n};\n\npr-\u003edraw(); // calls Rectangle::draw(Shape::Red)!\n```\n\né è¨­åƒæ•¸ç”±éœæ…‹ç¶å®šï¼Œæ˜¯ C++ ç‚ºäº†åŸ·è¡Œæ•ˆç‡çš„è€ƒé‡ï¼Œåœ¨ç·¨è­¯æ™‚å°±å·²ç¶“æ±ºå®šå¥½ã€‚\n## ä»¥ NVI æ‰‹æ³•è§£æ±ºé è¨­åƒæ•¸æ˜¯éœæ…‹ç¶å®šå¸¶ä¾†çš„å•é¡Œ\né€é [[è—‰ç”± Non-Virtual Interface æ‰‹æ³•å¯¦ç¾ Template Method Pattern|NVI]] æ‰‹æ³•: ä»¥ä¸€å€‹ public non-virtual function å‘¼å« private virtual functionï¼Œæ˜¯çµ¦äºˆ virtual funciton é è¨­åƒæ•¸çš„å¥½æ–¹æ³•ã€‚\n\n1. å®£å‘Šä¸€å€‹ public non-virtual functionï¼Œçµ¦äºˆé è¨­çš„è¼¸å…¥åƒæ•¸ã€‚åŸºæ–¼ç¹¼æ‰¿çš„ Is-A é—œä¿‚ï¼Œé€™å€‹ function ä¸æœƒè¢« overrideã€‚\n2. å®šç¾©ä¸€å€‹ pure virtual functionï¼Œè®“ Derived Class ç¹¼æ‰¿ä»‹é¢ï¼Œè‡ªè¡Œå¯¦ä½œã€‚\n3. åœ¨ public non-virtual function ç•¶ä¸­å‘¼å«è©² pure virtual functionï¼Œä¸¦æŠŠé è¨­çš„åƒæ•¸å‚³å…¥ã€‚\n\nå¦‚æ­¤ä¸€ä¾†ï¼Œå°‡ä¸æœƒæœ‰ Derived Class æ“…è‡ªæ”¹å¯«é è¨­åƒæ•¸çš„å•é¡Œã€‚\n\n","lastmodified":"2023-09-05T15:34:45.966894908Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/80-20-Rule":{"title":"80-20 Rule","content":"## Effective C++ çš„ 80/20 Rule\nç¨‹å¼å¾€å¾€æŠŠ 80% çš„æ™‚é–“èŠ±è²»åœ¨ 20% çš„ç¨‹å¼ç¢¼ä¸Šï¼Œä½ æ‡‰è©²é‡å°é€™ 20% çš„ç¨‹å¼ç¢¼åšå„ªåŒ–ï¼Œæ‰èƒ½æœ‰æ•ˆå¢é€²ç¨‹å¼çš„æ•ˆç‡ã€‚\n\n\n## ç¶²è·¯è³‡æº\nã€Œ80/20æ³•å‰‡ã€åˆè¢«ç¨±ç‚ºã€Œå¸•é›·æ‰˜æ³•å‰‡ï¼ˆPareto principleï¼‰ã€ï¼Œç¶­åŸºç™¾ç§‘ä¸Šå°é€™å€‹æ¢ç›®çš„è§£é‡‹æ˜¯ï¼šã€Œåœ¨çœ¾å¤šç¾è±¡ä¸­ï¼Œ80ï¼…çš„çµæœå–æ±ºæ–¼20ï¼…çš„åŸå› ã€\n\n\u003e 80ï¼…çš„æ”¶ç©«æºè‡ªæ–¼20ï¼…çš„åŠªåŠ›ï¼Œå…¶é¤˜20ï¼…çš„çµæœå»å¿…é ˆä»˜å‡º80ï¼…çš„åŠ›æ°£æ‰èƒ½ç²å¾—ã€‚\n\nå–„ç”¨é€™ç¨®å› èˆ‡æœä¹‹é–“ä¸å¹³è¡¡çš„è‡ªç„¶ç¾è±¡ï¼Œå°±å¯ä»¥ç™¼æ®ä»¥å°‘åšå¤šçš„æ§“æ¡¿æ•ˆæ‡‰ã€‚  \n  \nåœ¨è¨­è¨ˆä¸Šæ‰€é¢è‡¨çš„è¨±å¤šé™åˆ¶æ¢ä»¶ï¼Œå½¼æ­¤ä¹‹é–“å¾€å¾€æ˜¯ç›¸è¡çªçš„ã€‚å¥½æ¯”ï¼Œæˆ‘ä¸€å†æåˆ°çš„å½ˆæ€§å’Œè¤‡é›œåº¦çš„å–æ¨â”€â”€æƒ³å¢åŠ å½ˆæ€§ï¼Œå°±å¾—ä»˜å‡ºæé«˜è¤‡é›œåº¦åšç‚ºä»£åƒ¹ï¼Œåˆ°åº•æˆ‘å€‘éœ€è¦å¤šå°‘å½ˆæ€§ï¼Ÿåˆå¾—ä»˜å‡ºå¤šå°‘è¤‡é›œåº¦åšç‚ºä»£åƒ¹ï¼Œæ‰èƒ½æ›å–åˆ°é€™äº›å½ˆæ€§å‘¢ï¼Ÿæˆ‘å€‘åœ¨è³¼è²·å„ç¨®å•†å“çš„æ™‚å€™ï¼Œå¸¸å¸¸æœƒè«‡åˆ°C/Pï¼ˆCost/Performanceï¼‰æ¯”çš„æ¦‚å¿µï¼Œäº‹å¯¦ä¸Šï¼Œè¨­è¨ˆä¸Šçš„å–æ¨ä¹Ÿå¯ä»¥å¥—ç”¨ç›¸åŒçš„è§€å¿µã€‚ç©¶ç«Ÿæˆ‘å€‘ä»¥å¤šå°‘çš„Aå»æ›å–å¤šå°‘çš„Bæ˜¯æœ€åˆ’ç®—çš„å‘¢ï¼Ÿè€Œ80/20æ³•å‰‡å°±æ˜¯åœ¨å‘Šè¨´ä½ ï¼Œè¦é©ç•¶é‹ç”¨ã€æ“ä½œ20èˆ‡80é€™ç¨®ä¸å¹³è¡¡çš„å› æœé—œä¿‚ï¼Œè€Œä¸”å°±å› ç‚ºé€™ç¨®æƒ…æ³ï¼Œä½¿å¾—æ§“æ¡¿æ•ˆæ‡‰å¾—ä»¥ç™¼æ®ä½œç”¨ã€‚  \n  \nå°±å¥½æ¯”ï¼Œåœ¨è¨±å¤šç³»çµ±çš„é–‹ç™¼ä¸­ï¼Œä»˜å‡º20ï¼…çš„è¤‡é›œåº¦ï¼Œå¤šåŠå¯ä»¥æ›å–åˆ°80ï¼…çš„å½ˆæ€§ï¼Œä½†æƒ³è¦å¾—åˆ°100ï¼…çš„å½ˆæ€§ï¼Œåˆå¾—ä»˜å‡ºå…¶é¤˜çš„80ï¼…çš„è¤‡é›œåº¦ã€‚å°æˆ‘å€‘ä¾†èªªï¼Œç”¨20ï¼…çš„è¤‡é›œåº¦å»æ›80ï¼…çš„å½ˆæ€§ï¼Œæ˜¯C/Pæ¯”æœ€é«˜çš„ã€‚\n\næ‘˜éŒ„è‡ª: https://www.ithome.com.tw/article/47319","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Array-As-an-Argument":{"title":"Array As an Argument","content":"\u003e- ç•¶ Template å®šç¾©æˆ Pass by value å½¢å¼æ™‚ï¼Œå‚³å…¥çš„ array name æœƒè½‰æ›æˆ point to array (the first item)ã€‚\n\u003e - ç•¶ Template å®šç¾©æˆ Pass by ref å½¢å¼æ™‚ï¼Œå‚³å…¥çš„ array name æ˜¯ **çœŸçš„å‚³å…¥æ•´å€‹ Object**ã€‚\n\nåœ¨é€²å…¥æ­£æ–‡ä¹‹å‰é ˆé‡æ¸…ä¸€å€‹è§€å¿µï¼Œarray type å’Œ pointer type æ˜¯ä¸åŒçš„ï¼Œå„˜ç®¡æœ‰æ™‚å€™ä»–å€‘ã€Œçœ‹èµ·ä¾†ã€å¯ä»¥äº’æ›ã€‚\n```cpp\nconst char name [] = \"AAA\";   // Type of name is: const char[13]\nconst char* ptrToName = name; // array decays to pointer\n```\n\n`const char[13]` å’Œ `const char*` æ˜¯ä¸åŒçš„!! ä½†æ˜¯ç”±æ–¼æœ‰ array-to-pointer decay(é€€åŒ–) ruleçš„è¦å‰‡åœ¨ï¼Œå› æ­¤ä¸Šé¢ç¯„ä¾‹ä¸­çš„ code æ˜¯å¯ compiled çš„ã€‚\n\n```cpp\ntemplate \u003ctypename T\u003e\nvoid f(T param);\n```\n\nåœ¨é€²å…¥ template deduction å‰ï¼Œå…ˆçœ‹ array ä½œç‚º function parameter å®£å‘Šæ™‚çš„å…©ç¨®å½¢å¼ï¼Œé€™å…©ç¨®å®£å‘Šåœ¨åŸ·è¡Œä¸Šæ˜¯ç­‰åƒ¹çš„ã€‚\n```cpp\nvoid myFunc(int param[]); // Is treated as a pointer declaration\nvoid myFunc(int* param);  // Like this.\n```\n\nArray Parameter å’Œ Pointer Parameter ä¹‹é–“çš„ç­‰åƒ¹æ€§æºè‡ªæ–¼ C èªè¨€ï¼Œä¸¦ä¸”åœ¨ C++ ä¸­ä¿ç•™ï¼Œé€™ä½¿äººèª¤è§£ Array Type å’Œ Pointer Type æ˜¯ç›¸åŒçš„ã€‚\n\næ ¹æ“šåœ¨ Function Parameter ç•¶ä¸­ï¼ŒArray Parameter è¢«ç•¶ä½œ Pointer Parameter å°å¾…ï¼Œç•¶ Array è¢«å‚³å…¥ Template æ™‚æœƒè¢«æ¨æ–·æˆ Pointer Typeã€‚\n```cpp\nf(name); // T: const char*\n```\n\nä½†æ˜¯!! é›–ç„¶åœ¨ Function Declaration ä¸­ï¼Œä»¥ Array Parameter çš„å½¢å¼å®£å‘Šæœƒè¢«ä»¥ Pointer çš„æ–¹å¼å°å¾…ï¼Œè€Œéä»¥æ•´å€‹ Array çš„å½¢å¼å°å¾…ï¼Œå»å¯ä»¥å®£å‘Š **Array Reference** ï¼Œå°±å¯ä»¥å‚³æ•´å€‹ array é€²å»ã€‚\n\n```cpp\ntemplate \u003ctypename T\u003e\nvoid f(T\u0026 param);\n\nf(name); // pass array to f\n\t\t // T is const char[13]\n\t\t // ParamType is const char(\u0026)[13]\n```\n\næœ‰è¶£çš„æ˜¯ï¼Œä¸åª `T` å¯ä»¥è¢«æ¨æ–·ï¼Œç”šè‡³é€£ number of elements in array `N` ä¹Ÿå¯ä»¥ä½œç‚ºæ¨æ–·çš„é …ç›®ä¹‹ä¸€ã€‚\n```cpp\ntemplate \u003ctypename T, std::size_t N\u003e\nconstexpr std::size_t arraySize(T (\u0026)[N]) no except\n{\n\treturn N;\n}\n```\n- About `constexpr`: [[Item15 constexpr]]\n- About `noexcept`: [[Modern C++ noexcept]]","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/C++11-std-function":{"title":"C++11 std function","content":"","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["empty","cpp11"]},"/notes/Project/Effective-C++-Series/Classic-Strategy-Pattern":{"title":"Classic Strategy Pattern","content":"\n![[Item35_Classic_Strategy_Pattern.png]]\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Const-in-C++":{"title":"Const in C++","content":"\n#### Const Iterator\nåŒç†ä¸Šè¿°ï¼Œå®£å‘Šä¸€å€‹ iterator ç‚º `const` è¡¨ç¤ºé€™å€‹ iterator ä¸èƒ½æ”¹è®ŠæŒ‡å‘çš„å°è±¡ï¼Œä½†æ˜¯æŒ‡å‘çš„å°è±¡ä¹‹å…§å®¹æœ¬èº«å¯ä»¥è®Šã€‚ \n```cpp\nconst std::vector\u003cint\u003e::iterator iter = vec.bgein();\n```\nå¦‚æœæƒ³è¦æŒ‡å‘ä¸€å€‹ä¸å¯è¢«æ”¹è®Šå…§å®¹çš„ç‰©ä»¶ï¼Œéœ€è¦ä½¿ç”¨ `const_iterator`\n```cpp\nstd::vector\u003cint\u003e::const_iterator citer = vec.bgein();\n```\n\n#### Return Const Value\n[[è®“ä»‹é¢æ˜“æ–¼è¢«ä½¿ç”¨ï¼Œä¸æ˜“èª¤ç”¨#Return Const Value]]\n\n#### Const member function\n[[Const member function]]\n\n#### Const Argument\nåœ¨çœŸå¯¦çš„ç¨‹å¼è¨­è¨ˆä¸­ï¼Œæ¯”è¼ƒå¤šç”¨æ–¼ function argument æ˜¯ const pointer / const referecneã€‚\nå¦‚ä¸‹ä¾‹: `print` function å®šç¾©äº†ä¸€å€‹ const reference çš„ argumentï¼Œç•¶å®ƒåœ¨èª¿ç”¨ operator `[]` çš„æ™‚å€™ï¼Œå°±æœƒç”¨åˆ°ä¸Šé¢çš„ APIã€‚ä¸”å®šç¾© const return value å¯ä»¥é¿å…éŒ¯èª¤çš„å¯«å…¥å€¼ï¼Œé”æˆ const object çš„ç›®çš„ã€‚\n```cpp\nvoid print(const TextBlock\u0026 ctb) // in this function, ctb is const \n{ \n\tstd::cout \u003c\u003c ctb[0]; // calls const TextBlock::operator[] \n\tctb[1] = 'x';        // raise error!!!\n}\n```\n\n#### æ‰“ç ´ Constness é™åˆ¶\nå‰é¢èªªçš„æ˜¯å°æ–¼ Client ç«¯ï¼Œæˆ‘å€‘é ˆä¿æŒè³‡æ–™çš„ä¸å¯è®Šå‹•æ€§ã€‚\n\nç„¶è€Œåœ¨é¡åˆ¥å…§éƒ¨çš„è¨­è¨ˆä¸­ï¼ŒåŸºæ–¼ç¶­è­·æ€§ã€æˆ–æŸäº›ç†å¿µï¼Œæˆ‘å€‘å¸Œæœ›å®ƒä¸è¦é‚£éº¼æ­»æ¿ï¼Œæ¯”èµ· Compiler æ‰€å …æŒçš„ Constnessï¼Œæˆ–è¨±é‚è¼¯ä¸Šçš„ Constness æ›´åŠ é‡è¦ã€‚æ¥ä¸‹ä¾†ï¼Œå°‡èªªæ˜ Compiler èªçŸ¥ Constness ç‚ºä½• ï¼Œèˆ‡å¦‚ä½•ã€Œéƒ¨åˆ†çš„ã€æ‰“ç ´ Const é™åˆ¶ã€‚\n[[æ‰“ç ´ Constness é™åˆ¶]]\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Const-member-function":{"title":"Const member function","content":"\n\u003e The purpose of const on member functions is to identify which member functions may be invoked on const object.\n\nä½¿ Interface æ„åœ–æ›´åŠ æ¸…æ¥šï¼Œæœ‰å…©å€‹é‡è¦çš„å„ªé»\n1. å¯çŸ¥é“å“ªå€‹ function æœƒæ›´å‹•åˆ°ç‰©ä»¶\n2. æ”¹å–„ C++ ç¨‹å¼æ•ˆç‡èˆ‡ \"pass by reference to const\" æ¯æ¯ç›¸é—œï¼Œä½¿ function å¯æ“ä½œ Const Object ã€‚\n\nç›´æ¥çœ‹ä¾‹å­: æˆ‘å€‘å®šç¾©äº†å¦‚ä¸‹çš„ Interfaceã€‚\n\n```cpp\nclass TextBlock\n{\npublic:\n\t// operator[] for const objects\n\tconst char\u0026 operator[](std::size_t position) const\n\t{ return text[position]; }\n\t\n\t// operator[] for non-const objects\n\tchar\u0026 operator[](std::size_t position) \n\t{ return text[position]; }\nprivate:\n\tstd::string text;\n};\n```\n\nåœ¨ Client ç«¯ï¼Œ`const TextBlock` èˆ‡ `TextBlock` ç‰©ä»¶æœƒ call åˆ°çš„  `TextBlock::operator[]` **æ˜¯ä¸åŒçš„**!! æœ‰å®£å‘Š Interface çš„ç¬¬ä¸€æ¢ (const function)ï¼Œæ‰æœ‰è¾¦æ³•æ“ä½œ `const TextBlock` çš„ç‰©ä»¶ã€‚\n```cpp\nconst TextBlock ctb(\"World\");\nstd::cout \u003c\u003c ctb[0]; // calls const TextBlock::operator[]\n\nTextBlock tb(\"Hello\");\nstd::cout \u003c\u003c tb[0]; // calls non-const TextBlock::operator[]\n```\n\n## Experiment\nå¯¦é©—ä»¥ä¸‹é€™ä»½ codeï¼Œ\n1. ç•¶ const èˆ‡ non-const function éƒ½å¯«æ™‚\n```cpp\ncall non-const func A\ncall const func B\n```\n2. ç•¶åªå¯« const æ™‚\n```cpp\ncall const func A\ncall const func B\n```\n3. ç•¶åªå¯« non-const æ™‚ (å®£å‘Š const object, ä½†ä¸å®£å‘Š `const operator[]` )ï¼ŒCompile çš„æ™‚å€™å°±æœƒå‡ºå•é¡Œ \n```cpp\nItem3.cpp:32:20: error: passing â€˜const TextBlockâ€™ as â€˜thisâ€™ argument discards qualifiers [-fpermissive]\n   32 |     std::cout\u003c\u003ct2[0] \u003c\u003cstd::endl;\n      |                    ^\nItem3.cpp:17:15: note:   in call to â€˜char\u0026 TextBlock::operator[](std::size_t)â€™\n   17 |         char\u0026 operator[](std::size_t position)\n      |               ^~~~~~~~\n```\n\nç¨‹å¼æœ¬é«”:\n```cpp\n#include \u003cstring\u003e\n#include \u003ciostream\u003e\n// g++ -o main Item3.cpp\nclass TextBlock\n{\npublic:\n    TextBlock(std::string text):m_text(text) { }\n\t// operator[] for const objects\n\tconst char\u0026 operator[](std::size_t position) const\n\t{ \n        std::cout\u003c\u003c\"call const func \";\n        return m_text[position]; \n    }\n\t\n\t// operator[] for non-const objects\n\tchar\u0026 operator[](std::size_t position) \n\t{ \n        std::cout\u003c\u003c\"call non-const func \";\n        return m_text[position]; \n    }\n\nprivate:\n\tstd::string m_text;\n};\n\nint main() {\n    TextBlock t1 = TextBlock(\"AAAA\");\n    const TextBlock t2 = TextBlock(\"BBB\");\n    std::cout\u003c\u003ct1[0] \u003c\u003c std::endl; \n    std::cout\u003c\u003ct2[0] \u003c\u003cstd::endl;\n}\n```\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Copying-Function":{"title":"Copying Function","content":"\n\u003e Effective C++ ä¸­ï¼ŒCopying Function æŒ‡çš„æ˜¯ Copy construcot \u0026 Copy Assignment\n\n1. ç•¶ Programmer è‡ªå·±å®šç¾© Copying function æ™‚ï¼ŒCompiler ä¸æœƒè­¦å‘Šä½ å‡ºéŒ¯!\n2. åœ¨ç¹¼æ‰¿çš„æ¶æ§‹ä¸­\n\t1. ä¸åªå±¬æ–¼ Child Class çš„ member data è¦å…¨éƒ¨ copy\n\t2. é‚„è¦è¨˜å¾— call Parent Class çš„ copying functionã€‚\n\n    ```cpp\n    // Copy Construcotr \n    PriorityCustomer::PriorityCustomer(const PriorityCustomer\u0026 rhs)\n    : Customer(rhs), // invoke base class copy ctor\n    priority(rhs.priority)\n    {\n\t    logCall(\"PriorityCustomer copy constructor\");\n    }\n   \n    // Copy Assignment\n    PriorityCustomer\u0026\n    PriorityCustomer::operator=(const PriorityCustomer\u0026 rhs)\n    {\n        logCall(\"PriorityCustomer copy assignment operator\");\n        Customer::operator=(rhs); // assign base class parts\n        priority = rhs.priority;\n        return *this;\n    }\n\t\n\t ```\n\n3. Copy Constructor èˆ‡ Copy Assignment ä¸æ‡‰è©² Call å½¼æ­¤ï¼Œå¦‚æœæœ‰ Reusable Codeï¼Œæ‡‰è©²å¦å¤–æŠ½ä¸€å€‹ private function å»å…±ç”¨ã€‚","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Default-Generated-Functions":{"title":"Default Generated Functions","content":"\n```cpp\nclass Empty; // you declare, but implement nothing. \n\n// Compiler silently create.\nclass Empty {\npublic:\n\nÂ  Â  Empty() { ... } // default constructor\nÂ  Â  Empty(const Empty\u0026 rhs) { ... } // copy constructor\nÂ  Â  ~Empty() { ... } // destructor â€” see below for whether it's virtual\nÂ  Â  Empty\u0026 operator=(const Empty\u0026 rhs) { ... } // copy assignment operator\n}\n\nEmpty e1;      // default constructor\n\t\t\t   // destructor\nEmpty e2(e1);  // copy constructor\ne2 = e1;       // copy assignment\n```\n\n\n- Default constructor (without parameter) \u0026 destructor\n\t- çµ¦ç·¨è­¯å™¨æ”¾ä¸€äº›å–šèµ· base class, non-static member data constructor \u0026 destructor çš„åœ°æ–¹ã€‚\n\t- Compiler ç”Ÿæˆçš„ destructor æ˜¯ä¸€å€‹ non-virtural\n\t  [[ç‚ºå¤šå‹ç”¨é€”çš„åŸºç¤é¡åˆ¥å®£å‘Š virtual è§£æ§‹å¼]]\n\t- åªè¦æœ‰å®£å‘Š Constructorï¼Œç·¨è­¯å™¨å°±ä¸æœƒå¹«æˆ‘å€‘å¤šæ› default constructor ä¸Šå»ã€‚\n- Copy Constructor \u0026 Copy Assignment: å°‡ source ç‰©ä»¶çš„æ¯ä¸€å€‹ non-static member data copy éå»ã€‚[[Copying Function]]\n\n## Default Copy Assignment\nå„˜ç®¡ Copy Assignment `operator=` ä¹Ÿå¯ä»¥è‡ªå‹•ç”Ÿæˆï¼Œå»æ˜¯æœ‰æ¢ä»¶çš„è‡ªå‹•ç”Ÿæˆï¼Œåªæœ‰ç•¶è‡ªå‹•ç”Ÿæˆçš„ä»£ç¢¼åˆæ³•æ™‚æ‰æœƒç”Ÿæˆã€‚\n\nä½† default copy assignment å¸¸å¾ˆæœ‰æ©Ÿæœƒè®Šå¾—å¹¾ä¹ç„¡ç”¨æ­¦ä¹‹åœ°ã€‚\n1. ç•¶ User-defined Class æœ‰ member data æ˜¯ Reference æˆ– `const`ï¼Œè‡ªå‹•ç”Ÿæˆçš„ code æœƒä¸åˆæ³•ã€‚\n2. ç•¶ base class æŠŠ copy assignment å®£å‘Šæˆ privateï¼Œcompiler ç„¡æ³•å–šèµ· parent çš„ private functionï¼Œç›´æ¥è£æ­»ã€‚\n\nåœ¨ C++ ç•¶ä¸­ï¼Œä¸€æ—¦ Reference è¢«å®£å‘Šï¼Œæ˜¯ä¸å…è¨±æ”¹æŒ‡å‘ä¸åŒç‰©ä»¶çš„ï¼Œè€Œ Compiler æ›´ä¸æœƒè‡ªå‹•å»ä¿®æ”¹ \"è¢« Reference ç‰©ä»¶\" çš„å…§å®¹ã€‚é€™ç¨®æƒ…æ³ï¼ŒCompiler æœƒç›´æ¥æ‹’çµ•ç”Ÿæˆ Copy assignmentã€‚\nå¦‚æœæƒ³è®“ä¸€å€‹æœ‰ reference member data çš„ class æœ‰ Copy assignmentï¼Œéœ€è¦è‡ªè¡Œå¯¦ä½œã€‚ç›¸ä¼¼çš„ï¼Œæ›´æ”¹ `const` æˆå“¡æ˜¯ä¸åˆæ³•çš„ï¼Œéœ€è‡ªè¡Œå¯¦ä½œã€‚","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Deleted-Function":{"title":"Deleted Function","content":"\n\n```cpp\nclass A{    \npublic:\n  A(int x) : m(x) {}\n  A\u0026 operator = (const A \u0026) = delete;  // Declare the copy assignment operator\n                                       // as a deleted function.\n  A(const A\u0026) = delete;                // Declare the copy constructor\n                                       // as a deleted function.\n\nprivate:\n  int m;\n};\n\nint main(){\n  A a1(1), a2(2), a3(3);\n  a1 = a2;     // Error, the usage of the copy assignment operator is disabled.\n  a3 = A(a2);  // Error, the usage of the copy constructor is disabled.\n}\n```\n\n\n## èˆŠçš„åšæ³•\nä»¥ C++11 ç‚ºåˆ†æ°´å¶ºï¼ŒC++98 åªèƒ½é€éå®£å‘Š private è—ä½ä¸è¦ Compiler ç”Ÿæˆçš„ functionã€‚\nç¢ºå¯¦ client code æœƒç„¡æ³•å‘¼å«ã€‚ä½†é€™ä¸¦ä¸çµ•å°å®‰å…¨ï¼Œå› ç‚º member function è·Ÿ frient function é‚„æ˜¯å¯ä»¥å‘¼å« private functionã€‚æ›´å®‰å…¨çš„åšæ³•æ˜¯ï¼Œå®£å‘Š private å¾Œæ•…æ„ä¸å¯¦ä½œã€‚\n","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/EBO-Empty-Base-Optimization":{"title":"EBO (Empty Base Optimization)","content":"ç©ºç™½åŸºæœ¬é¡åˆ¥æœ€ä½³åŒ–\neffective c++ 191","lastmodified":"2023-09-05T15:34:45.914894221Z","tags":["empty"]},"/notes/Project/Effective-C++-Series/Effective-C++-Outline":{"title":"Effective C++ Outline","content":"## Chapter 1\n\n### æ¢æ¬¾1 C++ æ˜¯ä¸€å€‹èªè¨€è¯é‚¦\nC++ èåˆäº†å¤šç¨®å½¢å¼çš„ programming æ‰‹æ³•ï¼Œç‰©ä»¶å°å‘ã€proceduralã€genericã€metaprogrammingã€functional...ã€‚\n\n### æ¢æ¬¾2 ç›¡é‡ä»¥ `const` , `enum`, `inline` å–ä»£ `#define`\n- ä»¥ const, enum, inline å–ä»£ `#define`ï¼Œ å¯§å¯ä»¥ç·¨è­¯å™¨ (compiler) å–ä»£å‰è™•ç†å™¨ (pre-processor)ã€‚ \n- å°æ–¼å–®ç´”çš„å¸¸æ•¸ï¼Œä»¥ `const` æˆ– `enum` å–ä»£\n- å°æ–¼å½¢ä¼¼ function çš„å·¨é›†(macro)ï¼Œç”¨ `inline` å–ä»£ã€‚\n#### Const\n- [[ä»¥ Const å–ä»£ä½¿ç”¨ Define]]\n- [[The definition and declaration of static const]]\n#### Enum\n- [[enum hack]]\n#### Inline\n\n\n### æ¢æ¬¾3 ç›¡å¯èƒ½ä½¿ç”¨ const\nç›¡å¯èƒ½çš„ä½¿ç”¨Â `const`ï¼Œå®ƒå¯ä»¥ç¢ºä¿ç‰©ä»¶ä¸è¢«æ”¹è®Šã€‚ç‰¹åˆ¥æ˜¯ custom class designer æ›´åŠ éœ€è¦æ³¨æ„ operator çš„ constnessã€‚\n\n- `const` åœ¨æ˜Ÿè™Ÿå·¦é‚Š: è¢« point çš„ç‰©ä»¶æ˜¯å¸¸æ•¸\n- `const` åœ¨æ˜Ÿè™Ÿå³é‚Š: pointer è‡ªèº«æ˜¯å¸¸æ•¸\n```c++\nchar greeting[] = \"Hello\";\nchar* p greeting;\n\nconst char* p = gretting; // non-const ptr, const data\nchar const* p = gretting; // same \n\nchar* const p = greeting; // const ptr, non-const data\nconst char* const p = greeting; // const ptr, const data\n```\n\nç•¶ `const` åœ¨ `*` å‰ï¼Œä¸ç®¡æ˜¯å…ˆå¯« const ä¿®é£¾çš„é¡ã€æˆ–æ˜¯å…ˆå¯« const éƒ½æ˜¯ä¸€æ¨£çš„ï¼Œå°±æ˜¯åœ¨ä¿®é£¾ `char` ç‰©ä»¶å…·æœ‰å¸¸æ•¸æ€§ã€‚\n\n[[Const in C++]]\n\n### æ¢æ¬¾4 ç¢ºå®šç‰©ä»¶åœ¨ä½¿ç”¨å‰å·²ç¶“åˆå§‹åŒ–\nä¸æ˜¯æ‰€æœ‰çš„ç‰©ä»¶å®£å‘Šæ™‚è‡ªå¸¶åˆå§‹åŒ–ï¼Œå®ƒçš„è¦å‰‡éæ–¼è¤‡é›œï¼Œåªéœ€è¦è¬¹è¨˜: å®£å‘Šæ™‚å°±è¦åˆå§‹åŒ–!\n(é€šå¸¸æ˜¯ C-style çš„ï¼Œåƒæ˜¯ array ä¸ä¿è­‰æœƒç™¼ç”Ÿåˆå§‹åŒ–)ï¼Œè€Œ non-C part çš„ (like `std::vector`) æœ‰å…¶ä»–è¦å‰‡ï¼Œå°±è‡ªå¸¶åˆå§‹åŒ–)\n\nå°æ–¼å…§å»ºå‹åˆ¥ (int, char, double)ï¼Œåˆå§‹åŒ–å°±æ˜¯æ‰‹å‹•çµ¦å€¼ã€‚å°æ–¼å…§å»ºå‹åˆ¥ä¹‹å¤–çš„ï¼Œå‰‡è¦å¯« constructorã€‚\n\nç‚ºäº†é¿å…æ²’æœ‰åˆå§‹åŒ–å¸¶ä¾†çš„ä¸ç¢ºå®šæ€§ï¼Œç¢ºä¿ä¸‰ä»¶äº‹\n1. å°æ–¼ä¸æ˜¯ member data çš„ built-in type objectï¼Œæ‰‹å‹•åˆå§‹åŒ–ã€‚C++ ä¸¦ä¸ä¿è­‰æœƒåˆå§‹åŒ–æ‰€æœ‰çš„ Built-in type Object (ex. array)ã€‚\n2. å°æ–¼ Custom Classï¼Œä½¿ç”¨ [[Member Initialization List]] åˆå§‹åŒ– member dataã€‚åŸå› åƒè¦‹ [[Identify Initialization and Assignment]]\n3. è‹¥åˆå§‹åŒ–é †åºå…·æœ‰ä¸ç¢ºå®šæ€§ï¼Œæƒ³è¾¦æ³•åŠ å¼· designï¼Œç¢ºä¿ä¸æœƒç™¼ç”Ÿ circle (å…©å€‹è®Šæ•¸ç›¸äº’ä¾è³´) æˆ–ç«¶é€Ÿå•é¡Œã€‚\n4. ç•¶ static object ä¹‹é–“æœ‰ä¾è³´é—œä¿‚æ™‚ï¼Œlocal static objects å‹é non-local static objectsã€‚åƒè¦‹ [[Static Object]]\n\n## Chapter2 å»ºæ§‹ã€è§£æ§‹ã€è³¦å€¼é‹ç®—\n\n### æ¢æ¬¾5 äº†è§£ C++é»˜é»˜ç·¨å¯«ä¸¦å‘¼å«å“ªäº›å‡½å¼\n\nç•¶æˆ‘å€‘å®£å‘Šäº†ä¸€å€‹ Classï¼Œè€Œä¸å»å¯¦è¸ä»»ä½•ç´°ç¯€ï¼ŒCompiler æœƒå·å·åœ°å¹«æˆ‘å€‘ç”Ÿæˆä¸€äº› functionï¼Œä»–å€‘åˆ†åˆ¥æ˜¯\n- default constructor, destructor\n```cpp\nEmpty() { ... } // default constructor\n~Empty() { ... }\n```\n- copy constructor, copy assignment\n```cpp\nEmpty(const Empty\u0026 rhs) { ... } // copy constructor\nEmpty\u0026 operator=(const Empty\u0026 rhs) { ... } // copy assignment \n```\n\nä¸¦ä¸”ï¼Œéƒ½æ˜¯ public inline function!! é—œæ–¼é€™äº› function è¢« inline æœƒå¸¶ä¾†ä»€éº¼å±å®³ï¼Œè¦‹ [[å»ºæ§‹å’Œè§£æ§‹å¼æ˜¯ inline çš„ç³Ÿç³•äººé¸]]ã€‚\n\næ›´ç¢ºåˆ‡ä¾†èªªï¼Œæ˜¯ç•¶é€™äº› function è¢«éœ€è¦ (è¢«å‘¼å«) æ™‚ç”¢ç”Ÿ: [[Default Generated Functions]]\n\n### æ¢æ¬¾6 æ˜ç¢ºæ‹’çµ•ä¸è¦ç·¨è­¯å™¨è‡ªå‹•ç”Ÿæˆçš„å‡½å¼\nåœ¨ C++11 å¼•å…¥äº†æ–°çš„æ¦‚å¿µ [Deleted functions](https://www.ibm.com/docs/en/zos/2.4.0?topic=definitions-deleted-functions-c11)ï¼Œæ›¸ä¸­æ•™çš„æ–¹æ³•ä¾ç„¶æœ‰å…¶å£è™•ã€‚ç›´æ¥åœ¨ declaration å¾Œé¢æ¥è‘— `=delete` å°±å¯ä»¥é˜»æ­¢ copmiler ç”Ÿæˆå®ƒã€‚\n\n```cpp\nA(const A\u0026) = delete;\n```\n\n[[Deleted Function]]\n\n### æ¢æ¬¾7 ç‚ºå¤šå‹ç”¨é€”çš„åŸºç¤é¡åˆ¥å®£å‘Š virtual è§£æ§‹å¼\nç”³æ˜ï¼Œé€™æ¢è¦å‰‡**åªé‡å°**å¤šå‹çš„ Base Class\n- é¦–å…ˆå°±å…ˆèªªæ˜å¤šå‹çš„ç”¨æ„: [[ç‚ºå¤šå‹ç”¨é€”çš„åŸºç¤é¡åˆ¥å®£å‘Š virtual è§£æ§‹å¼]]\n\n### æ¢æ¬¾8 ä¸è®“ç•°å¸¸é€ƒé›¢è§£æ§‹å¼\nC++ ä¸æœƒç¦æ­¢ Exception ç™¼ç”Ÿæ–¼ Destructorï¼Œä½†é€™éº¼åšå…·æœ‰ç›¸ç•¶çš„é¢¨éšªã€‚ä¸€æ—¦ Exception ç™¼ç”Ÿè€Œè·³å‡ºäº† Destructorï¼Œæœƒä¸­æ­¢éŠ·æ¯€ç‰©ä»¶çš„ç¨‹åºã€‚\nç‰¹åˆ¥æ˜¯ STL Container æˆ– Array é€™ç¨®è³‡æ–™çµæ§‹ä¸­ï¼Œè‹¥å‰é¢æœ‰æŸå€‹ element åœ¨éŠ·æ¯€éç¨‹ä¸­ thorw Exception ä½¿å¾— Container çš„ Destructor è¢«ä¸­æ–·ï¼Œå‰‡å¾Œé¢çš„ elements æœ‰å¯èƒ½ä¸è¢«éŠ·æ¯€ï¼Œè€Œå°è‡´è¨˜æ†¶é«”æ´©æ¼! \n\n[[è§£æ§‹å¼èˆ‡ç•°å¸¸]]\n\n### æ¢æ¬¾9 ä¸åœ¨å»ºæ§‹èˆ‡è§£æ§‹ä¸­å‘¼å« virtual å‡½å¼\n\nä¸è¦åœ¨ Constructor èˆ‡ Destructor ä¸­å‘¼å« virtural å‡½å¼ã€‚é€™å’Œ Java èˆ‡ C# ä¸åŒ!!!\n\n[[Virtual Function]]\n\n\n### æ¢æ¬¾10 è®“ operator= å›å‚³è‡ªèº«çš„ reference\nè®“ `operator=`, `operator+=` ç­‰ assignment ç¬¦è™Ÿå›å‚³è‡ªèº«çš„ Referenceã€‚\né€™æ˜¯ä¸€é …å”è­°ï¼Œä¸¦éå¼·åˆ¶è¦å®šã€‚ä½†åœ¨ STL æä¾›çš„å‹åˆ¥ï¼Œæˆ–æ˜¯å³å°‡ support çš„ type ([[Item54 Familiarize yourself with the standard library including TR1]])ï¼Œéƒ½æœƒéµå®ˆé€™å€‹å”å®šï¼Œè«‹å¾çœ¾ã€‚\n\n### æ¢æ¬¾11 åœ¨ operator= è™•ç†è‡ªæˆ‘è³¦å€¼\n\nåœ¨æ’°å¯« `operator=` æ™‚ï¼Œéœ€è¦è€ƒé‡ç•¶ `rhs==this` çš„ç‹€æ³ã€‚\nå³ä½¿ä¸æ˜¯å¦‚ä¸‹é¢çš„æ–¹å¼ handle è‡ªæˆ‘è³¦å€¼ï¼Œè¨˜ä½ï¼Œä¸è¦è®“é€™å€‹å‡½å¼ raise exception (exception safety) å°±å°äº†ã€‚\n\n```cpp\nWidget\u0026 Widget::operator=(const Widget\u0026 rhs)\n{\n\tif (this == \u0026rhs) return *this; // assignment to self\n\tdelete pb;\n\tpb = new Bitmap(*rhs.pb);\n\treturn *this;\n}\n```\n\n### æ¢æ¬¾12 è¤‡è£½ç‰©ä»¶æ™‚è¨˜å¾—æ¯ä¸€å€‹éƒ¨åˆ†\n\nç•¶ Programmer è‡ªå·±å®šç¾© [[Copying function]] æ™‚ï¼ŒCompiler ä¸æœƒè­¦å‘Šä½ å‡ºéŒ¯! ä½ éœ€è¦è‡ªå·±æ³¨æ„!!\n\n## Chapter3 è³‡æºç®¡ç†\n\n### æ¢æ¬¾13 ä½¿ç”¨è³‡æºç®¡ç†å™¨\n\n- è³‡æºå–å¾—çš„æ™‚æ©Ÿå°±æ˜¯åˆå§‹åŒ–çš„æ™‚æ©Ÿ (Resource Acquisition Is Initialization, [RAII](https://zh.wikipedia.org/zh-tw/RAII))\n- [[Smart Pointer]] æ˜¯å€‹å¥½é¸æ“‡\n\n### æ¢æ¬¾14 ä»”ç´°è€ƒæ…®è³‡æºç®¡ç†é¡åˆ¥çš„ Copy è¡Œç‚º\n- Smart Pointer é‚£é¡çš„è³‡æºç®¡ç†å™¨ï¼Œé©åˆç”¨ä¾†æŒæ¡ heap-based resource çš„ç”Ÿå‘½é€±æœŸã€‚\n- ä¸¦éæ‰€æœ‰çš„è³‡æºç‰©ä»¶ï¼Œéƒ½é©åˆç”¨ Smart Pointer ç®¡ç†ã€‚\n- æ›¸ä¸­ä»¥ [[Mutex]] (äº’æ–¥é–) èˆ‰ä¾‹ã€‚\n\n\u003e [!Todo]\n\u003e 1. æŸ¥ä¸€æŸ¥ RAIIï¼Œé€™æ•´å€‹ç« ç¯€æˆ‘çœ‹ä¸å¤ªæ‡‚ã€‚\n\u003e 2. çœ‹åˆ° P67ï¼Œé¢å°è¤‡è£½çš„å•é¡Œé‚„æ²’çœ‹ã€‚\n\n\n\u003e [!question]\n\u003e (æ­¤è™•æ˜¯èˆŠç‰ˆï¼Œæ–°ç‰ˆæœ‰å°æ‡‰çš„æ±è¥¿å—?\n\n### æ¢æ¬¾15 åœ¨è³‡æºç®¡ç†é¡ä¸­æä¾›å°åŸå§‹è³‡æºçš„å­˜å–\n\nå„˜ç®¡ä½¿ç”¨ [[Smart Pointer]] ç®¡ç†è³‡æºå¾ˆæ–¹ä¾¿ï¼Œæˆ‘å€‘ä»æœ‰æ©Ÿæœƒéœ€è¦å–å¾—åŸå§‹çš„ Pointerã€‚Smart Pointer åŒæ™‚æœ‰æä¾›é¡¯ç¤ºä»‹é¢ (explicit) èˆ‡éš±å¼ä»‹é¢: \n- explicit : ä»¥ `get` å–å¾— Raw Pointerã€‚\n- implicit : `operator*`, `operator-\u003e`ã€‚\n\n### æ¢æ¬¾16 æˆå°çš„ä½¿ç”¨ `new` å’Œ `delete` ä¸¦æ¡ç”¨ç›¸åŒå‹å¼\n1. ç›¡å¯èƒ½ä¸è¦ç”¨ C-style Array\n2. STLæ‰€æä¾›çš„ vector, string ç­‰ templates å¯ä»¥é™ä½å° Array çš„éœ€æ±‚ï¼Œæ¸›å°‘éŒ¯èª¤çš„ç™¼ç”Ÿã€‚\n\n\n### æ¢æ¬¾17 ä»¥ç¨ç«‹çš„èªå¥å°‡ç‰©ä»¶æ”¾å…¥ Smart Pointer\n\n```c++\nstd::shared_ptr\u003cWidget\u003e pw(new Widget);\nprocessWidget(pw, priority());\n```\n\n[[ç‚ºä»€éº¼è¦ç”¨ç¨ç«‹å¥å°‡ç‰©ä»¶æ”¾å…¥ Smart Pointer]]\n\n## Chapter 4 è¨­è¨ˆèˆ‡å®£å‘Š\n### æ¢æ¬¾18 è®“ä»‹é¢å®¹æ˜“è¢«ä½¿ç”¨ã€é˜²ç¯„èª¤ç”¨\n\n[[è®“ä»‹é¢æ˜“æ–¼è¢«ä½¿ç”¨ï¼Œä¸æ˜“èª¤ç”¨]]\n\n### æ¢æ¬¾19 è¨­è¨ˆ Class çŒ¶å¦‚è¨­è¨ˆ Type\nè¨­è¨ˆ Class è«‹éµå®ˆæº–å‰‡æƒ³éä¸€é: [[è¨­è¨ˆæ–° Class çš„æº–å‰‡]]\n\n### æ¢æ¬¾20 ä»¥ Pass by Const Ref å–ä»£ Pass by Value \n\nåˆç†çš„ Pass by value å¹¾ä¹åªæœ‰ä¸‹é¢ä¸‰ç¨®é¸æ“‡\n1. å…§å»ºå‹æ…‹\n2. STL Iterator \n3. Function Object\n\né™¤æ­¤ä¹‹å¤–ï¼ŒåŒ…å« STL Container æ‡‰ç›¡å¯èƒ½ç”¨ Pass by const reference !\n- [[æ€ç¶­èª¤å€-ç‰©ä»¶å¾ˆå°å°±å¯ä»¥ Pass By Value]]\n\n### æ¢æ¬¾21 ç•¶å¿…é ˆå›å‚³ç‰©ä»¶æ™‚ï¼Œä¸è¦è€ƒæ…®å›å‚³ Reference \n\nçµ•å°ä¸è¦\n 1. å°‡ Pointer æˆ– Reference æŒ‡å‘ä¸€å€‹ local ç‰©ä»¶å›å‚³ã€‚\n 2. è®“ Reference æŒ‡å‘ heap-based object (`new`)\n 3. ç•¶è¨­è¨ˆå‡ºã€Œå›å‚³ ptr/ref æŒ‡å‘ local staticã€ï¼Œä¸¦ä¸”æœ‰å¾ˆå¤šå€‹ç‰©ä»¶éƒ½æ¡ç”¨é€™ç¨®å½¢å¼æ™‚æé«˜è­¦è¦ºï¼Œå¾ˆæœ‰å¯èƒ½èµ°å…¥äº† Bad designã€‚å°æ–¼æ€éº¼æ¨£æ˜¯ã€Œåˆç†ã€ä½¿ç”¨ Local static object : åƒè¦‹ [[Static Object]]ã€‚\n\n\n### æ¢æ¬¾22 å°‡æˆå“¡è®Šæ•¸å®£å‘Šæˆ Private\n\n- åªæä¾›å¿…è¦çš„ Getter çµ¦å®¢æˆ¶ç«¯ï¼Œéš±è—ä½ çš„å¯¦ä½œæœ‰çµ•ä½³çš„å¥½è™•ã€‚\n- [[Protected èˆ‡ Public éƒ½æ˜¯ä½å°è£åº¦çš„ Access Level]]\n\n\n### æ¢æ¬¾23 å¯§ä»¥non-member, non-friendæ›¿æ› memberå‡½æ•¸\n\né€™æ¢æ˜¯é‡å° Object-Oriented C++ çš„æ³•å‰‡ï¼Œ[[Non-member \u0026\u0026 Non-friend Function çš„å°è£åº¦å„ªæ–¼ Member Function]]ã€‚\nç«™åœ¨ Template C++ åˆæœ‰å…¶ä»–éœ€è¦è€ƒæ…®çš„åœ°æ–¹ï¼Œå½¢æˆäº† [[éœ€è¦å‹åˆ¥è½‰æ›æ™‚è«‹ç‚ºæ¨¡æ¿å®šç¾©éæˆå“¡å‡½å¼]]ã€‚\n\n\n### æ¢æ¬¾24 å¦‚æœæ‰€æœ‰çš„åƒæ•¸éƒ½éœ€è¦å‹åˆ¥è½‰æ›ï¼Œè«‹ç‚ºæ­¤æ¡ç”¨ non-member å‡½å¼\n[[ç•¶æ‰€æœ‰çš„åƒæ•¸éƒ½éœ€è¦å‹åˆ¥è½‰æ›ï¼Œæ¡ç”¨ Non-member Function]]\n\n\n### æ¢æ¬¾25 è€ƒæ…®å¯«å‡ºä¸€å€‹ä¸æ‹‹ç•°å¸¸çš„ Swap å‡½å¼\n[[Swap and pimpl]]\n\n\u003e [!danger]\n\u003e è®€åˆ° P111ï¼Œæˆ‘æ‡·ç–‘ C++11 ä¹‹å¾Œæœ‰ä¸åŒçš„åšæ³•ï¼Œå…ˆä¸ç´°çœ‹ã€‚\n\n\n---\n\n## Ch5 Implementation\n### æ¢æ¬¾26 ç›¡å¯èƒ½å»¶å¾Œè®Šæ•¸å®šç¾©å¼çš„å‡ºç¾æ™‚é–“\nç›¡å¯èƒ½ç­‰åˆ°å·²ç¶“æ“æœ‰åˆå§‹å€¼äº†ï¼Œå†ä¸€å£æ°£å®šç¾©+è³¦äºˆåˆå§‹å€¼ã€‚å¦‚æ­¤ä¸å¿…èª¿ç”¨å¤šé¤˜çš„ constructor ! \n- [[ç›¡å¯èƒ½å»¶å¾Œè®Šæ•¸å®šç¾©å¼çš„å‡ºç¾æ™‚é–“]]\n\n\n### æ¢æ¬¾27 å°‘åšè½‰å‹å‹•ä½œ (Minimize Casting)\n- å¦‚æœè½‰å‹æ˜¯å¿…è¦çš„ï¼Œè©¦åœ–æŠŠå®ƒéš±è—åœ¨å‡½å¼ä¹‹å¾Œï¼Œä¸è®“ User åœ¨ä»–å€‘çš„ç¨‹å¼ä¸­è½‰å‹ã€‚\n- ä½œç‚º Clientï¼Œå¦‚æœéœ€è¦è½‰å‹ï¼Œè€ƒæ…®ä½¿ç”¨æ–°å¼çš„è½‰å‹ï¼Œå³ä½¿ç”¨èˆŠå¼çœ‹èµ·ä¾†ä¹Ÿåˆæƒ…åˆç†ã€‚\n[[å°‘åšè½‰å‹å‹•ä½œ(Minimize casting)]]\n\n### æ¢æ¬¾28 é¿å…å‚³å› Handles æŒ‡å‘ç‰©ä»¶å…§éƒ¨æˆåˆ†\n[[é¿å…å‚³å› Handles æŒ‡å‘ç‰©ä»¶çš„ Private \u0026 Protected Member Data]]ï¼Œç›®çš„æ˜¯ç›¡å¯èƒ½æ¶ˆæ»… dangling handles å‡ºç¾çš„å¯èƒ½ã€‚\n\n\n### æ¢æ¬¾29 ç‚ºç•°å¸¸å®‰å…¨ (Exception-safe) è€ŒåŠªåŠ›æ˜¯å€¼å¾—çš„\n\n[[ç‚ºç•°å¸¸å®‰å…¨ (Exception-safe) è€ŒåŠªåŠ›æ˜¯å€¼å¾—çš„]]\n\n\u003e [!Todo]\n\u003e Read to P132\n \n### æ¢æ¬¾30 é€å¾¹äº†è§£ Inline\n\nå®£å‘Š inline å‰ï¼Œå…ˆé€å¾¹è®€å®Œ: [[äº†è§£ Inline çš„è£¡è£¡å¤–å¤–]]\n\n### æ¢æ¬¾31 å°‡æª”æ¡ˆé–“çš„ç·¨è­¯ä¾å­˜é™åˆ°æœ€ä½\n[[å°‡æª”æ¡ˆçš„ç·¨è­¯ä¾å­˜é—œä¿‚é™åˆ°æœ€ä½]]\n\n\n---\n\n## Ch6 ç¹¼æ‰¿èˆ‡ç‰©ä»¶å°å‘\n\n### æ¢æ¬¾32 ç¢ºå®š Public ç¹¼æ‰¿å¡‘é€ å‡º is-a é—œä¿‚\n[[ç¢ºä¿ Derived Class å’Œ Base Class ä¹‹é–“å¿…ç„¶ä¿æŒ Is-a é—œä¿‚]]\n\nPublic inheritance æ„å‘³è‘— Is-A é—œä¿‚ï¼ŒPrivate inheritance çš„æ„ç¾©å‰‡å®Œå…¨ä¸åŒ [[å¯©æ…çš„ä½¿ç”¨ Private ç¹¼æ‰¿]]ã€‚\n\n\n\n\n### æ¢æ¬¾33 é¿å…é®æ©ç¹¼æ‰¿è€Œä¾†çš„åç¨±\nç•¶ Base Class å’Œ Drived Class æœ‰ç›¸åŒåç¨±çš„ function ä½†ä¸åŒ signature æ™‚ï¼Œoverride ä¸æœƒç™¼ç”Ÿï¼Œè€Œæ˜¯ç›´æ¥è¦†è“‹æ‰ Base Class çš„ functionï¼Œç­‰åŒæ–¼ Drived Class çš„ function è„«é›¢äº† Base Class çš„æŒæ§ï¼Œé€™å°±æ˜¯æœ¬æ¢æ¬¾æƒ³å¼·èª¿çš„: é€™å€‹è¡Œç‚ºé®æ©äº†ç¹¼æ‰¿ä¾†çš„åå­—ã€‚\n\n[[ä½¿ç”¨é—œéµå­— using è®“ç‰¹å®š function åœ¨ Scope å…§å¯è¦‹]]\n[[override]]\n\n### æ¢æ¬¾34 å€åˆ†ä»‹é¢ç¹¼æ‰¿èˆ‡å¯¦ä½œç¹¼æ‰¿\né€é Pure virtual function, Impure virtual, non-virtual function ä¸‰ç¨® function å€åˆ† Base Class Designer çš„æ„åœ–ã€‚\n\n[[å€åˆ†ä»‹é¢ç¹¼æ‰¿(interface)å’Œå¯¦ä½œç¹¼æ‰¿(implement)]]\n\n### æ¢æ¬¾35 è€ƒæ…® Virtual å‡½å¼ä»¥å¤–çš„å…¶ä»–é¸æ“‡\né™¤äº† Virtual functionï¼Œæˆ‘å€‘é‚„æœ‰å…¶ä»–æ‰‹æ³•å¯ä»¥é”åˆ°ã€Œè®“ Derived Class æä¾›ç›¸åŒçš„ä»‹é¢ã€ä¸åŒå¯¦ä½œçš„æ‰‹æ³•ã€\n- [[è—‰ç”± Non-Virtual Interface æ‰‹æ³•å¯¦ç¾ Template Method Pattern]]\n- [[è—‰ç”± Function Pointer å’Œ tr1 function æ‰‹æ³•å¯¦ç¾ Strategy Pattern]]\n\n### æ¢æ¬¾36 çµ•ä¸é‡æ–°å®šç¾©ç¹¼æ‰¿ä¾†çš„ Non-virtual Function\n[[çµ•ä¸é‡æ–°å®šç¾©ç¹¼æ‰¿ä¾†çš„ Non-virtual Function]]\n\n### æ¢æ¬¾37 çµ•ä¸é‡æ–°å®šç¾©ç¹¼æ‰¿ä¾†çš„é è¨­åƒæ•¸å€¼\n[[éœæ…‹ç¶å®š (statically bound) èˆ‡å‹•æ…‹ç¶å®š (dynamically bound)]]\n\n### æ¢æ¬¾38 ç¢ºå®š Composition å¡‘é€ çš„æ˜¯ Has-A é—œä¿‚æˆ–æ ¹æ“šæŸç‰©å¯¦ä½œçš„é—œä¿‚\n\nModel \"has-a\" or \"is-implemented in terms of \" through composition.\n[[ç¢ºå®š Composition å¡‘é€ çš„æ˜¯ 'Has-A'é—œä¿‚ æˆ– 'æ ¹æ“šæŸç‰©å¯¦ä½œ'çš„é—œä¿‚]]\n\n### æ¢æ¬¾39 æ˜æ™ºå¯©æ…çš„ä½¿ç”¨ Private ç¹¼æ‰¿\n[[å¯©æ…çš„ä½¿ç”¨ Private ç¹¼æ‰¿]]\n\n### æ¢æ¬¾40 æ˜æ™ºå¯©æ…çš„ä½¿ç”¨å¤šé‡ç¹¼æ‰¿\n[[å¤šé‡ç¹¼æ‰¿ (Multiple Inheritance, MI)]]\n\n\n## Ch7 Template and Generic Programming\n[[Template çš„ç”¨é€”]]\n\n\n### æ¢æ¬¾41 äº†è§£éš±å¼ä»‹é¢å’Œç·¨è­¯å¤šå‹\n[[Template èˆ‡éš±å¼ä»‹é¢]]\n\n### æ¢æ¬¾42 äº†è§£ typename çš„é›™é‡æ„ç¾©\n[[é—œéµå­— typename åœ¨ Template ä¸­çš„æ„æ¶µ]]\n\n### æ¢æ¬¾43 å­¸ç¿’è™•ç†æ¨¡æ¿åŒ–åŸºç¤é¡åˆ¥å…§çš„åç¨±\nknow how to access names in templatized base classes.\n[[äº†è§£å¦‚ä½•åœ¨ Template ä¸­æŒ‡æ¶‰ Base Class æˆå“¡]]\n\n### æ¢æ¬¾44 å°‡èˆ‡åƒæ•¸ç„¡é—œçš„ç¨‹å¼ç¢¼æŠ½é›¢ Templates\n[[Template å¸¶ä¾†çš„ç¨‹å¼ç¢¼è†¨è„¹]]\n\n### æ¢æ¬¾45 é‹ç”¨æˆå“¡å‡½å¼æ¨¡æ¿æ¥å—æ‰€æœ‰ç›¸å®¹å‹åˆ¥\n[[é‹ç”¨æˆå“¡å‡½å¼æ¨¡æ¿ï¼Œæ¥å—æ‰€æœ‰ç›¸å®¹çš„å‹åˆ¥]]\n\n\n### æ¢æ¬¾46 éœ€è¦å‹åˆ¥è½‰æ›æ™‚è«‹ç‚ºæ¨¡æ¿å®šç¾©éæˆå“¡å‡½å¼\n\n\n- [[éœ€è¦å‹åˆ¥è½‰æ›æ™‚è«‹ç‚ºæ¨¡æ¿å®šç¾©éæˆå“¡å‡½å¼]]\n\n### æ¢æ¬¾47 è«‹ä½¿ç”¨ Traits Classes è¡¨ç¾å‹åˆ¥è³‡è¨Š\n\n### æ¢æ¬¾48 èªè­˜ Template è¶…ç·¨ç¨‹\n\n## Ch8 è‡ªè¨‚ new å’Œ delete\n\n### æ¢æ¬¾49 äº†è§£ new-handler çš„è¡Œç‚º\n\n### æ¢æ¬¾50 äº†è§£ new å’Œ delete çš„åˆç†æ›¿æ›æ™‚æ©Ÿ\n\n### æ¢æ¬¾51 ç·¨å¯« new å’Œ delete æ™‚éœ€å›ºå®ˆå¸¸è¦\n\n### æ¢æ¬¾52 å¯«äº† placement new ä¹Ÿè¦å¯« placement delete\n\n\n\n## Ch9 é›œé …è¨è«–\n### æ¢æ¬¾53 ä¸è¦è¼•å¿½é‚Šç¾©å™¨çš„è­¦å‘Š\n\n### æ¢æ¬¾54 è®“è‡ªå·±ç†Ÿæ‚‰åŒ…åˆ® TR1 åœ¨å…§çš„æ¨™æº–å‡½å¼åº«\n[[Item54 Familiarize yourself with the standard library including TR1]]\n\n### æ¢æ¬¾55 è®“è‡ªå·±ç†Ÿæ‚‰ Boost\n\n[[Item55 Familiarize yourself with Boost]]\n\n\nç°¡é«”ç›®éŒ„: https://blog.csdn.net/weixin_45926547/article/details/121276226\n","lastmodified":"2023-09-05T15:34:45.954894749Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Effective-modern-C++-Outline":{"title":"Effective modern C++ Outline","content":"## å¤–éƒ¨è³‡æº\n- [ç¶²å‹ä¸­è­¯ç‰ˆ](https://github.com/CnTransGroup/EffectiveModernCppChinese)\n\n## Deducing Types\n\n### æ¢æ¬¾1 äº†è§£ Template çš„å‹åˆ¥æ¨æ–·è¦å‰‡\n[[Template ParamType deduction]]\n\n### æ¢æ¬¾2 äº†è§£ auto çš„å‹åˆ¥æ¨æ–·è¦å‰‡\n\n\n### æ¢æ¬¾3 äº†è§£ decltype\n\n\n### æ¢æ¬¾4 äº†è§£å¦‚ä½•æª¢è¦–å‹åˆ¥æ¨æ–·\n\n## auto\nItem 5: Prefer auto to explicit type declarations\nItem 6: Use the explicitly typed initializer idiom when auto deduces\nundesired types\n\n## Moving to Modern C++\nItem 7: Distinguish between () and {} when creating objects\nItem 8: Prefer nullptr to 0 and NULL\n### Item 9: Prefer alias declarations to typedefs\n[[typedef and using]]\n\nItem 10: Prefer scoped enums to unscoped enums\nItem 11: Prefer deleted functions to private undefined ones\nItem 12: Declare overriding functions override\n## æ¢æ¬¾12 å°è¦ override çš„ function ä»¥é—œéµå­— override æ˜ç¢ºå®£å‘Š \n[[override]]\nItem 13: Prefer const_iterators to iterators\nItem 14: Declare functions noexcept if they wonâ€™t emit exceptions\n[[Modern C++ noexcept]]\n\nItem 15: Use constexpr whenever possible\n[[Item15 constexpr]]\nItem 16: Make const member functions thread safe\nItem 17: Understand special member function generation\n\n## Smart Pointers\nItem 18: Use std::unique_ptr for exclusive-ownership resource management\nItem 19: Use std::shared_ptr for shared-ownership resource management\nItem 20: Use std::weak_ptr for std::shared_ptr-like pointers that can dangle\nItem 21: Prefer std::make_unique and std::make_shared to direct use of new\nItem 22: When using the Pimpl Idiom, define special member functions in the implementation file\n\n## Rvalue References, Move Semantics, and Perfect Forwarding\nItem 23: Understand std::move and std::forward\nItem 24: Distinguish universal references from rvalue references\nItem 25: Use std::move on rvalue references, std::forward on universal references\nItem 26: Avoid overloading on universal references\nItem 27: Familiarize yourself with alternatives to overloading on universal references\nItem 28: Understand reference collapsing\nItem 29: Assume that move operations are not present, not cheap, and not used\nItem 30: Familiarize yourself with perfect forwarding failure cases\n\n## Lambda Expressions\nItem 31: Avoid default capture modes\nItem 32: Use init capture to move objects into closures\nItem 33: Use decltype on auto\u0026\u0026 parameters to std::forward them\nItem 34: Prefer lambdas to std::bind\n\n## The Concurrency API\nItem 35: Prefer task-based programming to thread-based\nItem 36: Specify std::launch::async if asynchronicity is essential\nItem 37: Make std::threads unjoinable on all paths\nItem 38: Be aware of varying thread handle destructor behavior\nItem 39: Consider void futures for one-shot event communication\nItem 40: Use std::atomic for concurrency, volatile for special memory\n\n## Tweaks\nItem 41: Consider pass by value for copyable parameters that are cheap to move and always copied\nItem 42: Consider emplacement instead of insertion\n\n## Item1 Template ParamType deduction\n\n\n\n## åƒè€ƒä¸­æ–‡\n###   æ¨æ–·å‹åˆ¥\n\né …ç›®1ï¼šç†è§£æ¨¡æ¿å‹åˆ¥æ¨æ–· é …ç›®2ï¼šç†è§£è‡ªå‹•å‹åˆ¥æ¨æ–· é …ç›®3ï¼šç†è§£decltype é …ç›®4ï¼šäº†è§£å¦‚ä½•æŸ¥çœ‹æ¨æ–·çš„å‹åˆ¥\n\n## auto\n\né …ç›®5ï¼šå„ªå…ˆä½¿ç”¨autoè€Œéé¡¯å¼å‹åˆ¥è²æ˜ é …ç›®6ï¼šåœ¨autoæ¨æ–·å‡ºä¸å¸Œæœ›çš„å‹åˆ¥æ™‚ä½¿ç”¨é¡¯å¼å‹åˆ¥åˆå§‹åŒ–æƒ¯ç”¨æ³•\n\n## é·ç§»åˆ°ç¾ä»£C++\n\né …ç›®7ï¼šåœ¨å‰µå»ºå°è±¡æ™‚å€åˆ†()å’Œ{} é …ç›®8ï¼šå„ªå…ˆä½¿ç”¨nullptrè€Œé0å’ŒNULL é …ç›®9ï¼šå„ªå…ˆä½¿ç”¨åˆ¥åå®£å‘Šè€Œétypedef é …ç›®10ï¼šå„ªå…ˆä½¿ç”¨æœ‰ä½œç”¨åŸŸçš„æšèˆ‰è€Œéç„¡ä½œç”¨åŸŸçš„æšèˆ‰ é …ç›®11ï¼šå„ªå…ˆä½¿ç”¨å·²åˆªé™¤çš„å‡½æ•¸è€Œéç§æœ‰çš„æœªå®šç¾©å‡½æ•¸ é …ç›®12ï¼šè²æ˜è¦†è“‹çš„å‡½æ•¸ä½¿ç”¨override é …ç›®13ï¼šå„ªå…ˆä½¿ç”¨const_iteratorsè€Œéiterators é …ç›®14ï¼šå¦‚æœå‡½æ•¸ä¸æœƒå¼•ç™¼ç•°å¸¸ï¼Œè²æ˜å‡½æ•¸ç‚ºnoexcept é …ç›®15ï¼šç›¡å¯èƒ½ä½¿ç”¨constexpr é …ç›®16ï¼šä½¿constæˆå“¡å‡½æ•¸ç·šç¨‹å®‰å…¨ é …ç›®17ï¼šç†è§£ç‰¹æ®Šæˆå“¡å‡½æ•¸çš„ç”Ÿæˆ\n\n## æ™ºèƒ½æŒ‡é‡\n\né …ç›®18ï¼šä½¿ç”¨std::unique_ptré€²è¡Œç¨å æ€§è³‡æºç®¡ç† é …ç›®19ï¼šä½¿ç”¨std::shared_ptré€²è¡Œå…±äº«æ€§è³‡æºç®¡ç† é …ç›®20ï¼šä½¿ç”¨std::weak_ptrè¡¨ç¤ºå¯ä»¥æ‡¸ç©ºçš„std::shared_ptræŒ‡é‡ é …ç›®21ï¼šå„ªå…ˆä½¿ç”¨std::make_uniqueå’Œstd::make_sharedï¼Œè€Œéç›´æ¥ä½¿ç”¨new é …ç›®22ï¼šåœ¨å¯¦ç¾æ–‡ä»¶ä¸­å®šç¾©ç‰¹æ®Šæˆå“¡å‡½æ•¸æ™‚ä½¿ç”¨PimplæŠ€æ³•\n\n## Rvalueå¼•ç”¨ã€ç§»å‹•èªç¾©å’Œå®Œç¾è½‰ç™¼\n\né …ç›®23ï¼šç†è§£std::moveå’Œstd::forward é …ç›®24ï¼šå€åˆ†è¬èƒ½å¼•ç”¨å’Œå³å€¼å¼•ç”¨ é …ç›®25ï¼šå°å³å€¼å¼•ç”¨ä½¿ç”¨std::moveï¼Œå°è¬èƒ½å¼•ç”¨ä½¿ç”¨std::forward é …ç›®26ï¼šé¿å…å°è¬èƒ½å¼•ç”¨é€²è¡Œé‡è¼‰ é …ç›®27ï¼šç†Ÿæ‚‰åœ¨è¬èƒ½å¼•ç”¨ä¸Šé€²è¡Œé‡è¼‰çš„æ›¿ä»£æ–¹æ¡ˆ é …ç›®28ï¼šç†è§£å¼•ç”¨æŠ˜ç–Š é …ç›®29ï¼šå‡è¨­ç§»å‹•æ“ä½œä¸å­˜åœ¨ã€ä¸å»‰åƒ¹ä¸”ä¸è¢«ä½¿ç”¨ é …ç›®30ï¼šç†Ÿæ‚‰å®Œç¾è½‰ç™¼å¤±æ•—çš„æƒ…æ³\n\n\n### Item5\n[[C++11 std function]]\n\n\n","lastmodified":"2023-09-05T15:34:45.954894749Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Friend-Function":{"title":"Friend Function","content":"\n\u003e æä¾›ç§ç”¨æˆå“¡çµ¦æŸäº›å¤–éƒ¨å‡½å¼ä¾†å­˜å–ï¼Œé€™å€‹æœ‰æ¬Šèª¿ç”¨æŸé¡åˆ¥ç§æœ‰æˆå“¡çš„å‡½å¼å°±ç¨±ç‚º Friend Function \n\nFriend Function å¯¦è³ªä¸Šå®šç¾©åœ¨å¤–é¢ï¼Œä½†æ˜¯åœ¨ Class å…§éƒ¨éœ€è¦ç”¨ keyword `friend` å†æåŠä¸€æ¬¡è©² functionã€‚å› æ­¤ï¼ŒFriend Function æ˜¯ Non-member function !\n\n```cpp\nclass Ball;\n\nint compare(Ball \u0026b1, Ball \u0026b2) {\n    // å¯ç›´æ¥å­˜å–ç§ç”¨æˆå“¡\n    if(b1._radius == b2._radius)\n        return 0;\n    else if(b1._radius \u003e b2._radius)\n        return 1;\n    else\n        return -1;\n}\n\nclass Ball { \npublic: \n    Ball(double, char*); \n    void radius(double radius) {\n        _radius = radius;\n    } \n    // å®£å‘Šæœ‹å‹å‡½å¼ \n    friend int compare(Ball\u0026, Ball\u0026);\n \nprivate:\n    double _radius; // åŠå¾‘\n};\n```\n\n\n\n\n\n\n\n## Resource\n\n[friend å‡½å¼ã€friend é¡åˆ¥](https://openhome.cc/Gossip/CppGossip/friendFunctionClass.html)\n","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Function-As-an-Argument":{"title":"Function As an Argument","content":"\n\u003e Array ä¸¦ä¸æ˜¯ C++ ä¸­å”¯ä¸€å¯ä»¥ decay æˆ pointer çš„æ±è¥¿ã€‚function type ä¹ŸåŒæ¨£çš„å¯ä»¥ decay æˆ function pointerã€‚\n\nFunction Argument åœ¨ Template Type Deduction çš„åŸå‰‡è·Ÿ Array Argumnet æ˜¯ä¸€æ¨£çš„ã€‚\n```cpp\nvoid func(int double); // function Type: void(int, double)\n\ntemplate \u003ctypename T\u003e\nvoid f1(T param);\n\ntemplate \u003ctypename T\u003e\nvoid f2(T\u0026 param);\n```\n\næŠŠ `func` æ”¾å…¥ `f1` èˆ‡ `f2` å¾Œï¼Œå‹æ…‹æ¨æ–·å¦‚ä¸‹: \n|  Code   | ParamType  | `T`|\n|  ----  | ----  | ---|\n| `f1(func)`  | `void (*) (int, double)` |`void (*) (int, double)`|\n|  `f2(func)` | `void (\u0026) (int, double)` | `void (int, double)`|\n","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Identify-Initialization-and-Assignment":{"title":"Identify Initialization and Assignment","content":"\n\u003e C++ è¦å®šï¼Œmember data initialization ç™¼ç”Ÿåœ¨**é€²å…¥ Constructor ä¹‹å‰**ã€‚åœ¨ Constructor è³¦å€¼å±¬æ–¼ assignmentã€‚ æ­£ç¢ºçš„ initialization æ˜¯ä½¿ç”¨ member initialization list (æˆå“¡åˆå€¼åˆ—)ï¼Œå–ä»£è³¦å€¼ (assignment)ã€‚\n\næ­¤ä¾‹ä¸­ï¼Œç¬¬ä¸€ç¨®çš„åšæ³•æ•ˆç‡å¥½: \n- ç¬¬ä¸€ç¨®ä½œæ³•ä½¿ç”¨  member initialization list æ˜¯å° member data åš Copy Constructã€‚\n- ç¬¬äºŒç¨®ä½œæ³• `m_name`æœƒéš±å«çš„ call ä¸€æ¬¡ `std::string` çš„ default constructorï¼Œå†ä»¥ Copy assignment è¢«è³¦äºˆå€¼\n\n```cpp\nclass Book {\nÂ  Â  private:\nÂ  Â  Â  Â  std::string m_name;\nÂ  Â  public:\nÂ  Â  Â  Â  // good way\nÂ  Â  Â  Â  Book(const std::string\u0026 name): m_name { // copy construct\nÂ  Â  Â  Â  }\nÂ  Â  Â  Â  // bad way\nÂ  Â  Â  Â  Book(const std::string\u0026 name) {\nÂ  Â  Â  Â  Â  Â  m_name = name; Â // copy assignment\nÂ  Â  Â  Â  }\n}\n```\n","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Implicit-TemplateInstantiation":{"title":"Implicit TemplateInstantiation","content":"\u003e Occurs when a template is used to declare a pointer variable or a variable with the provided arguments","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Impure-Virtual-Function":{"title":"Impure Virtual Function","content":"```cpp\nclass Airport { ... }; // represents airports\nclass Airplane {\npublic:\n\tvirtual void fly(const Airport\u0026 destination);\n...\n};\nvoid Airplane::fly(const Airport\u0026 destination)\n{\n\t// default code for flying an airplane to the given destination\n}\nclass ModelA: public Airplane { ... };\nclass ModelB: public Airplane { ... };\n```\n\nç›¸ç•¶æ–¼å‘Šè¨´ Client: ä½ éœ€è¦æä¾›ä¸€å€‹é€™æ¨£çš„å‡½å¼ï¼Œå¦‚æœä¸æƒ³è‡ªå·±å¯«ï¼Œå¯ä»¥ç”¨é è¨­çš„å…§å®¹! \n\nä½†æ˜¯ï¼Œè®“ impure virtual function åŒæ™‚æ“”ä»»ã€Œè¦æ±‚ client çµ¦ä¸€å€‹é€™æ¨£çš„å‡½å¼ã€åˆåœ¨ã€Œå¯¦ä½œä¸­æ”¾äº†é è¨­è¡Œç‚ºï¼Œç›¸ç•¶æ–¼å‡è¨­æ‰€æœ‰çš„ Derived Class éƒ½å¯ä»¥æ¥å—é€™å€‹é è¨­è¡Œç‚ºã€å¯èƒ½å°è‡´å…¶ä»–å•é¡Œ: Client ç«¯æ²’æœ‰ä¸»å‹•èªªæ˜ã€Œæˆ‘è¦é€™å€‹é è¨­è¡Œç‚ºã€ã€‚\nç•¶ Client ç«¯å¿½ç•¥äº†æœ‰é€™å€‹ function è¦ overrideï¼Œå°±æœƒå°è‡´éŒ¯èª¤ -- è©² Derived å¯èƒ½ç„¡æ³•åŸ·è¡Œé€™å€‹é è¨­è¡Œç‚ºã€‚\n\n## æŠŠé è¨­è¡Œç‚ºè·Ÿæä¾›ä»‹é¢åˆ‡é–‹\nä¸€å€‹å¥½çš„åšæ³•æ˜¯--æ–·é–‹å…©è€…çš„é€£çµã€‚åˆ©ç”¨ [[Pure Virtual Function]] æåˆ°çš„åšæ³•ï¼ŒæŠŠé è¨­çš„å¯¦ä½œå¯«åœ¨ Pure Virtual Function è£¡é¢ï¼Œç•¶ Derived æƒ³è¦ç”¨é è¨­å¯¦ä½œæ™‚è‡ªå·±å» call å°±å¥½ã€‚\n\n\n```cpp\nclass Airplane {\npublic:\n\tvirtual void fly(const Airport\u0026 destination) = 0; // æä¾›ä»‹é¢\n}\n\nvoid Airplane::fly(const Airport\u0026 destination)\n{ // ç‚º pure virtual function æä¾›å¯¦ä½œ\n\tdefault code for flying an airplane to the given destination\n}\n\nclass ModelA: public Airplane {\npublic:\nvirtual void fly(const Airport\u0026 destination)\n{ Airplane::fly(destination); }\n};\n\nclass ModelC: public Airplane {\npublic:\nvirtual void fly(const Airport\u0026 destination);\n...\n};\nvoid ModelC::fly(const Airport\u0026 destination)\n{ // ModelC ä¸ç”¨é è¨­çš„å¯¦ä½œï¼Œå°±ä¸è¦ Call Airplane::flyï¼Œè‡ªå·±å¯«\ncode for flying a ModelC airplane to the given destination\n}\n```","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":[]},"/notes/Project/Effective-C++-Series/Item15-constexpr":{"title":"Item15 constexpr","content":"","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["empty","cpp11"]},"/notes/Project/Effective-C++-Series/Item47-Use-traits-classes-for-information-about-types":{"title":"Item47 Use traits classes for information about types","content":"","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["empty"]},"/notes/Project/Effective-C++-Series/Item54-Familiarize-yourself-with-the-standard-library-including-TR1":{"title":"Item54 Familiarize yourself with the standard library including TR1","content":"","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["empty"]},"/notes/Project/Effective-C++-Series/Item55-Familiarize-yourself-with-Boost":{"title":"Item55 Familiarize yourself with Boost","content":"","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["empty"]},"/notes/Project/Effective-C++-Series/Member-Function-Template":{"title":"Member Function Template","content":"ä¸¦ä¸é™ç”¨æ–¼ constructorï¼Œå®ƒå¸¸è¢«ç”¨ä¾†è™•ç†è³¦å€¼æ“ä½œã€‚\n\nä»¥ `shared_ptr` ç‚ºä¾‹ï¼Œå®ƒçš„ copy ctor å¯ä»¥æ¥å— `weak_ptr` èˆ‡ `shared_ptr` (ä¸é™æ­¤äºŒé¡ï¼Œæ²’æœ‰å…¨åˆ—)ã€‚ä¸”åŒ…å« copy assignment ä¹Ÿæ˜¯é€é member function template é”æˆã€‚\n\nåªä¸é constructor é¡çš„ï¼Œé™¤äº† generic copy constructor (æ¥æ”¶ shared pointer type çš„) æ˜¯æ¥å—éš±å¼è½‰æ›çš„ï¼Œ \n\n```cpp\ntemplate\u003cclass T\u003e class shared_ptr {\npublic:\n\t// constructor\n\ttemplate\u003cclass Y\u003e // construct from\n\texplicit shared_ptr(Y * p); // any compatible\n\t// copy ctor for share_ptr type \n\ttemplate\u003cclass Y\u003e // built-in pointer,\n\tshared_ptr(shared_ptr\u003cY\u003e const\u0026 r); // shared_ptr,\n\t// copy ctor for weak_ptr type \n\ttemplate\u003cclass Y\u003e // weak_ptr, or\n\texplicit shared_ptr(weak_ptr\u003cY\u003e const\u0026 r); // auto_ptr\n\t\n\ttemplate\u003cclass Y\u003e // assign from\n\tshared_ptr\u0026 operator=(shared_ptr\u003cY\u003e const\u0026 r); // any compatible\n\t\n\ttemplate\u003cclass Y\u003e // shared_ptr or\n\tshared_ptr\u0026 operator=(auto_ptr\u003cY\u003e\u0026 r); // auto_ptr\n};\n```\n\n## ç·¨è­¯å™¨ä¾ç„¶æœƒè‡ªå‹•ç”¢ç”Ÿ copying function\n\næ¢æ¬¾5ä¸­èªªåˆ°ï¼Œç·¨è­¯å™¨æœƒè‡ªå‹•ç”¢ç”Ÿä¸€äº› function: [[Default Generated Functions]]\nå„˜ç®¡ä»¥ä¸Šé€é member function template æ’°å¯«äº† copying functionï¼Œé€™ä¸æœƒé˜»æ­¢ compiler è‡ªå‹•ç”Ÿæˆ é‚£äº›é è¨­ç”Ÿæˆçš„å‡½å¼!!\n\nè©¦æƒ³ï¼Œç•¶ `T` å’Œ `U` ç›¸åŒï¼Œå‘¼å«çš„ funciton æœƒæ˜¯ compiler è‡ªå‹•ç”Ÿæˆçš„ç‰ˆæœ¬? é‚„æ˜¯æ ¹æ“šæ¨¡æ¿å‡½å¼ç”Ÿæˆä¸€å€‹ `SmartPtr(const SmartPtr\u003cTop\u003e\u0026 other)` çš„ function? \n```cpp\ntemplate\u003ctypename T\u003e\nclass SmartPtr {\npublic:\n\ttemplate\u003ctypename U\u003e // member template \n\tSmartPtr(const SmartPtr\u003cU\u003e\u0026 other); // for a â€generalized copy constructorâ€\n}\n\nSmartPtr\u003cTop\u003e pt2 = SmartPtr\u003cTop\u003e(new Top);\n```\n\nåœ¨ class å…§å®£å‘Šæ¨¡æ¿å‡½å¼ï¼Œä¸¦æœƒé˜»æ­¢ç·¨è­¯å™¨ç”Ÿæˆé è¨­çš„ copy ctor (non-template)ï¼Œå¦‚æœå¸Œæœ›å®Œå…¨æŒæ§ copy ctorï¼Œå‰‡å¿…é ˆ**éƒ½å®£å‘Š**\n```cpp\ntemplate\u003ctypename T\u003e\nclass SmartPtr {\npublic:\n\tSmartPtr(SmartPtr const\u0026 rhs); // non-template copy ctor\n\n\ttemplate\u003ctypename U\u003e // template copy ctor\n\tSmartPtr(const SmartPtr\u003cU\u003e\u0026 other); \n}\n\n```","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Member-Initialization-List":{"title":"Member Initialization List","content":"\n\u003e ç„¡è«–å¦‚ä½•ï¼Œä½¿ç”¨ member initializer list å° member data åˆå§‹åŒ–æ˜¯æœ€å¥½çš„ã€‚å„˜ç®¡é€™éº¼åšå°å…§å»ºå‹åˆ¥çš„è³‡æ–™æ²’å·®ï¼Œå°éå…§å»ºå‹åˆ¥å»æœ‰å·¨å¤§çš„æ„ç¾©ã€‚\n\nå¦‚æœä½ å°±æ˜¯æƒ³è¦ call member data çš„ default constructorï¼Œä¾ç„¶å¯ä»¥é€é member initializer list é”æˆã€‚åªè¦çµ¦äºˆç©ºæ‹¬è™Ÿï¼Œä¸å¡«å…§å®¹å³å¯ã€‚\né€™æ¨£çš„å¥½è™•æ˜¯æ˜ç™½åœ°åˆ—å‡ºæ‰€æœ‰ member dataï¼Œé¿å…æœ‰ data å¿˜è¨˜çµ¦åˆå§‹å€¼ï¼Œç‰¹åˆ¥æ˜¯å°**éå…§å»ºå‹åˆ¥**çš„member dataï¼Œæ²’æœ‰åˆå§‹åŒ–çš„çµæœæ˜¯ç½é›£çš„ã€‚\n\nå°æ–¼å…§å»ºå‹åˆ¥çš„ Reference \u0026 constï¼Œä»–å€‘**ä¸èƒ½è¢«è³¦å€¼**ï¼Œ**å¿…é ˆé€é member initializer list åˆå§‹åŒ–**ã€‚\n- Related: [[Effective C++ Outline#æ¢æ¬¾5 äº†è§£ C++é»˜é»˜ç·¨å¯«ä¸¦å‘¼å«å“ªäº›å‡½å¼]]\n\n\n## åˆç†çš„ä½¿ç”¨ Assignment\næŸäº›æ™‚å€™ï¼Œé¡åˆ¥æ“æœ‰å¤šå€‹ Constructorï¼Œæ¯å€‹ Constructor éƒ½éœ€è¦æœ‰è‡ªå·±çš„ Member initializer listï¼Œé€™åˆæœƒå°è‡´ dumplicatedã€‚\né€™æ™‚å€™å¯ä»¥æ˜¯ç•¶åœ°å°‡ä¸€äº› Assignment å’Œ Initialize æ•ˆç‡å·®ä¸å¤šçš„ member data (é€šå¸¸æ˜¯å…§å»ºå‹åˆ¥)ï¼Œç§»åˆ°ä¸€å€‹ \"çµ±ä¸€åˆå§‹åŒ–\" çš„ private functionï¼Œä¾›æ‰€æœ‰çš„ Constructor å‘¼å«ã€‚\né€™ç¨®ä½œæ³• (pseudo-initialization, å½åˆå§‹åŒ–) ç‰¹åˆ¥åœ¨æ•¸å€¼æ˜¯ç”±è®€æª”å¾—åˆ°çš„æ™‚å€™ç‰¹åˆ¥æœ‰ç”¨ï¼Œä½†å¯ä»¥çš„è©±ï¼Œç›¡å¯èƒ½ä½¿ç”¨ member initializer listã€‚\n","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Modern-C++-noexcept":{"title":"Modern C++ noexcept","content":"\n[[ç‚ºç•°å¸¸å®‰å…¨ (Exception-safe) è€ŒåŠªåŠ›æ˜¯å€¼å¾—çš„]]\nC++11 ä¸­æ–°å¢çš„ `noexcept` æœ‰å¦‚ `const` ä¸€èˆ¬ï¼Œæ˜¯ function signature çš„ä¸€éƒ¨åˆ†ã€‚\n\n\nå›ºç„¶ï¼Œåœ¨ Effective Modern C++ Item 14 ç•¶ä¸­æåŠå°‡ function æ¨™ç¤ºç‚º noexcept æ‰€å¸¶ä¾†çš„ object file optimize ç›Šè™•ã€‚ä»éœ€è¦åˆ‡è¨˜ï¼Œ`noexcept` ä¹Ÿæ˜¯ signature çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœåªæ˜¯æƒ³è¦äº«å—å„ªåŒ–çš„å¥½è™•ï¼Œè€Œæ²’æœ‰ä»”ç´°å¯©è¦– function æ˜¯å¦çœŸçš„ exception safeï¼Œç›´æ¥å°‡ API æš´éœ²çµ¦å®¢æˆ¶ç«¯ï¼Œè€Œåœ¨æ—¥å¾Œç™¼ç¾ä¸¦é exception safe è€Œæ”¶å› noexcept ä¿è­‰ï¼Œé€™å°‡åš´é‡å½±éŸ¿å®¢æˆ¶ç«¯çš„ä½¿ç”¨ã€‚\nå¤šæ•¸çš„ function æ˜¯ exception natural (ä¸­æ€§çš„)ï¼Œæ„å³ï¼Œä¸ä¸»å‹•æ‹‹å‡º exceptionï¼Œä½† exception å¯èƒ½å¾æ­¤ func æ‰€  invoke çš„ function ä¸­è¢«æ‹‹å‡ºä¾†ã€‚é€™å°±è¡¨ç¤ºæ­¤ function é exception safe\n\n\n","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Mutex":{"title":"Mutex","content":"å‡è¨­æˆ‘å€‘ç”¨ C API è™•ç† `Mutex` ç‰©ä»¶\n```cpp\nvoid lock(Mutex *pm); // lock mutex pointed to by pm\nvoid unlock(Mutex *pm); // unlock the mutex\n```\n\nä½¿ç”¨è€…éœ€è¦è‡ªå·±æ‰‹å‹•åˆ†åˆ¥å‘¼å« `lock` èˆ‡ `unlock`ã€‚ç‚ºäº†ç¢ºä¿ä¸æœƒå¿˜è¨˜å¹« Mutex è§£é–ï¼Œå¯ä»¥å»ºç«‹ä¸€å€‹ç”± RAII å®ˆå‰‡æ”¯é…çš„ Class --è³‡æºåœ¨å»ºæ§‹æœŸé–“ç²å¾—(lock)ï¼Œåœ¨è§£æ§‹æœŸé–“é‡‹æ”¾(unlock)--ä¾†ç®¡ç†è³‡æºã€ŒMutex ç‰©ä»¶ã€ã€‚\n\n```cpp\nclass Lock {\npublic:\nexplicit Lock(Mutex *pm) : mutexPtr(pm) \n\t{ lock(mutexPtr); } // acquire resource\n~Lock() { unlock(mutexPtr); } // release resource\n\nprivate:\nMutex *mutexPtr;\n};\n\n```\nè€Œå®¢æˆ¶ç«¯èª¿ç”¨ï¼Œä¹Ÿç¬¦åˆ RAII æ–¹å¼\n```cpp\nMutex m;     // define the mutex you need to use\n...\n{            // create block to define critical section\nLock ml(\u0026m); // lock the mutex\n...          // perform critical section operations\n}            // automatically unlock mutex at end of block\n```\nç¾åœ¨ï¼Œå®¢æˆ¶åœ¨ä¹Ÿä¸æœƒå› å¿˜è¨˜ç‚º  `unlock(Mutex)` è€Œå‡ºå•é¡Œ!\n\n## å¦‚æœæœ‰äººè©¦åœ–è¤‡è£½ `Lock` ?","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Non-member-Non-friend-Function-%E7%9A%84%E5%B0%81%E8%A3%9D%E5%BA%A6%E5%84%AA%E6%96%BC-Member-Function":{"title":"Non-member \u0026\u0026 Non-friend Function çš„å°è£åº¦å„ªæ–¼ Member Function","content":"\n\u003e Non-member function å¸¶ä¾†æ›´ä½³çš„å°è£åº¦ã€èˆ‡ Packaging å½ˆæ€§ã€‚\n\n\né€™é‚Šèªªçš„æ˜¯ Non-member ä¸”(AND) Non-friend function (Pure function) vs. Member Functionã€‚(é—œæ–¼ [[Friend Function]] )\n\nç‰©ä»¶å°å‘è¦æ±‚ï¼Œè³‡æ–™(data) ä»¥åŠæ“ä½œè³‡æ–™çš„å‡½å¼æ‡‰è©²ç›¡é‡ç¶åœ¨ä¸€èµ·ï¼Œä¸ä»£è¡¨ç‰©ä»¶å°å‘æ¨å´‡ member function æ˜¯æ¯”è¼ƒå¥½çš„é¸æ“‡ã€‚\n\nç‰©ä»¶å°å‘è¦æ±‚è³‡æ–™æ‡‰è©²ç›¡å¯èƒ½åœ°è¢«å°è£ï¼Œå»èˆ‡ç›´è§€ç›¸åçš„ï¼Œnon-member function çš„å°è£æ€§å„ªæ–¼  member functionã€‚ç‚ºä»€éº¼? \n\n## å°è£ç‚ºä»€éº¼å°è£è¢«æ¨å´‡? \n\u003e å°è£ä½¿å¾—æˆ‘å€‘åœ¨æ”¹è®Šäº‹ç‰©æ™‚ï¼Œåªå½±éŸ¿æœ‰é™çš„å®¢æˆ¶ã€‚\n\n- è¢«å°è£çš„æ±è¥¿è®Šå¾—ä¸å¯è¦‹ -\u003e è¶Šå¤šå°è£å°±è¶Šå°‘ client å¯ä»¥ access -\u003e å°å¯¦ä½œæ–¹è€Œè¨€ï¼Œæœ‰æ›´å¤§çš„å½ˆæ€§æ”¹è®Šå®ƒï¼Œå› ç‚ºèƒ½ access å®ƒçš„å®¢æˆ¶æœ‰é™ï¼Œæ”¹è®Šçš„å½±éŸ¿åŠ›å°ã€‚\n- é‚„æœ‰å¦ä¸€å€‹å„ªé»æ˜¯: å¸¶ä¾†åŒ…è£¹å½ˆæ€§ (packaging flexibility)ï¼Œé€™èˆ‡ Namespace \u0026 header file ç›¸é—œï¼Œå¾Œé¢æœƒæåŠã€‚\n\n## å¦‚ä½•è¡¡é‡å°è£ç¨‹åº¦\né€™å€‹å•å¥å¯ä»¥æ›å¥è©±èªªï¼Œå¦‚ä½•é‡æ¸¬ã€Œæœ‰å¤šå°‘ function å¯ä»¥çœ‹åˆ°æŸä¸€å¡Šè³‡æ–™?ã€ã€‚\n\n\u003e è¨ˆç®—èƒ½å¤ å­˜å–è©²è³‡æ–™çš„å‡½å¼ï¼Œè¶Šå¤šå‡½å¼å­˜å–å‰‡å°è£åº¦è¶Šä½ã€‚\n\nå°æ–¼ Private Member data è€Œè¨€ï¼Œèƒ½å­˜å–å®ƒçš„å°±æ˜¯æ‰€æœ‰çš„ member functionã€‚\nFriend function é›–ç„¶ä¸æ˜¯ non-member functionï¼Œä½†ä»–å’Œ member function åŒæ¨£æ“æœ‰ access private data çš„èƒ½åŠ›ï¼Œæ‰€ä»¥å…©è€…çš„å°è£åº¦æ˜¯åŒæ¨£ä½çš„ã€‚ \n\nåŒç†ï¼Œå‰é¢ç« ç¯€èªªçš„ [[Protected èˆ‡ Public éƒ½æ˜¯ä½å°è£åº¦çš„ Access Level]]ã€‚\n\n## å°‡æœ‰ç·¨è­¯ç›¸ä¾çš„å‡½å¼æ”¾åœ¨åŒä¸€å€‹ Header File\nç•¶æˆ‘å€‘éµå®ˆæœ¬é çš„å®ˆå‰‡ï¼Œæ‹†å‡ºè¨±å¤š Utility Function (å·¥å…·ç®±) ä¹‹å¾Œï¼Œè©²è€ƒæ…®å°‡ Function ä¾ç…§ç·¨è­¯ç›¸ä¾æ€§æ‹†åˆ†åˆ°ä¸åŒçš„ Header fileï¼Œåœ¨ä¸åŒçš„ Header file é–“å…±ç”¨åŒä¸€å€‹ namespace å³å¯ã€‚\n\næ›¸ä¸­ä»¥ `WebBrowser` èˆ‰ä¾‹ï¼ŒUtility Function å¯èƒ½æœ‰ cookie, bookmark, core funcion (å¹¾ä¹æ¯å€‹å®¢æˆ¶éƒ½è¦çš„ non-member function)ï¼Œcookie functions ä¹‹é–“æœ‰ç·¨è­¯ç›¸ä¾æ€§ï¼Œæ”¾åœ¨ä¸€å¡Šä»¥æ­¤é¡æ¨ã€‚\n\n```cpp\n// web_browser_core.hpp\nnamespace WebBrowserStuff {\n\t// core function\n\tclass WebBrowser;\n}\n\n// cookie.hpp\nnamespace WebBrowserStuff {\n\t// cookie functions\n}\n\n// bookmark.hpp\nnamespace WebBrowserStuff {\n\t// bookmark functions\n}\n```\n\né€™ä¹Ÿæ˜¯ STL çš„çµ„ç¹”æ–¹å¼ï¼Œç•¶ User è¦ç”¨ std::list æ™‚ä¸æœƒå» Include åˆ° `\u003cvector\u003e` é€™å€‹ header fileã€‚\n\nNamespace æä¾›ä¸€å€‹æ¯”è¼ƒå¯¬é¬†çš„çµ„ç¹”æ–¹å¼ï¼Œå³ä½¿è·¨è¶Š header file ä»èƒ½éš¸å±¬ç›¸åŒçš„ namespaceã€‚\n\nç”šè‡³å° Client è€Œè¨€ï¼Œæ“´å±• Utility Function ä¹ŸåŒæ¨£å®¹æ˜“ï¼Œåªè¦å…±ç”¨ namespace ã€åœ¨è‡ªå·±çš„ header file å¢åŠ å®¢è£½åŒ–çš„ utility function å³å¯ -- ç•¢ç«Ÿ Namespace å¯ä»¥è·¨ header file! \n\né€™æ˜¯ä»¥ Namespace çµ„ç¹”ï¼Œå„ªæ–¼ä»¥ class çµ„ç¹”çš„å¦ä¸€å€‹å¥½è™• : å° Client ç«¯è€Œè¨€ï¼Œä»–å€‘ç„¡æ³•æ”¹è®Š Class çš„å®šç¾©å¼ï¼Œä½† namespace ä»–å€‘å¯ä»¥è‡ªç”±å…±ç”¨ã€‚\n\n## æœ‰è‘—ç¹¼æ‰¿ä¹Ÿç„¡æ³•å–ä»£çš„å„ªé»\n\nç•¶ç„¶ï¼Œä¸èƒ½æ”¹è®Šå®šç¾©å¼ï¼Œç¹¼æ‰¿æ˜¯å€‹è§£æ±ºæ–¹æ³•ã€‚\n\nç„¶è€Œ C++ çš„ç¹¼æ‰¿ä¸­ï¼ŒChild æ˜¯ä¸èƒ½å–å¾— Parent çš„ Private Data çš„ã€‚ç¹¼æ‰¿å¯ä»¥æ“´å…… Public æ–¹æ³•ï¼Œé€™é»è·Ÿ non-member \u0026\u0026 non-friend function å¦‚å‡ºä¸€è½ï¼Œæ²’æœ‰ä½”ä¸Šé¢¨ï¼Œå»åœ¨ package fexility ä¸Šè¼¸äº†ä¸€æˆªã€‚\n\né€™ç¨®ç¨‹åº¦çš„ã€Œæ“´å±•æ©Ÿèƒ½ã€ç›¸è¼ƒå…±ç”¨ Namespace èƒ½æ‹†åˆ† Header file ä¾è³´åº¦ï¼Œå°±æ‰“äº†æŠ˜æ‰£ã€‚","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/ODR-use":{"title":"ODR use","content":"https://en.cppreference.com/w/cpp/language/definition#ODR-use\n\n- ç•¶ä¸€å€‹ç‰©ä»¶è¢«ç¨±ç‚º odr use: ç‰©ä»¶è¢«è®€å– (ä¾‹å¤–: compile time constant) æˆ–å¯«å…¥ã€å®ƒçš„ address è¢«å–ç”¨ï¼Œæˆ–æœ‰ reference ç¶åˆ°ä»–èº«ä¸Š\n- ç•¶ä¸€å€‹ reference è¢«ç¨±ç‚º odr use: ç•¶å®ƒæ‰€ reference åˆ°çš„ç‰©ä»¶åœ¨ compile æœŸé–“æ˜¯æœªçŸ¥çš„\n- ä¸€å€‹ function è¢«ç¨±ç‚º odr use: æœ‰ç”¢ç”Ÿå°å®ƒçš„ function callï¼Œæˆ–å®ƒçš„ address è¢«å–ç”¨\nç¸½çµ: ç•¶ä¸€å€‹ç‰©ä»¶ã€reference æˆ– function è¢«ç¨±ç‚º odr useï¼Œè¡¨ç¤ºå®ƒçš„å®šç¾©å¿…å®š exist æ–¼ program çš„æŸè™•ï¼Œé•åé€™ä¸€é»æœƒå°è‡´ Link time errorã€‚","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/One-Definition-Rule":{"title":"One Definition Rule","content":"Source: https://en.cppreference.com/w/cpp/language/definition\nSource: https://en.wikipedia.org/wiki/One_Definition_Rule\n\n1. åœ¨ä¸€å€‹ translation unit ç•¶ä¸­ï¼Œtemplate, type, function, object åªèƒ½ä¸€ä»½ definition (ä¸€ä»½å¯¦ä½œ)ã€‚\n2. åœ¨æ•´å€‹ program ç•¶ä¸­ï¼Œä¸€å€‹ object æˆ– non-inline function ä¸èƒ½æœ‰å¤šæ–¼ä¸€å€‹ definition\n3. Some things, like types, templates, andÂ [extern](https://en.wikipedia.org/wiki/Extern \"Extern\")Â inline functions, can be defined in more than one translation unit. For a given entity, each definition must have the same sequence ofÂ [tokens](https://en.wikipedia.org/wiki/Lexical_analysis \"Lexical analysis\"). Non-extern objects and functions in different translation units are different entities, even if their names and types are the same.","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/ParamType-%E6%98%AF-Pointer-%E6%88%96-Reference-%E4%BD%86%E4%B8%8D%E6%98%AF-Universal-Reference":{"title":"ParamType æ˜¯ Pointer æˆ– Reference ä½†ä¸æ˜¯ Universal Reference","content":"\nRule: \n1. If expr(argument) has **reference**, ignore the reference part. \n2. T = ArgumentType - declared ParamType.\n","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/ParamType-%E6%98%AF-Universal-Reference":{"title":"ParamType æ˜¯ Universal Reference","content":"ç•¶ ParamType è¢«å®£å‘Šæˆ `T\u0026\u0026` (Universal Reference) æ™‚ï¼Œå‚³å…¥çš„è®Šæ•¸æ˜¯ rvalue æˆ– lvalue åœ¨æ¨æ–·çš„æµç¨‹æ˜¯**ä¸åŒçš„**ã€‚è©³ç´°åœ¨ [[Item24 Distinguish universal references from rvalue references]] æœƒèªªæ˜ã€‚\n\nåŸå‰‡æ˜¯: \n 1. ç•¶å‚³å…¥çš„æ˜¯ lvalueï¼Œ`T` å’Œ `ParamType` éƒ½æœƒæ¨æ–·æˆ lvalue reference typeã€‚æ³¨æ„ï¼Œåœ¨ Case 1. ç•¶ä¸­ï¼Œ`T` çš„æ¨æ–·æ˜¯ä¸æœƒä¿ç•™ reference part çš„ã€‚\n 2. ç•¶å‚³å…¥çš„æ˜¯ rvalueï¼Œå‰‡è¦å‰‡æœ‰å¦‚ [[ParamType æ˜¯ Pointer æˆ– Referenceï¼Œä½†ä¸æ˜¯ Universal Reference]]","lastmodified":"2023-09-05T15:34:45.958894802Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/ParamType-%E9%9D%9E-Reference-%E6%88%96-Pointer":{"title":"ParamType é Reference æˆ– Pointer","content":"ç•¶ ParamType ä¸æ˜¯ Ref ä¹Ÿé ptrï¼ŒçœŸæ­£çš„ `ParamType=T` æ™‚ï¼Œå‚³å…¥çš„ç‰©ä»¶æœƒè¢«åš **pass by value**ã€‚\nåœ¨ pass by value ä¸­ï¼Œåªæœ‰ pure class infomation æœƒè¢«ä¿ç•™ä¸‹ä¾†\n\n1. Remove reference-ness\n2. Remove constness\n3. Remove volatileness (å°‘è¦‹)\n\nä¹‹æ‰€ä»¥éµå®ˆé€™å€‹åŸå‰‡æ˜¯å› ç‚ºï¼Œç•¶ç‰©ä»¶ä»¥ Copy (pass by value) å‚³é€²ä¾†ä¹‹å¾Œï¼Œtemplate function ç•¶ä¸­çš„ç‰©ä»¶å·²ç¶“è·Ÿå¤–é¢çš„ç‰©ä»¶å®Œå…¨è„«é‰¤ï¼Œå°å®ƒæ”¹è®Šçš„æ•¸å€¼ä¹Ÿä¸è©²å½±éŸ¿åˆ°å¤–é¢ (reference-ness)ï¼Œè€Œå¤–é¢çš„ç‰©ä»¶èƒ½å¦è¢«æ”¹å‹• (constness) ä¹Ÿä¸ç”˜ function å…§è®Šæ•¸çš„äº‹æƒ…ã€‚\nå› æ­¤ï¼Œé€™äº›å±¬æ€§éƒ½æœƒè¢«ç§»é™¤ã€‚\n\nä½†æ˜¯æ³¨æ„ä¸‹é¢é€™å€‹ case:\n\n```cpp\ntemplate \u003ctypename T\u003e\nvoid f(T param);\n\nconst char* const ptr = 'what is this';\nf(ptr); // arg type: const char* const\n\t\t// T       : const char*\n```\n\nptr æ˜¯ä¸€å€‹æŒ‡å‘ const char çš„ pointer (`const char*`)ï¼Œä¸¦ä¸”é€™å€‹ ptr æ˜¯ä¸å¯ä»¥è¢«æ”¹è®Šçš„ (`const`)ï¼Œå®ƒå¿…é ˆæŒçºŒæŒ‡å‘è¢« assigned çš„ç‰©ä»¶ã€‚ç¶œåˆèµ·ä¾†å°±æ˜¯: ptr æ˜¯ä¸€å€‹ä¸å¯è¢«æ”¹è®Šçš„ pointerï¼Œå®ƒæŒçºŒæŒ‡å‘ä¸€å€‹ä¸å¯è¢«æ”¹è®Šçš„ char ç‰©ä»¶ã€‚\n\nåœ¨å®ƒçš„å‹æ…‹æ¨æ–·ä¸­ï¼Œç”±æ–¼è¢« copy çš„æ˜¯ `ptr`ï¼Œæ•… ptr çš„ constness æœƒæ¶ˆå¤±ã€‚ä¹Ÿå°±æ˜¯èªªï¼ŒParamType è®Šæˆ `const char*`ï¼Œ`parm` æ˜¯ä¸€å€‹æŒ‡å‘ã€Œä¸å¯è¢«è®Šæ›´çš„ `char` ç‰©ä»¶ã€çš„ pointerï¼Œä½† `parm` **å¯ä»¥æ›´æ”¹** æ‰€æŒ‡çš„å°è±¡ï¼Œåªè¦å°æ–¹æ˜¯ä¸€å€‹ `const char` å³å¯ã€‚\n\n\u003e `ptr` å¾åªå–œæ­¡ã€Œé‚£ä¸€å€‹ã€çŸ­é ­é«®çš„å¥³ç”Ÿï¼Œè®Šæˆå–œæ­¡çŸ­é ­é«®çš„å¥³ç”Ÿï¼Œå“ªå€‹éƒ½å¯ä»¥ã€‚ (æ¸£)\n\nç”±æ–¼è¢« Copy çš„å°è±¡æ˜¯ Pointerï¼Œè¢«ç§»é™¤ constness çš„ä¹Ÿåªæœ‰ Pointerã€‚Pointer æ‰€æŒ‡å‘çš„å°è±¡çš„ Constness è¢«ä¿ç•™äº†ä¸‹ä¾†ã€‚\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Pass-by-value-%E7%95%B6%E4%B8%AD%E7%9A%84-Copy-%E8%A1%8C%E7%82%BA":{"title":"Pass by value ç•¶ä¸­çš„ Copy è¡Œç‚º","content":"\n## Simple Pass By Value\nè€ƒé‡ä¸‹é¢çš„ç¨‹å¼ `validateStudent(s)` åŸ·è¡Œçš„æˆæœ¬æœ‰ä»€éº¼?\n\n```cpp\nclass Person;\nclass Student: public Person;\nbool validateStudent(Student s); // pass by value = copy\nStudent s = Student();\nvalidateStudent(s); \n```\n\næˆæœ¬æ˜¯\n- Student Copy Constructor\n- Person Copy Constructor\nä¸€å€‹ Copy Ctor å°±æ„å‘³è‘—ä¸€æ¬¡å…¨éƒ¨ member data çš„ Copyï¼Œæ‰€ä»¥ data è¶Šå¤šå‘¼å«è¶Šå¤š Copy Ctor!! \n\n## å¤šå‹å‡½å¼\nç•¶ Signature æ˜¯ Parentï¼Œå‚³å…¥çš„æ˜¯ Childï¼Œæ›´ç³Ÿç³•çš„æ˜¯æœƒç™¼ç”Ÿ Slicing! åªæœ‰ `Person` éƒ¨åˆ†çš„è³‡æ–™æœƒè¢« Copyï¼Œ`Worker` çš„è³‡æ–™éƒ½è¢«åˆ‡å‰²äº†ã€‚\n\n```cpp\nclass Worker: public Person;\nbool showName(Person s);\n\nWorker w = Worker();\nshowName(w);\n```","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Protected-%E8%88%87-Public-%E9%83%BD%E6%98%AF%E4%BD%8E%E5%B0%81%E8%A3%9D%E5%BA%A6%E7%9A%84-Access-Level":{"title":"Protected èˆ‡ Public éƒ½æ˜¯ä½å°è£åº¦çš„ Access Level","content":"\næ€ç¶­èª¤å€: Protected ä¸æ¯” Public å…·æœ‰æ›´å¥½çš„å°è£æ€§\n- å–æ¶ˆä¸€å€‹ Public Member Data çš„æˆæœ¬: æ‰€æœ‰ä½¿ç”¨ä»–çš„å®¢æˆ¶ç«¯\n- å–æ¶ˆä¸€å€‹ Protected Member Data çš„æˆæœ¬ : æ‰€æœ‰ç¹¼æ‰¿ä»–çš„ Derived Class\né€™å…©ç¨® Access Level çš„å°è£æ€§éƒ½ä¸ä½³ï¼Œä»è©²ç›¡å¯èƒ½çš„ä½¿ç”¨ Privateã€‚","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Pure-Virtual-Destructor":{"title":"Pure Virtual Destructor","content":"ç¾åœ¨çš„æƒ…å¢ƒæ˜¯ï¼Œå¦‚æœï¼Œä½ æƒ³è¦æœ‰ä¸€å€‹æŠ½è±¡é¡ -- æŠ½è±¡é¡çš„å¥½è™•æ˜¯è‡ªèº«ç„¡æ³•è¢«å¯¦ä¾‹åŒ–ã€‚ç„¶è€Œï¼ŒæŠ½è±¡é¡çš„å®šç¾©æ˜¯ï¼Œè‡³å°‘æœ‰ä¸€å€‹ function æ˜¯ Pure Virtural Functionã€‚è©²é¸æ“‡ \"èª°\" æˆç‚º Pure virtural function å‘¢? æ´½å·§æ‰‹ä¸Šæ²’æœ‰é©åˆçš„äººé¸! Destructor æœƒæ˜¯å€‹å¥½é¸æ“‡ã€‚å› ç‚º\n1. Abstract Class ç¸½æ˜¯è¢«ç•¶ä½œ Base Class\n2. Base Class ä½œç‚ºå¤šå‹ç”¨é€”æ™‚ï¼Œæ‡‰ç•¶å¸¶æœ‰ virtural destructor\n3.  [[Pure Virtual Function]] å¯ä½¿è©² Class å½¢æˆ Abstract\nä¸‰å€‹é»ä¸²èµ·ä¾†--ã€Œè®“ destructor è®Šæˆ Pure Virtural å§ã€ï¼Œé€™æ¨£ä¸æœƒæœ‰ä¸è©²è¢« virtural çš„ function é­æ®ƒ! \n\n\u003e Abstruct Class æ˜¯ä¸èƒ½è¢«å¯¦ä¾‹åŒ–çš„ Classï¼Œä½†å¯ä»¥æŒæœ‰ Abstruct Class çš„ Pointer å»æ“æ§ Child instanceã€‚\n\nä¸éé ˆè¨˜å¾—ä¸€å€‹æŠ€å·§ -- ä¾ç„¶ç‚ºé€™å€‹ Base Class çš„ Destructor æä¾›ä¸€å€‹ç©ºçš„å¯¦ä½œã€‚\né€™æ˜¯å› ç‚º Destructor çš„é‹ä½œè¦å‰‡ï¼Œåœ¨ç¹¼æ‰¿æ¶æ§‹ä¸­ï¼Œmost derived class (æœ€ child çš„) çš„ destructor æœƒæœ€å…ˆè¢«å‘¼å«ï¼Œæ¥è‘—æ˜¯æ¯ä¸€å€‹ Base Class çš„ Destructorã€‚å³ä½¿ `AWOV` ä½œç‚ºæŠ½è±¡é¡æ²’æœ‰å¯¦ä¾‹åŒ–çš„å•é¡Œï¼Œå…¶ destructor ä¾ç„¶æœƒè¢«å‘¼å«ï¼Œæ‰€ä»¥éœ€è¦æä¾›ä¸€å€‹ç©ºçš„å¯¦ä½œï¼ŒLinker (ç·¨è­¯å™¨çš„ä¸€éƒ¨åˆ†?) æœƒå ±éŒ¯ã€‚\n```cpp\nclass AWOV {\npublic:\n\tvirtural ~AWOV() = 0;\n}\n\nAWOV::~AWOV() {}; // ä¾ç„¶ç‚ºå®ƒæä¾›ä¸€å€‹å¯¦ä½œ\n```\n\n ","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Pure-Virtual-Function":{"title":"Pure Virtual Function","content":"\n\u003e åªç¹¼æ‰¿ Interface éœ€è‡ªè¡Œå¯¦åš\n\nç›¸ç•¶æ–¼å‘Šè¨´ Client: ä½ éœ€è¦æä¾›ä¸€å€‹é€™æ¨£çš„å‡½å¼ï¼Œä½†æˆ‘ä¸å¹²æ¶‰ä½ æ€éº¼åšå®ƒã€‚\n```cpp\nclass Shape {\npublic:\n\tvirtual void draw() const = 0;\n};\n```\n\nä¸éï¼Œæˆ‘å€‘å…¶å¯¦å¯ä»¥ç‚º Pure Virtual Function æä¾›ä¸€ä»½å¯¦ä½œç¢¼ï¼Œåªæ˜¯éœ€è¦é€šé Class Name å‘¼å« (ä»¥ `Shape::draw` è€Œé `shape.draw` å‘¼å«)ï¼Œé€™æ¨£æ—¢å¯ä»¥æä¾›ä¸€ä»½é è¨­å…§å®¹ï¼Œåˆå¯ä»¥å¼·åˆ¶ Derived class è¦è‡ªè¡Œå¯¦ä½œ (è‡ªè¡Œ call `Shape::draw`)ã€‚\n\nè€Œå°æ–¼ `Shape` ï¼Œå®ƒæ“æœ‰ä¸€å€‹ pure virtual functionï¼Œä¹Ÿå°±æ˜¯èªªå®ƒè‡ªèº«æ°¸é ä¸å¯èƒ½è¢«å¯¦ä¾‹åŒ–ã€‚å³ä½¿æä¾›å¯¦ä½œï¼Œä¹Ÿä¸èƒ½ç›´æ¥ç”± `ps-\u003edraw()` é€™æ¨£èª¿ç”¨ã€‚\n\n```cpp\nShape *ps = new Shape; // error! Shape is abstract\n\nShape *ps1 = new Rectangle; // fine\nps1-\u003edraw(); // calls Rectangle::draw\nps1-\u003eShape::draw(); // calls Shape::draw\n```\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["empty"]},"/notes/Project/Effective-C++-Series/Singleton":{"title":"Singleton","content":"","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["empty"]},"/notes/Project/Effective-C++-Series/Smart-Pointer":{"title":"Smart Pointer","content":"\nåœ¨[[ç‚ºå¤šå‹ç”¨é€”çš„åŸºç¤é¡åˆ¥å®£å‘Š virtual è§£æ§‹å¼]]æ–‡ç« ä¸­çš„ `TimeKeeper` ä¾‹å­ï¼Œæˆ‘å€‘æåŠäº†å·¥å» å‡½å¼ (factory function)ï¼Œåœ¨è©²ä¾‹å­ï¼Œæˆ‘å€‘æŠŠ delete `new` resource çš„è²¬ä»»äº¤çµ¦ Clientã€‚\n\nç„¶è€Œæœ‰å¾ˆå¤šæƒ…æ³--ä¾‹å¦‚ main flow ä¸­éæ—©çš„ returnï¼Œresource å¯èƒ½æ²’æœ‰æˆåŠŸè¢«éŠ·æ¯€ã€‚å–„ç”¨ Pointer-like ç‰©ä»¶ï¼Œä¸¦æŠŠéŠ·æ¯€è³‡æºçš„æ“ä½œ**ç¢ºå¯¦**çš„å¯«åœ¨ Destructor ä¸­å¯ä»¥é¿å…é€™äº›å•é¡Œã€‚\n\nSmart Pointer çš„åŸç†æ˜¯åˆ©ç”¨ä¸€å€‹ object å» own (or manage, ç®¡ç†) ä¸€å€‹ heap-based çš„è³‡æºï¼Œç•¶ Smart Pointer Object è„«é›¢ Scopeï¼ŒCompiler è©¦åœ–å» destructor æ™‚ï¼Œè—‰æ©Ÿå‘¼å«æ‰‹ä¸Š Object çš„ destructorã€‚\n\n## Smart Pointer ç•¶ä¸­çš„é¡¯å¼èˆ‡éš±å¼è½‰æ›\n1. Smart Pointer çš„ `get` function æ˜¯ä¸€ç¨®é¡¯å¼è½‰æ› (explicit)ï¼Œå…è¨± client å–å¾—åŸå§‹ç‰©ä»¶çš„åŸå§‹å‹åˆ¥æŒ‡æ¨™ã€‚\n2. Smart Pointer Override äº† `operation*` å’Œ `operator-\u003e`ï¼Œå› æ­¤ client ç«¯å¯ä»¥ç›´æ¥å°å®ƒåšæŒ‡æ¨™æ“ä½œï¼Œæœ‰å¦‚å°å¾… raw pointerï¼Œé€™éš±å«çš„æ˜¯éš±å¼è½‰æ› (implicit)\n\n## é¡¯å¼/éš±å¼è½‰æ›ä»‹é¢\nå¦‚ä¸Šè¿°ï¼Œ `get` function æ˜¯ä¸€ç¨®é¡¯å¼è½‰æ› (explicit)ï¼Œå®ƒçš„å„ªé»æ˜¯ä½¿ç”¨æ™‚æ„åœ–æ¸…æ¥šï¼Œç¼ºé»æ˜¯å¾ˆé†œã€‚\nå…¶å¯¦ï¼Œäº¦å¯ä»¥æä¾›å€‹éš±å¼è½‰æ›çš„ä»‹é¢ï¼Œå¦‚æ­¤ç•¶é€™å€‹ç‰©ä»¶è¢«æ”¾åˆ° base resource çš„é¡åˆ¥æ™‚ï¼Œå°±ä¸ç”¨ç‰¹åˆ¥é€é `get` æå– base resourceï¼Œç¼ºé»æ˜¯æœƒæå‡ç™¼ç”ŸéŒ¯èª¤çš„é¢¨éšªã€‚\n\né¸æ“‡ä½•ç¨®ï¼Œå–æ±ºæ–¼ä½¿ç”¨æƒ…å¢ƒï¼Œè¨˜ä½ [[è®“ä»‹é¢æ˜“æ–¼è¢«ä½¿ç”¨ï¼Œä¸æ˜“èª¤ç”¨]]ï¼Œä¸è¦è®“ä½ çš„ä»‹é¢å®¹æ˜“è¢«èª¤ç”¨ï¼Œå³å¯ã€‚","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Static-Object":{"title":"Static Object","content":"\n\u003e å£½å‘½å¾è¢«å»ºæ§‹å‡ºä¾†ï¼ŒæŒçºŒåˆ°ç¨‹å¼çµæŸç‚ºæ­¢ã€‚\n\nå› æ­¤ Stack å’Œ Heap-based ç‰©ä»¶éƒ½ä¸æ˜¯ static objectã€‚\né€™ç¨®ç‰©ä»¶åŒ…å« Global Objectï¼Œå®šç¾©åœ¨ Namespace Scope çš„ç‰©ä»¶ï¼ŒClass \u0026 Function \u0026 File å…§å®£å‘Šæˆ `static` çš„ç‰©ä»¶ã€‚\n- Function å…§çš„ static object ç¨±ç‚º local static object (Scope åªåœ¨ function å…§)\n- å…¶ä»–è¢«ç¨±ç‚º non-local static object\nå®ƒå€‘çš„ deconstructor æœƒåœ¨ main çµæŸæ™‚è¢«å–šèµ·ã€‚\n\nç•¶æˆ‘å€‘æœ‰å…©å€‹ç·¨è­¯å–®å…ƒ ([[Translation Unit]])ï¼Œé€šå¸¸è¡¨ç¤ºå…©ä»½ Source Codeã€‚å…©ä»½ Source Code ä¸­éƒ½æœ‰ non-local static objectï¼Œä¸”å…¶ä¸­ä¸€ä»½ static object çš„åˆå§‹åŒ–éœ€è¦ä½¿ç”¨åˆ°å¦ä¸€ä»½ source code çš„ static objectã€‚\n\nå•é¡Œåœ¨æ–¼ï¼Œæœ‰å¯èƒ½è¦è¢«ä½¿ç”¨çš„é‚£å€‹ç‰©ä»¶å°šæœªè¢«åˆå§‹åŒ–! \n\u003e C++ å°æ–¼ä¸åŒ [[Translation Unit]] ä¸­ non-local Static object åˆå§‹åŒ–çš„é †åºä¸¦æ²’æœ‰æ˜ç¢ºçš„å®šç¾©ã€‚\n\u003e The relative order of initialization of non-local static objects defined in different translation units is undefined.\n\né€™æ˜¯æœ‰åŸå› çš„ï¼Œå› ç‚ºæ±ºå®šé€™å€‹é †åºéå¸¸å›°é›£ï¼Œè¿‘ä¹ç„¡è§£ï¼Œç”šè‡³ä¸å€¼å¾—å»æ‰¾è§£ã€‚\n\né€™ç¨®å•é¡Œå¸¸è¦‹æ–¼[[Implicit TemplateInstantiation]] æ¨¡æ¿éš±å¼å…·ç¾åŒ–ã€‚ (? ä¸ç¢ºå®šç¿»è­¯)\n\n## Make Non-local Static Object become Local Static Object\n\n\u003e C++ ä¿è­‰ï¼Œå‡½å¼å…§çš„ Local static object æœƒåœ¨è©²å‡½å¼è¢«å‘¼å«æœŸé–“ï¼Œé¦–æ¬¡é‡åˆ°è©²ç‰©ä»¶çš„å®šç¾©å¼æ™‚åˆå§‹åŒ–ã€‚\n\næˆ‘å€‘å¯ä»¥åˆ©ç”¨æ­¤åŸå‰‡ï¼Œè§£æ±º dependency of 2 non-local static object in 2 different translated units çš„å•é¡Œã€‚\n\n\u003e å°‡æ¯å€‹ non-local static object æ¬åˆ°å°ˆå±¬çš„ function å…§ï¼Œä»¥ local static object çš„æ–¹å¼å­˜åœ¨ã€‚Design Pattern ä¸­çš„ [[Singleton]] å°±å¼å¸¸è¦‹çš„å¯¦ä½œæ–¹å¼ã€‚\n\nå…¶åŸç†åœ¨æ–¼ï¼Œæ‰€ä»¥æ¯”èµ·ç›´æ¥å‘¼å« non-local static objectï¼Œä½¿ç”¨ function call çš„åšæ³•æ›´ä½³ã€‚æ›´æ£’çš„æ˜¯ï¼Œè‹¥ä½ å¾æœªå‘¼å«ã€Œæ¨¡æ“¬è©² non-local static object çš„ functionã€ï¼Œå‰‡ ã€Œé‚£å€‹ object ã€æ ¹æœ¬**ä¸æœƒåˆå§‹åŒ–**ï¼Œæœ‰å»¶é²åˆå§‹åŒ–çš„åŠŸæ•ˆåœ¨! é€™æ˜¯çœŸæ­£çš„ non-local static object æ‰€ä¸èƒ½åŠçš„ã€‚\n\n`static` å¯ä»¥ç¢ºä¿å”¯ä¸€æ€§ï¼ŒSingleton æœ¬èº«å°±å¸¸å¸¸èˆ‡ Static æ­é…ä½¿ç”¨ã€‚\n\n```cpp\nclass FileSystem { ... };\n\nFileSystem\u0026 tfs()\n{\nÂ  Â  static FileSystem fs;\nÂ  Â  return fs;\n}\n\nclass Directory { ... };\nDirectory::Directory( params )\n{\nÂ  Â  std::size_t disks = tfs().numDisks();\n}  \n\n// The first call function.\nDirectory\u0026 tempDir()\n{\nÂ  Â  static Directory td( params );\nÂ  Â  return td;\n}\n```\næ­¤ç¨®æ‰‹æ³•ç¨±ç‚º reference-returningã€‚\n\nåœ¨æ­¤ä¾‹å­ä¸­ï¼Œ`tmpDir` å‰µå»ºç‰©ä»¶ `td`ï¼Œåœ¨ call `Directory` Constructor æ™‚ï¼Œæœƒå† call `tfs` ï¼Œæ­¤æ™‚æ‰å‰µå»º static object `fs`ã€‚é€é function callï¼Œç¢ºä¿äº†ç‰©ä»¶åˆå§‹åŒ–çš„é †åºï¼Œå…ˆåˆå§‹åŒ– `fs`ï¼Œå†å‰µå»º `td`ã€‚\n\n### å„ªé»\nç‰¹åˆ¥åœ¨é »ç¹å‘¼å«çš„æ™‚å€™ï¼Œæ­é… [[äº†è§£ Inline çš„è£¡è£¡å¤–å¤–]]ã€‚\n\n### ç¼ºé»\nåœ¨ multi-thread ä¸­æœ‰ä¸ç¢ºå®šæ€§ã€‚ä»»ä½•ä¸€ç¨® non-const static ç‰©ä»¶å¦‚æœ**ä¾è³´æ–¼å…¶ä»–äº‹ä»¶çš„ç™¼ç”Ÿ**ï¼Œéƒ½å¾ˆéº»ç…©ã€‚å¸¸è¦‹çš„è§£æ±ºæ–¹æ³•æ˜¯ï¼Œåœ¨ single-threaded startup portion æ‰‹å‹•å–šèµ·æ‰€æœ‰ reference-returning functionï¼Œæ‰‹å‹•è§£æ±º race conditionsã€‚\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Swap-and-pimpl":{"title":"Swap and pimpl","content":"\n## std::swap\nSTL çš„ swap å¹³å‡¡ç„¡å¥‡ï¼Œæ¶‰åŠäº†ä¸‰æ¬¡çš„è¤‡è£½ã€‚\n```cpp\nnamespace std {\n    template\u003ctypename T\u003e\n    void swap (T\u0026 a, T\u0026 b) {\n        T tmp(a);\n        a = b;\n        b = tmp;\n    }\n}\n```\n\nä½†å°æ–¼ã€ŒæŸäº›å‹åˆ¥ã€è€Œè¨€ï¼Œä»–å€‘æ»¿è¶³æŸäº›è³‡æ ¼ã€‚å› ç‚ºæœ‰é€™ç¨®å‰æï¼Œ`std::swap` çš„æ¨™æº–åšæ³•(ä¸‰æ¬¡è¤‡è£½)æ˜¯å¤šé¤˜çš„ï¼Œä»–å€‘æœ‰æ›´å¿«çš„è§£æ³•ã€‚\n\nã€Œä»¥æŒ‡æ¨™æŒ‡å‘ä¸€å€‹ç‰©ä»¶ï¼Œé‚£å€‹ç‰©ä»¶å«æœ‰çœŸæ­£çš„è³‡æ–™ã€çš„å‹åˆ¥ï¼Œå°±æ˜¯é‚£äº›ç‰¹æ®Šçš„ã€æ»¿è¶³è³‡æ ¼çš„å‚¢ä¼™ã€‚å¸¸è¦‹çš„æ‰‹æ³•æ˜¯ [[pimpl idiom (pointer to implementation)]] ï¼ŒPattern å¦‚ä¸‹: \n- `Widget` çš„ Copy Assignment å¯¦éš›ä¸Šæ˜¯è¤‡è£½ `rhs.pImpl` æ‰€æœ‰å…§å®¹åˆ°è‡ªå·±çš„ `pImpl` è¤‡è£½ä¸€ä»½éä¾†ã€‚\n```cpp\nclass WidgetImpl {\nprivate:\n    int a, b, c; \n    ... // a lot of data\n}\n\nclass Widget {\npublic:\n    Widget(const Widget\u0026 rhs);\n    // copy assignment: æŠŠ WidgetImpl çš„æ¯ä¸€å€‹å…§å®¹éƒ½è¤‡è£½ä¸€ä»½éä¾†\n    Widget\u0026 operator=(const Widget\u0026 rhs) {\n        *pImpl = *(rhs.pImpl); \n    }\n\nprivate:\n    WidgetImpl* pImpl;\n}\n```\n\nç•¶ Widget åœ¨ swap æ™‚ Copy Assigment æœƒç™¼ç”Ÿè¶³è¶³ä¸‰æ¬¡! å¯¦éš›ä¸Šå»æ˜¯ -- åªè¦æŠŠ `lhs.pImpl` å’Œ `rhs.pImpl` å…©å€‹ Pointer äº’æ›å³å¯ã€‚\n\n## å¯¦ä½œ Swap \né¦–å…ˆï¼Œéœ€è¦ç”¨åˆ° [[Template Specialization]] ã€‚æˆ‘å€‘ä¸è¢«å…è¨±æ”¹è®Š STD ç©ºé–“å…§çš„æ±è¥¿ï¼Œä½†æˆ‘å€‘è¢«å…è¨±ç”¨ STD Template è£½é€ ç‰¹ç•°åŒ–ç‰ˆæœ¬ï¼Œç•¶ swap ç”¨æ–¼ `Widget` ç‰©ä»¶æ™‚è‡ªå‹•ä½¿ç”¨ç‰¹ç•°åŒ–ç‰ˆæœ¬çš„ functionã€‚\n\n```cpp\nnamespace std {\n\ttemplate\u003c\u003e \n\tvoid swap\u003cWidget\u003e (Widget\u0026 a, Widget\u0026 b) {\n\t// ä»¥ä¸Šå…©è¡Œè¡¨ç¤º total template specialization: ç•¶ç”¨åœ¨ Widget æ™‚\n\t// ç”¨é€™å€‹ç‰¹ç•°åŒ–çš„ function!\n\t\t\n\t\t// swap(a.pImpl, b.pImpl); // æœƒå¤±æ•—ï¼Œå› ç‚º pImpl æ˜¯ private.\n\t\ta.swap(b);\n\t}\n}\n\nclass Widget {\npublic:\n\tvoid swap(Widget\u0026 other) {\n\t\tusing std::swap; // necessary.\n\t\tswap(pImpl, other.pImpl);\n\t}\n}\n```\n\nåœ¨ `Widget::swap` è£¡æŒ‡å®š `using std::swap` æ˜¯å¿…è¦çš„ã€‚\n\n\u003e [!danger]\n\u003e è®€åˆ° P111ï¼Œæˆ‘æ‡·ç–‘ C++11 ä¹‹å¾Œæœ‰ä¸åŒçš„åšæ³•ï¼Œå…ˆä¸ç´°çœ‹ã€‚\n\n\n## Name Lookup Rules\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Template-%E5%B8%B6%E4%BE%86%E7%9A%84%E7%A8%8B%E5%BC%8F%E7%A2%BC%E8%86%A8%E8%84%B9":{"title":"Template å¸¶ä¾†çš„ç¨‹å¼ç¢¼è†¨è„¹","content":"Template å¯èƒ½å°è‡´ binary å…§æœ‰é‡è¤‡çš„ç¨‹å¼ç¢¼ã€è³‡æ–™ï¼Œå„˜ç®¡ source code çœ‹èµ·ä¾†æ²’æœ‰é‡è¤‡çš„å•é¡Œï¼Œobject code å»ç•°å¸¸è‚¥å¤§ã€‚\n\n## é¿å…è¼¸å…¥é¡åˆ¥ç„¡é—œçš„ code å¸¶ä¾†çš„ç¨‹å¼è†¨è„¹\nè·Ÿå…±æ€§èˆ‡è®Šæ€§åˆ†æ (commonality and variability analysis)\næŠŠç¨‹å¼ç¢¼ä¸­èˆ‡ã€Œè¼¸å…¥é¡åˆ¥æœ‰é—œã€è·Ÿã€Œèˆ‡è¼¸å…¥é¡åˆ¥ç„¡é—œã€çš„éƒ¨åˆ†åˆ†é–‹ã€‚å›°é›£çš„æ˜¯éœ€è¦å­¸ç¿’ã€Œæ„Ÿå—ã€template è¢«å…·ç¾åŒ–å¾ˆå¤šæ¬¡æ™‚å¯èƒ½ç™¼ç”Ÿçš„ã€Œé‡è¤‡è¡Œç‚ºã€ã€‚\n\nä¸‹é¢é€™æ®µä¾‹å­ï¼ŒTemplate è¼¸å…¥åƒæ•¸æœ‰å…©å€‹: `T` è·Ÿ `n` (çŸ©é™£çš„ size)ï¼Œåªè¦é€™å…©å€‹åƒæ•¸çš„çµ„åˆä¸ä¸€æ¨£ï¼Œå°±æœƒå…·ç¾åŒ–ä¸€æ¬¡ç‰©ä»¶ã€‚\n`sm1` è·Ÿ `sm2` åˆ†åˆ¥æ˜¯ä¸€å€‹ \"5\\*5 çŸ©é™£\" è·Ÿ \"10\\*10çŸ©é™£\" ç‰©ä»¶ï¼Œä¸¦ä¸” `SquareMatrix::invert` æœƒè¢«å…·ç¾åŒ–**å…©æ¬¡**!! \n```cpp\ntemplate\u003ctypename T, std::size_t n\u003e\nclass SquareMatrix { \npublic:\n\tvoid invert(); \n};\n\nSquareMatrix\u003cdouble, 5\u003e sm1;\nsm1.invert(); // call SquareMatrix\u003cdouble, 5\u003e::invert\nSquareMatrix\u003cdouble, 10\u003e sm2;\nsm2.invert(); // call SquareMatrix\u003cdouble, 10\u003e::inver\n```\n\nè§£æ±ºè¾¦æ³•: æŠŠ `invert` æ ¸å¿ƒéƒ¨ä»½æŠ½å‡ºä¾†è‡ªæˆä¸€å€‹ Templateï¼Œå¦ä¸€å€‹ Template å°ˆè™•ç†ä¸åŒçš„ sizeã€‚\nä¸‹é¢çš„è§£æ±ºè¾¦æ³•æœ‰å¹¾å€‹çœ‹é»\n1. `SquareMatrixBase` å’Œ `SquareMatrix` èµ°çš„æ˜¯ private ç¹¼æ‰¿ï¼Œè¡¨ç¤º **ä¸æ˜¯ is a é—œä¿‚**ã€‚\n2. `using SquareMatrixBase\u003cT\u003e::invert` æ˜¯ç‚ºäº†é¿å…[[ç¹¼æ‰¿æ™‚çš„åç¨±é®æ©è¡Œç‚º]]ï¼Œ`SquareMatrixBase::invert` èˆ‡ `SquareMatrix::invert` é›–ç„¶ signature ä¸åŒï¼Œå»æœ‰åç¨±é®æ©å•é¡Œã€‚\n3. `this-\u003einvert(n)`: \n\t1. [[äº†è§£å¦‚ä½•åœ¨ Template ä¸­æŒ‡æ¶‰ Base Class æˆå“¡]] ä¸­æåˆ°çš„ã€‚\n\t2. é€™è£¡åšçš„æ˜¯éš±æ™¦çš„inline å‘¼å«ï¼Œä¸æœƒå› ç‚ºå‘¼å«è€Œå¸¶ä¾†è€Œå¤–çš„æˆæœ¬ã€‚[[äº†è§£ Inline çš„è£¡è£¡å¤–å¤–]]\n\né€™æ¨£ä¸€ä¾†\n- `SquareMatrixBase\u003cdouble\u003e` åªæœƒæœ‰ä¸€ä»½\n- `SquareMatrix\u003cdouble, 5\u003e`, `SquareMatrix\u003cdouble, 10\u003e` å„ä¸€ä»½ï¼Œä½†ä»–å€‘å‘¼å«åˆ°çš„ `SquareMatrixBase\u003cdouble\u003e`  æœƒæ˜¯åŒä¸€ä»½ã€‚\n```c++\ntemplate\u003ctypename T\u003e // size-independent base class for\nclass SquareMatrixBase { // square matrices\nprotected:\n\tvoid invert(std::size_t matrixSize); // invert matrix of the given size\n};\n\ntemplate\u003ctypename T, std::size_t n\u003e\nclass SquareMatrix: private SquareMatrixBase\u003cT\u003e {\nprivate:\n\tusing SquareMatrixBase\u003cT\u003e::invert; // å› ç‚ºæœ‰åŒåçš„ invert (é›–ç„¶ signature ä¸åŒ)\npublic:\n\tvoid invert() { this-\u003einvert(n); } // make inline call to base class\n}; // version of invert\n```\n\n## èˆ‡è¼¸å…¥é¡åˆ¥ç›¸é—œçš„ code æ‰€å¸¶ä¾†çš„ç¨‹å¼è†¨è„¹\nåƒæ˜¯ `std::vector\u003cint\u003e`, `std::vector\u003cdouble\u003e` å‹¢å¿…æœƒé€ æˆå…©å€‹ä¸åŒçš„ classã€‚\nåŒæ¨£çš„ `std::vector\u003cint*\u003e`, `std::vector\u003cdouble*\u003e` ä¹Ÿæœƒï¼Œå¦‚æœæ²’æœ‰å¿…è¦ç”Ÿæˆé€™éº¼å¤šçš„ classï¼Œå°æ–¼ pointer typeï¼Œè®“æ“ä½œå¼·å‹åˆ¥ (Strongly type pointer `T*`) å»å‘¼å«ç„¡å‹åˆ¥ (`void*`) æ˜¯éœ€è¦çš„ã€‚\n\n\n\n\n\n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Template-%E7%9A%84%E7%94%A8%E9%80%94":{"title":"Template çš„ç”¨é€”","content":"- Container Used: Template è®“ Programmer å¾—ä»¥å»ºç«‹ Type-Safe çš„å®¹å™¨ï¼Œåƒæ˜¯ list, map, vector...\n- Generic Programming: å¯«å‡ºçš„ç¨‹å¼ç¢¼è·Ÿæ‰€è™•ç†çš„é¡åˆ¥å½¼æ­¤ç¨ç«‹ (ex. STL çš„ `for_each`, `find` å’Œ `merge`)\n- Template metaprogramming: åœ¨ Compiler å…§åŸ·è¡Œã€ä¸¦åœ¨ç·¨è­¯å®Œæˆæ™‚åœæ­¢åŸ·è¡Œçš„ program (the creation of programs that execute inside C++ compilers and that stop running when compilation is complete.)\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Template-%E8%88%87%E9%9A%B1%E5%BC%8F%E4%BB%8B%E9%9D%A2":{"title":"Template èˆ‡éš±å¼ä»‹é¢","content":"\n- ç‰©ä»¶å°å‘ä»¥é¡¯å¼ä»‹é¢ (explicit interface) å’ŒåŸ·è¡ŒæœŸå¤šå‹ (runtime polymorphism) è§£æ±ºå•é¡Œã€‚\n- Template èˆ‡ Generic Programming è€Œè¨€ï¼Œéš±å¼ä»‹é¢ (implicit interface) èˆ‡ç·¨è­¯æœŸå¤šå‹ (compile-time) æ›´é‡è¦ã€‚\n\n## å¤šå‹\n|      | ç‰©ä»¶å°å‘  | Generic Programming  |\n|  ----  | ----  | ----  |\n| å¤šå‹  | åŸ·è¡ŒæœŸå¤šå‹ (runtime polymorphism) | ç·¨è­¯æœŸå¤šå‹ (compile-time) |\n| æ¦‚å¿µ(æ‰“æ¯”æ–¹)  | åŸ·è¡ŒæœŸé–“æ±ºå®šå“ªä¸€å€‹ virtual function è¦è¢«å‘¼å« | ç·¨è­¯æœŸé–“åš template å…·è±¡åŒ–ã€èˆ‡å‡½å¼é‡è¼‰æ±ºè­° (function overloading resolving)| \n\n\n## ä»‹é¢\n|      | ç‰©ä»¶å°å‘  | Generic Programming  |\n|  ----  | ----  | ----  |\n| ä»‹é¢  | é¡¯å¼ä»‹é¢ (explicit interface) | éš±å¼ä»‹é¢ (implicit interface)    |\n| èªªæ˜  | Signature ç”±å‡½å¼åç¨±ã€åƒæ•¸å‹åˆ¥ã€åå›å‹æ…‹æ§‹æˆï¼Œclass æ˜ç¢ºå®šç¾©æœ‰å“ªäº› function| æ²’æœ‰å®šç¾©æ˜ç¢ºçš„ signatureï¼Œåªè¦æœ‰å°æ‡‰çš„ overloading function è¢«å‘¼å«å³å¯ã€‚|\n\n### é¡¯å¼ä»‹é¢\n- Function Signature ç”±å‡½å¼åç¨±ã€åƒæ•¸å‹åˆ¥ã€åå›å‹æ…‹æ§‹æˆã€‚\n\t- å° overloading è€Œè¨€ï¼Œå‡½å¼åç¨±ç›¸åŒã€åƒæ•¸å‹åˆ¥ç›¸åŒã€return type ä¸åŒï¼Œç„¡æ³•æˆåŠŸ overloadã€‚ä»–å€‘æœƒè¢«è¦–ç‚º duplicateã€‚\n\t- ä½†å°ä¸€å€‹ function è€Œè¨€ï¼Œfunction name, parameter type, return type æ˜¯å¿…é ˆçš„ï¼Œè€Œ effective C++ çš„ä½œè€…ç¿’æ…£å°‡é€™ä¸‰çµ„ä¸€èµ·ç¨±ç‚º signatureã€‚\n- Class æœƒæ˜ç¢ºçš„å®šç¾©æœ‰å“ªäº› functionï¼Œä¸‹ä¾‹ `Widget` å°±æœ‰ constructor, destructor, `size`, `normalize`, `swap`ã€‚ä¸¦ä¸” `Widget` å…·æœ‰ virtual functionï¼Œè¡¨ç¤ºå®ƒæœ‰å¯èƒ½æœ‰ Derived class è€Œå¾—ä»¥åš runtime polymorphismã€‚\n\n```cpp\nclass Widget {\npublic:\n\tWidget();\n\tvirtual ~Widget();\n\tvirtual std::size_t size() const;\n\tvirtual void normalize();\n\tvoid swap(Widget\u0026 other);\n};\n```\n\n### éš±å¼ä»‹é¢\nå†çœ‹ä¸‹ä¾‹çš„ Template function: \n```cpp\ntemplate\u003ctypename T\u003e\nvoid doProcessing(T\u0026 w)\n{\n\tif (w.size() \u003e 10 \u0026\u0026 w != someNastyWidget) { ... }\n}\n```\nä¹çœ‹ä¸‹ï¼Œæ­¤ function å° T ä¼¼ä¹æœ‰å…©å€‹è¦æ±‚\n1. å…·æœ‰ member function `size`ï¼Œä¸”å›å‚³ä¸€å€‹ int typeã€‚\n2. æ”¯æ´ `operator!= `ï¼Œå¾—ä»¥æ¯”è¼ƒ `someNastyWidget` \n\nå¯¦éš›ä¸Š [[operator overloading]] è®“é€™å…©å€‹ç´„æŸä¸éœ€è¦\"å®Œå…¨\"æ»¿è¶³\n- ç¬¬ä¸€é»\n\t- ç¢ºå¯¦ï¼ŒT éœ€è¦æœ‰ `size` å‡½å¼ï¼Œå®ƒä¹Ÿå¯ä»¥æ˜¯å¾ `T` çš„ base class ç¹¼æ‰¿ä¾†çš„ï¼Œéƒ½å¯ã€‚\n\t- ä½†æ˜¯ return type **ä¸ä¸€å®š** éœ€è¦ç‚º intï¼Œå‡è¨­ `T::size` å›å‚³ type `X`ï¼Œåªè¦ `(X, int)` é€™æ¨£çš„åƒæ•¸å¼å¾—ä»¥å‘¼å–šèµ·ä¸€å€‹ `operator\u003e` å³å¯!\n\t- é€™ä¸¦éè¡¨ç¤ºè¦æœ‰ä¸€å€‹ `operator\u003e(X, int)`ï¼Œå¦‚æœ `X` æœ‰èƒ½åŠ›é€ééš±å¼è½‰æ›æˆ `Y`ï¼Œä¸¦ä¸”å­˜åœ¨ `operator\u003e(Y, int)`ï¼Œå°±è¶³ä»¥è®“æ­¤æ¢ä»¶æ»¿è¶³äº†! \n- ç¬¬äºŒé»\n\t- åŒç†ï¼Œåªè¦æœ‰ `operator!=` æ”¯æ´æ¯”è¼ƒ T èˆ‡ type of `someNastyWidget` å°±è¶³å¤ äº†ã€‚\n\t\t- åŒç¬¬ä¸€é»çš„é‚è¼¯ï¼Œæœ€ä½æ¢ä»¶éœ€è¦æœ‰ä¸€å€‹ `operator!=(X, Y)` çš„å‡½å¼ï¼Œä¸” `T` å…·æœ‰è½‰æ›æˆ `X` çš„èƒ½åŠ›ï¼Œtype of `someNastyWidget` å…·æœ‰è½‰æ›æˆ `Y` çš„èƒ½åŠ›ã€‚\n\nç¾åœ¨ï¼Œå±•é–‹ doProcessing çš„å…¨è²Œ\n```c++\ntemplate\u003ctypename T\u003e\nvoid doProcessing(T\u0026 w)\n{\n\tif (w.size() \u003e 10 \u0026\u0026 w != someNastyWidget) {\n\t\tT temp(w);\n\t\ttemp.normalize();\n\t\ttemp.swap(w);\n\t}\n}\n```\n\næ­¤ template function åŒæ¨£å°æ–¼ member function `normalize`, `swap`, `size`ï¼Œcopy constructor æœ‰è¦æ±‚ -- ç¸½ä¹‹è¦è®“é‚£äº› function åœ¨ `T` ä¸Šæœ‰æ•ˆï¼Œåšç”šéº¼è½‰æ›éƒ½è¡Œ!\n\né€™äº›åŠ è«¸åœ¨ `T` ä¸Šçš„ã€Œéš±æ™¦çš„è¦æ±‚ã€ï¼Œå°±åƒæ˜¯ä¸€ç¨®éš±å¼ä»‹é¢ -- èƒ½åŸ·è¡ŒæˆåŠŸå°±ä»£è¡¨é€™å€‹ T å…·æœ‰é€™äº›ä»‹é¢ã€‚è€Œè¢«å‚³å…¥çš„ `T` æ˜¯å¦å…·æœ‰é€™äº›ä»‹é¢ï¼Œåœ¨ç·¨è­¯æœŸé–“å°±æœƒæª¢æŸ¥ã€‚\n\nå°±åƒæˆ‘å€‘ç„¡æ³•å°é¡¯ç¤ºä»‹é¢çš„ class å‘¼å«ä¸€äº›ä¸å­˜åœ¨çš„ function ä¸€æ¨£ï¼Œå‘¼å«äº†ä¸å­˜åœ¨æ–¼é¡¯å¼ä»‹é¢ä¸Šçš„å‡½å¼å°‡ç„¡æ³•é€šéç·¨è­¯ï¼Œç„¡æ³•æ»¿è¶³éš±å¼ä»‹é¢çš„ç¨‹å¼ä¹ŸåŒæ¨£ç„¡æ³•é€šéç·¨è­¯ã€‚\n\n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Template-Method":{"title":"Template Method","content":"","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["empty"]},"/notes/Project/Effective-C++-Series/Template-ParamType-deduction":{"title":"Template ParamType deduction","content":"\n\u003e `T` is a part of ParamType when it declared in template.\n\n- Case1. [[ParamType æ˜¯ Pointer æˆ– Reference ä½†ä¸æ˜¯ Universal Reference]]\n- Case2. [[ParamType æ˜¯ Universal Reference]]\n- Case3. [[ParamType é Reference æˆ– Pointer]]\n- Case4. [[Array As an Argument]]\n- Case5. [[Function As an Argument]]\n\n## Conclusion\n\n1. ç•¶ Argument æ˜¯æœ‰ Reference æ™‚ï¼Œå…¶ Reference-ness (`\u0026`) æœƒè¢«å¿½ç•¥\n2. Universal Reference åœ¨æ”¶åˆ° lvalue argument èµ°çš„ç¨‹åºæ˜¯ç‰¹åˆ¥çš„ã€‚\n3. åš Pass by value (Copy) æ™‚ï¼Œå¸¸æ•¸æ€§(constness) æœƒæ¶ˆå¤±\n4. Function name \u0026 array name Argument æœƒ decay æˆ Pointer é€²è¡Œ template deductionï¼Œé™¤éè©² template çš„ parameter type æ˜¯å®£å‘Šæˆ Referenceã€‚\n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Template-Specialization":{"title":"Template Specialization","content":"\nTemplate å¯ä»¥é‡å°ç‰¹å®šçš„ Type ç‰¹åŒ–ï¼Œå¯«æ³•å¦‚ä¸‹\n1. `template\u003c\u003e` è£¡é¢ä¸æ”¾ä»»ä½•åƒæ•¸ï¼Œè¡¨ç¤ºé€™ä¸æ˜¯ template ä¹Ÿä¸æ˜¯æ¨™æº–çš„ classï¼Œæ˜¯ä¸€å€‹ç‰¹åŒ–çš„ `MsgSender`ã€‚\n2. `class MsgSender\u003cCompanyZ\u003e` è¡¨ç¤º  template `MsgSender` åœ¨é‡åˆ° input type æ˜¯ `CompanyZ` çš„æ™‚å€™ï¼Œè¦ç”¨ä»¥ä¸‹å®šç¾©çš„å…§å®¹ã€‚\nä»¥ä¸‹é€™æ®µç¯„ä¾‹å°±æ˜¯ `MsgSender` é‡å° `CompanyZ` ç‰¹åˆ¥è¨‚è£½çš„å…§å®¹ï¼Œé€™å°±æ˜¯æ¨¡æ¿å…¨ç‰¹åŒ– (Total Template Specialization)ã€‚\n\n```c++\ntemplate\u003c\u003e // a total specialization of\nclass MsgSender\u003cCompanyZ\u003e { // MsgSender; the same as the\npublic: // general template, except sendClear is omitted\nvoid sendSecret(const MsgInfo\u0026 info)\n{ ... }\n};\n```\næ­¤ä¾‹å‘¼æ‡‰ [[äº†è§£å¦‚ä½•åœ¨ Template ä¸­æŒ‡æ¶‰ Base Class æˆå“¡]] çš„ç¯„ä¾‹ï¼Œ`MsgSender` å°æ–¼ä¸€èˆ¬è¼¸å…¥é¡åˆ¥éƒ½æœ‰ `sendSecret` è·Ÿ `sendClear` å…©å€‹ functionã€‚ä½†åœ¨é€™è£¡ï¼Œ`CompanyZ` çš„ç‰¹åŒ–ç‰ˆå°‡ä¸å­˜åœ¨ `sendClear`! \n\n## Template Specialiaztion èˆ‡ Declaration\né›–ç„¶ Template å¤šç¿’æ…£æŠŠå¯¦ä½œå¯«åœ¨ hppï¼Œè‹¥å°‡ Template Specialiaztion å¯¦ä½œå¯«åœ¨ hpp å»å¯èƒ½ç™¼ç”Ÿå•é¡Œã€‚\nå‡è¨­æœ‰ä¸‰å€‹æª”æ¡ˆï¼Œ`temp.hpp` å¯«è‘— template èˆ‡ Template Specialiaztion çš„å¯¦ä½œï¼Œå…©å€‹ cpp: `a.cpp` èˆ‡ `b.cpp` åˆ†åˆ¥ include  temp.hppï¼ŒåŸºæ–¼ [[One Definition Rule]]ï¼Œé€™æœƒå¼•ç™¼ multiple definition (è¦‹ [multiple definition of template specialization when using different objects](https://stackoverflow.com/questions/4445654/multiple-definition-of-template-specialization-when-using-different-objects))ã€‚\n\nè§£æ±ºæ–¹æ³•æœ‰å…©ç¨®\n1. å®£å‘Š Template Specialiaztion æ–¼ hppï¼Œå¯¦ä½œæ”¾åœ¨ cpp\n2. ä¸€æ¨£æŠŠå¯¦ä½œæ”¾åœ¨ hppï¼Œä½†æ˜¯å¤šå®£å‘Š inline æ–¼ Template Specialiaztion çš„å¯¦ä½œä¸Šã€‚\n\n### åˆ†é›¢ Template Specialiaztion å¯¦ä½œ\n\ntemp.hpp: \n```cpp\ntemplate\u003ctypename T\u003e void func(T\u0026 val);\ntemplate\u003c\u003e void func\u003cint\u003e(int\u0026 val); // Specialiaztion\n```\n\ntemp.cpp\n```cpp\ntemplate\u003c\u003e void func\u003cint\u003e(int\u0026 ) {}\n```\n\n### å° Template Specialiaztion çš„å¯¦ä½œå®£å‘Š inline \n\né€™å…¶å¯¦ç›¸ç•¶æœ‰è¶£ï¼Œå› ç‚º function æ˜¯å¦ inline å–æ±ºæ–¼ compilerï¼Œå³ä½¿å®£å‘Š inline ä¹Ÿä¸ä¸€å®šä»£è¡¨ compiler æœƒçœŸçš„å° function inline  ([[äº†è§£ Inline çš„è£¡è£¡å¤–å¤–]])ã€‚\né‚£éº¼ç‚ºä½•åœ¨ hpp å…§å°  Template Specialiaztion definition å®£å‘Š inline èƒ½è§£æ±ºå•é¡Œ?  [Stackoverflow çš„å›ç­”](https://stackoverflow.com/a/48403514) çµ¦å‡ºäº†è§£ç­”ã€‚\n\næ ¹æ“š Â C++ standard æ¢ç›® 3.2:4 ([file](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3690.pdf) P49 One definition rule)ï¼Œå¯ä»¥æ‹†æˆå…©æ®µä¾†çœ‹: \n\u003e (1) Every program shall contain exactly one definition of every non-inline function or variable that is odr-used in that program; no diagnostic required. The definition can appear explicitly in the program, it can be found in the standard or a user-defined library, or (when appropriate) it is implicitly defined (see 12.1, 12.4 and 12.8). \n\u003e (2) An inline function shall be defined in every translation unit in which it is [[ODR use]].\n\n\n\nç•¶ Specialiaztion ä¸æ˜¯ inline çš„æ™‚å€™ï¼Œå®ƒè¢«ç•¶ä½œ non inline function å°å¾…ï¼Œè€Œå°æ–¼ non inline function/variableï¼Œåœ¨ program ä¸­åªæ‡‰è©²æ“æœ‰ä¸€ä»½ definitionã€‚å› æ­¤å…©æ¬¡ include åŒä¸€ä»½ header é€ æˆäº†å•é¡Œ: å¤šå€‹ definition (include çš„æœ¬è³ªå°±æ˜¯æŠŠ hpp è²¼åˆ° cpp è£¡é¢)ã€‚\n\nç•¶ Specialiaztion æ˜¯ inline çš„æ™‚å€™ï¼ŒSpecialiaztion æ»¿è¶³äº†æ¢ç›®çš„ç¬¬äºŒéƒ¨åˆ†: inline function å¿…é ˆè¢«å®šç¾©æ–¼æ¯ä¸€å€‹ä½¿ç”¨åˆ°çš„ translation unitï¼Œä¹Ÿå°±æ˜¯è©²å‰‡å›ç­”è£¡é¢æåˆ°çš„ : \n\n\u003e an inline function must be defined in each module using the function.\n\né€™æˆ–è¨±ä¹Ÿå¯ä»¥åå‘èªªæ˜ï¼Œåœ¨ [[äº†è§£ Inline çš„è£¡è£¡å¤–å¤–]] ç’°ç¯€ä¸­æåˆ°çš„ï¼Œåªæœ‰ hpp ä¸­å«æœ‰å¯¦ä½œçš„ function å¯ä»¥æœ‰éš±æ€§ inline ç”³è«‹ï¼Œå› ç‚ºæƒ³è¦ inline ä¸€å€‹ functionï¼Œåœ¨ç·¨è­¯æœŸé–“ï¼Œæ¯ä¸€å€‹ä½¿ç”¨åˆ°é€™å€‹ function çš„ translate unit éƒ½éœ€è¦æœ‰é€™å€‹ functionã€‚ç•¶å¯¦ä½œæŠ½é›¢ï¼Œé€™å€‹æ¢ä»¶å°±æ²’è¾¦æ³•é”æˆã€‚\n\n\n There can be more than one definition of a template specialization for which *some template parameters are not specified (14.7, 14.5.5) in a program* provided that each definition appears in a different translation unit\n\nWhen the parameterized function is not specialized it is covered by clause 3.2:6:\n\n\u003e There can be more than one definition of a class type (Clause 9), enumeration type (7.2), inline function with external linkage (7.1.2), class template (Clause 14), non-static function template (14.5.6), static data member of a class template (14.5.1.3), member function of a class template (14.5.1.1), or template specialization for which some template parameters are not specified (14.7, 14.5.5) in a program provided that each definition appears in a different translation unit\n\nThis clause states that it is OK for multiple definitions of the same template function as long as at least one of the template parameters is not specified in the code. This is to allow the decision on whether the parameterized function should be instantiated in a module to be made on local information only.\n\n[Example ORD](https://wiki.sei.cmu.edu/confluence/display/cplusplus/DCL60-CPP.+Obey+the+one-definition+rule)\nhttps://en.cppreference.com/w/cpp/language/definition","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Template-and-Generic-Programming":{"title":"Template and Generic Programming","content":"\næœ¬æ–‡ä¸­è¦é€é [[Member Function Template]] (æˆå“¡å‡½å¼æ¨¡æ¿) å®Œæˆä¸€å€‹æ³›åŒ–çš„ copy constructorã€‚\n\n---\n\né€™æ®µç¯„ä¾‹çš„æ„æ€æ˜¯ï¼Œå°æ–¼ `SmartPtr\u003cT\u003e` å­˜åœ¨ä¸€å€‹ç”± `SmartPtr\u003cU\u003e` å»ºæ§‹çš„ç®¡é“ (é€é Copy Constructor)ã€‚\né€™é‚Šçš„å‹åˆ¥è½‰æ›æ²’æœ‰æ¨™ç¤ºç‚º `explicit`ï¼Œä¸€æ—¦æ¨™ç¤ºç‚º `explicit`ï¼Œå°±éœ€è¦æ˜ç™½å¯«å‡ºè½‰å‹ (cast) å‹•ä½œã€‚\nä½¿ç”¨éš±å¼è½‰æ›å¼å› ç‚º raw pointer æœ¬ä¾†å°±æ”¯æ´éš±å¼è½‰æ›ï¼Œä»¿æ•ˆç›¸åŒæ¨¡å¼ï¼Œ`SmartPtr` ä¹Ÿä½¿ç”¨éš±å¼è½‰æ›ã€‚\n\n```cpp\ntemplate\u003ctypename T\u003e\nclass SmartPtr {\npublic:\n\ttemplate\u003ctypename U\u003e // member template \n\tSmartPtr(const SmartPtr\u003cU\u003e\u0026 other); // for a â€generalized copy constructorâ€\n}\n```\n\nç¾åœ¨ï¼Œä¸åŒçš„ `SmartPtr` å…·ç¾é«” (instantiations, å…·ç¾åŒ–çš„é¡åˆ¥) ä¹‹é–“å¯ä»¥è‡ªç”±è½‰æ›äº†ï¼Œä½†åƒæ˜¯ Top -\u003e Bottom é€™ç¨®é•åç¹¼æ‰¿è¦å‰‡çš„ä¸åˆæ³•çš„è½‰æ›ï¼Œæ²’æœ‰è¢«ç¦æ­¢! \n\næˆ‘å€‘å¯ä»¥åœ¨ copy constructor ä¸­åŠ ä¸€äº›ç´„æŸæ¢ä»¶ï¼Œé¿å…é€™ç¨®ä¸åˆæ³•è½‰æ›ã€‚åƒè€ƒ share pointer çš„ä½œæ³•ï¼Œé¦–å…ˆæä¾›ä¸€å€‹ `get` çš„ public function è®“ raw pointer (`T*`) å¾—ä»¥è¢«å–å¾—ï¼Œé€™æ¨£åœ¨ copy constructor è™•ç† rhs çš„æ™‚å€™ï¼Œæ‰æœ‰è¾¦æ³•å–å¾— `U*` pointerã€‚\næ¥è‘—ï¼Œåœ¨ Member initialization list ç•¶ä¸­ï¼ŒæŠŠ `U* ptr` å‚³çµ¦å…§éƒ¨çš„ `T* heldPtr`ã€‚è‹¥ç¹¼æ‰¿é—œä¿‚ä¸åˆæ³•ï¼Œå‰‡é€™å€‹ Raw pointer ä¹‹é–“çš„ copy è¡Œç‚ºå°±æœƒç™¼ç”Ÿå•é¡Œï¼Œè€Œç„¡æ³•é€šéç·¨è­¯!!\n\n```cpp\ntemplate\u003ctypename T\u003e\nclass SmartPtr {\n\npublic:\n\ttemplate\u003ctypename U\u003e\n\tSmartPtr(const SmartPtr\u003cU\u003e\u0026 other) // initialize this held ptr\n\t: heldPtr(other.get()) { ... } // with otherâ€™s held ptr\n\tT* get() const { return heldPtr; }\n\nprivate: // built-in pointer held\n\tT *heldPtr; // by the SmartPtr\n};\n\n```","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/The-definition-and-declaration-of-static-const":{"title":"The definition and declaration of static const","content":"\u003e [!todo]\n\u003e P14\n\n\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["empty"]},"/notes/Project/Effective-C++-Series/Translation-Unit":{"title":"Translation Unit","content":"\n\u003e A translation unit is the source code giving rise to a single object file. It's basically a single source file, plus all of its `#include` files.\n\nç·¨è­¯å–®å…ƒæŒ‡: ç”¢å‡ºå–®ä¸€ç›®çš„æª” (single object file) çš„é‚£äº› source codeï¼Œé€šå¸¸æ˜¯ source code + included header file.","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Virtual-Base-Class":{"title":"Virtual Base Class","content":"\n\u003e è®“é‘½çŸ³ç¹¼æ‰¿ä¸­ï¼Œå¸¶æœ‰è©²è³‡æ–™çš„ Base Class æˆç‚º virtual base classã€‚\n\næ­¤ä¾‹ä¸­å°±æ˜¯ `File` è¦æˆç‚º virtual base classï¼Œ`InputFile` \u0026 `OutputFile` åœ¨ç¹¼æ‰¿ `File` æ™‚è¦åŠ ä¸Š `virtual`ã€‚\n![[Item40_VBC.png]]\nC++ STL è£¡é¢æœ‰ä¸€å€‹é€™æ¨£çš„é«”ç³»ï¼Œåªæ˜¯ä»–å€‘æ˜¯ class template ä¸Šçš„ç¹¼æ‰¿é—œä¿‚ (basic_ios, basic_istream, basic_ostream, basic_iostream)ã€‚\n\n## ä»£åƒ¹\n\nPublic ç¹¼æ‰¿æ‡‰è©²ç¸½æ˜¯ç‚º virtual public å—?  virtual æœ‰ä»£åƒ¹\n- å­˜å– virtual base class member data æœƒæ¯” non-virtual class member data æ…¢ã€‚\n- virtual base class åˆå§‹åŒ–è¦å‰‡è¤‡é›œã€ä¸ç›´è§€çš„å¤šã€‚\n\n## virtual base class çš„åˆå§‹åŒ–\nç”±æœ€åº•å±¤ (most derived class ) è² è²¬\n1. most derived class éœ€è¦èªçŸ¥åˆ° virtual base class åœ¨å“ªï¼Œå®ƒå¯èƒ½å¾ˆé™é \n2. ä¸€ä½†æœ‰æ–°çš„ derived class è¢«åŠ å…¥ï¼Œè²¬ä»»å°‡æ‹‹åˆ°å®ƒèº«ä¸Šã€‚\n\n### å¿ å‘Š\n1. ä¸è¼•æ˜“ä½¿ç”¨ virtual base class \n2. å¦‚æœå¿…é ˆä½¿ç”¨ï¼Œé¿å…åœ¨è£¡é¢æ”¾è³‡æ–™ï¼Œé€™æ¨£å°±ä¸éœ€è¦æ“”å¿ƒåˆå§‹åŒ–èˆ‡è³¦å€¼å¸¶ä¾†çš„å•é¡Œäº†ã€‚\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/Virtual-Function":{"title":"Virtual Function","content":"\n## åœ¨ Ctor / Dtor å‘¼å« virtual function\n![[Itm10_TranscationUML.png]]\n\nåœ¨é€™è£¡ï¼ŒTranscation çš„ Constructor å‘¼å«çš„æœƒæ˜¯ `Transcation::logTranscation`ã€‚\nåˆï¼Œè©² function ç‚º Pure virtual functionï¼Œè‹¥å®ƒæ²’è¢«å®šç¾©ï¼Œå‰‡ç•¶ç·¨è­¯å™¨å‘¼å«æ™‚æœƒå¼•ç™¼éŒ¯èª¤ï¼Œè€Œè‹¥æœ‰.... å°±æœƒ Link åˆ°è©² base class functionã€‚\nRelated: [[å€åˆ†ä»‹é¢ç¹¼æ‰¿(interface)å’Œå¯¦ä½œç¹¼æ‰¿(implement)]]\n\nä¸€å€‹ä¸æ­£å¼çš„è¬›æ³•: Base Calss å»ºæ§‹æœŸé–“ï¼Œæ‰€å‘¼å«çš„ virtual function ä¸æ˜¯ virtual functionã€‚  \n\n\u003e [!important] \n\u003e åœ¨ Drived Class Object åŸ·è¡Œ Based Class Constructor æœŸé–“ï¼Œç‰©ä»¶çš„å‹åˆ¥å¯¦éš›ä¸Šæ˜¯ Base Classã€‚\n\né€™æ˜¯æ ¹æœ¬çš„åŸå› ï¼Œç”±æ–¼åœ¨ Based Class Constructor ç‰©ä»¶æ˜¯ Base Classï¼Œå‘¼å« Base Class çš„ function ä¹Ÿæ˜¯è‡ªç„¶çš„äº‹ã€‚\nä¸åªæ˜¯ virtual function æœƒè¢«æ±ºè­°(resolve to) è‡³ Base Classï¼Œå¦‚æœä½¿ç”¨ `dynamic_cast` (Runtime type infomation)ï¼Œä¹ŸæœƒæŠŠç‰©ä»¶è¦–ç‚º Base Class! [[å°‘åšè½‰å‹å‹•ä½œ(Minimize casting)]]\n\nç›¸åŒçš„å•é¡Œä¹Ÿå­˜åœ¨æ–¼ Destructorï¼Œåœ¨ Destructor ä¸­ Drived Class çš„éƒ¨åˆ†æœƒå…ˆè¢«æ¶ˆæ»…ï¼Œä¸€æ—¦é€²å…¥ Base Class Destructor ï¼ŒC++ å°±æœƒçœ‹å¾…å®ƒç‚ºä¸€å€‹ Base Classã€‚\n\n## ä»¥å‚³éåƒæ•¸çµ¦ non-virtual functionï¼Œå–ä»£ä½¿ç”¨ Virtual function\nå°‡ virtual function å¾ con/desturctor ä¸­ç§»é™¤! èªªä¾†å®¹æ˜“ï¼Œå»ä¸æ˜“å¯Ÿè¦ºã€‚Constructor å¯èƒ½ call åˆ¥çš„ functionï¼Œè€Œ virtual å¯èƒ½è—èº«åœ¨å…¶ä¸­! ä¸¦ä¸”ï¼Œå¾ˆé›£ç¢ºä¿ Child Class ä¹Ÿæœƒæœå¾é€™é …è¦å®šã€‚\n\næ›¿ä»£æ–¹æ¡ˆæ˜¯ï¼Œä½¿ç”¨ non-virtual functionï¼ŒæŠŠ Log ä»¥ string çš„æ–¹å¼å‚³çµ¦ Base Class çš„ non-virtual Log functionã€‚\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/enum-hack":{"title":"enum hack","content":"","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["empty"]},"/notes/Project/Effective-C++-Series/non-member-non-friend-function":{"title":"non-member \u0026\u0026 non-friend function","content":"[[Non-member \u0026\u0026 Non-friend Function çš„å°è£åº¦å„ªæ–¼ Member Function]]","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/operator-overloading":{"title":"operator overloading","content":"","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["empty"]},"/notes/Project/Effective-C++-Series/override":{"title":"override","content":"","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["empty","cpp11"]},"/notes/Project/Effective-C++-Series/pimpl-idiom-pointer-to-implementation":{"title":"pimpl idiom (pointer to implementation)","content":"\u003e å°‡ç‰©ä»¶çš„å¯¦ä½œç´°ç›®éš±è—åœ¨ä¸€å€‹æŒ‡æ¨™èƒŒå¾Œ\n\n## ç¬¬ä¸€ç¨®æ‰‹æ³•: Handle Class\n\næ­¤æ‰‹æ³•æœƒæŠŠä¸€å€‹é¡åˆ¥åˆ†æˆå…©å€‹ Class: \n- ä¸€å€‹æ˜¯æš´éœ²çµ¦å®¢æˆ¶ç«¯çš„æ¥å£ Handle Class (ex. `Person`)ï¼Œå®ƒåªæœƒæ“æœ‰ä¸€å€‹ pointer æŒ‡å‘å¯¦ä½œ class\n- ä¸€å€‹æ˜¯å¯¦ä½œé¡åˆ¥ Implementation Class (ex. `Personimpl`) ï¼Œæ‰€æœ‰çœŸæ­£è¦å­˜çš„è³‡æ–™éƒ½åœ¨é€™è£¡é¢ã€‚\n\nç”±æ–¼æ¥å£ `Person` åª own ä¸€å€‹ smart pointer ï¼Œå®ƒä¸éœ€è¦çŸ¥é“ `PersonImpl` æœ‰å¤šå¤§ï¼Œå› æ­¤å¯ä»¥ç”¨ forward declare è§£æ±ºã€‚å®ƒé‚„æä¾›äº†ä¸€äº› getterï¼Œä½†æä¾› getter ä¹Ÿéƒ½å¯ä»¥é€é forward declare è§£æ±ºä¸€åˆ‡ã€‚\n\nå®¢æˆ¶ç«¯åœ¨ `include person.hpp` æ™‚ï¼Œåªæœƒè·Ÿè‘— include åˆ° string å’Œ memory å…©å€‹ header file è€Œå·²ã€‚è‡³æ­¤ï¼Œ`PersonImpl` åšäº†ä»€éº¼æ›´å‹•ï¼Œç›´æ¥è·Ÿå®¢æˆ¶ç«¯è„«é‰¤ã€‚\n\n\n```cpp\n#include \u003cstring\u003e // standard library components shouldnâ€™t be forward-declared\n#include \u003cmemory\u003e // for tr1::shared_ptr; see below\nclass PersonImpl; // forward decl of Person impl. class\nclass Date; // forward decls of classes used in\nclass Address; // Person interface\nclass Person {\npublic:\n\tPerson(const std::string\u0026 name, const Date\u0026 birthday,\n\tconst Address\u0026 addr);\n\tstd::string name() const;\n\tstd::string birthDate() const;\n\tstd::string address() const;\n\t...\nprivate: // ptr to implementation;\n\tstd::tr1::shared_ptr\u003cPersonImpl\u003e pImpl; // é€™æ˜¯å”¯ä¸€çš„ member data\n}; // std::tr1::shared_ptr\n```\n\n[[ç·¨è­¯ä¾å­˜-å®£å‘Šå¼ã€å®šç¾©å¼èˆ‡å¯¦ä½œç´°ç¯€]]\n\n### å¯¦ä½œæª”æ¡ˆ (CPP)\nå¯¦ä½œæª”æ¡ˆéœ€è¦åŒæ™‚ include `Person.hpp` å’Œ `PersonImpl.hpp`\n-  `Person.hpp` : ç‚ºäº†å¯¦ä½œ `Person`çš„ function\n-  `PersonImpl.hpp`: æ‰èƒ½ Call `PersonImpl` çš„ functionã€‚\n\n```cpp\n#include \"Person.h\" \n#include \"PersonImpl.h\" \nPerson::Person(const std::string\u0026 name, const Date\u0026 birthday,\nconst Address\u0026 addr)\n: pImpl(new PersonImpl(name, birthday, addr))\n{}\nstd::string Person::name() const\n{\nreturn pImpl-\u003ename();\n}\n```\n\n\n## ç¬¬äºŒç¨®æ‰‹æ³•: Interface Class çš„è¨­è¨ˆæ–¹å¼\næš´éœ²çµ¦å®¢æˆ¶çš„æ˜¯ Interface Classï¼Œé€™å€‹é¡åˆ¥æœ¬èº«æœƒè¨­è¨ˆæˆä¸€å€‹ abstract base class (interface class)ã€‚[[å€åˆ†ä»‹é¢ç¹¼æ‰¿(interface)å’Œå¯¦ä½œç¹¼æ‰¿(implement)]]\n\n### Interface Class: æš´éœ²çµ¦ Client çš„æ¥å£\nInterface class çš„ç”¨é€”æ˜¯åƒ…æœ‰æ•˜è¿° drived class çš„ä»‹é¢ï¼Œå®ƒæ²’æœ‰ member dataã€ä¹Ÿæ²’æœ‰ constructorï¼Œåªæœ‰ä¸€å€‹ virtual destructorï¼Œè·Ÿä¸€å † [[Pure Virtual Function]] ä¾†æ•˜è¿°ä»‹é¢ã€‚è€Œ drived class å°±æ˜¯å®ƒçš„å¯¦ä½œ (ç›¸ç•¶æ–¼å‰é¢ implement class çš„è…³è‰²)\n```cpp\nclass Person {\npublic:\n\tvirtual ~Person();\n\tvirtual std::string name() const = 0;\n\tvirtual std::string birthDate() const = 0;\n\tvirtual std::string address() const = 0;\n...\n};\n```\n\næˆ‘å€‘æš´éœ²çµ¦ Client ç«¯çš„æ˜¯ Interface classï¼ŒInterface calss æ˜¯ abstract classï¼Œç„¶è€Œï¼Œ **abstract class ä¸èƒ½è¢«å…·è±¡åŒ–**ã€‚å› æ­¤ï¼Œç”¨æ­¤æ–¹æ³•è¨­è¨ˆæ™‚ï¼Œéœ€è¦åœ¨  interface class è£¡é¢æä¾›ä¸€å€‹ã€Œè®“ client ç«¯ç²å–ç‰©ä»¶ã€çš„ç‰¹æ®Šæ–¹æ³•ã€‚\n\né€™å€‹ç‰¹æ®Šæ–¹æ³•é€šå¸¸ç¨±ç‚º [[å·¥å» å‡½å¼ (Factory Function)]]ï¼Œå®ƒå€‘æœƒå›å‚³ä¸€å€‹ interface class pointerï¼Œå»æŒ‡å‘å‹•æ…‹é…ç½®(è¢« `new` å‡ºä¾†) çš„ derived class ç‰©ä»¶ã€‚é€™ç¨®å‡½å¼åœ¨ interface class å…§å¾€å¾€å®£å‘Šç‚º `static`ã€‚å¦‚ä¸‹ä¾‹çš„ `create`: \n\n```cpp\nclass Person {\npublic:\n...\nstatic std::tr1::shared_ptr\u003cPerson\u003e \ncreate(const std::string\u0026 name, // Person initialized with the\n\t\tconst Date\u0026 birthday, // given params; see Item 18 for\n\t\tconst Address\u0026 addr); // why a tr1::shared_ptr is returned ...\n};\n```\n\n### Concrete Class: ç›¸å°æ–¼ Interface Class çš„å°æ‡‰å¯¦ä½œ\nInterface Class æ‰€å°æ‡‰çš„å¯¦ä½œé¡åˆ¥æœƒæ˜¯ä¸€å€‹å…·è±¡é¡ (concrete class)ï¼Œå®ƒå¿…é ˆæ“æœ‰çœŸæ­£çš„ constructorã€‚å‡è¨­é€™å€‹å¯¦ä½œé¡åˆ¥æ˜¯ `RealPerson`: \n\n```cpp\nclass RealPerson: public Person {\npublic:\n\tRealPerson(const std::string\u0026 name, const Date\u0026 birthday,\n\tconst Address\u0026 addr)\n\t: theName(name), theBirthDate(birthday), theAddress(addr)\n\t{}\n\tvirtual ~RealPerson() {}\n\tstd::string name() const; // implementations of these \n\tstd::string birthDate() const; // functions are not shown, but \n\tstd::string address() const; // they are easy to imagine\nprivate:\n\tstd::string theName;\n\tDate theBirthDate;\n\tAddress theAddress;\n};\n```\n\nç¾åœ¨çŸ¥é“ `RealPerson` çš„ constructor é•·ç›¸ï¼Œå›é ­ `Person::create` çš„å¯¦ä½œä¹Ÿæ˜¯è¼•è€Œæ˜“èˆ‰: \n```cpp\nstd::tr1::shared_ptr\u003cPerson\u003e Person::create(const std::string\u0026 name,\nconst Date\u0026 birthday, const Address\u0026 addr)\n{\n\treturn std::tr1::shared_ptr\u003cPerson\u003e( \n\t\t\tnew RealPerson( name, birthday, addr));\n}\n```\n\n## pimpl æ‰‹æ³•çš„æˆæœ¬\nä»¥ä¸Šèªªæ˜äº†å…©ç¨®èŠ±ä¿çš„æ‰‹æ³•ï¼Œå®ƒèƒ½é™ä½è€¦åˆï¼Œæ¸›å°‘ç·¨è­¯æ™‚é–“ã€‚æˆæœ¬å‘¢?\n\n### Handle Class çš„æˆæœ¬\n1. æ¯æ¬¡å° Handle class å–å€¼éƒ½æ˜¯é–“æ¥å–å€¼: handle class éœ€è¦è·Ÿ impl pointer å–å¾—è³‡æ–™ã€‚\n2. èˆ‡ä¸ç”¨ pimpl pattern æ‰‹æ³•æƒ³æ¯” (ä¸å»è€¦åˆ)ï¼Œæ¯å¢åŠ ä¸€å€‹ handle class ç‰©ä»¶ï¼Œå°±æœƒå¢åŠ ä¸€å€‹ impl pointer çš„å¤§å° (é€šå¸¸ä»¥ smart pointer å­˜)ã€‚\n3. impl object æ˜¯ä»¥å‹•æ…‹è¨˜æ†¶é«”é…ç½® (`new`)ï¼Œæ‰¿å—å‹•æ…‹è¨˜æ†¶é«”é…ç½®èˆ‡é‡‹æ”¾çš„æˆæœ¬ï¼Œä¹Ÿæœ‰å¯èƒ½é‡åˆ° `bad_alloc` (è¨˜æ†¶é«”ä¸è¶³)ã€‚\n### Interface Class çš„æˆæœ¬\n1. Interface Class æ¯å€‹å‡½å¼éƒ½æ˜¯ virtual functionï¼Œæ¯æ¬¡çš„å‡½å¼å‘¼å«éƒ½è¦ä»˜å‡ºé–“æ¥è·³èº (indirect jump) çš„æˆæœ¬ã€‚è¦‹: [[ç‚ºå¤šå‹ç”¨é€”çš„åŸºç¤é¡åˆ¥å®£å‘Š virtual è§£æ§‹å¼]]\n2. åªè¦æœ‰ virtual functionï¼Œå°±æœƒæœ‰ vptr (virtual table pointer)ï¼Œå…¶æˆæœ¬åƒè¦‹:  [[ä¸è¦ç‚ºéå¤šå‹ç”¨é€”çš„ Base Class å®£å‘Š Virtual Function]]\n\n### æé†’\nä¸è«– handle class æˆ– interface classï¼Œä¸€æ—¦è„«é›¢ inline å‡½å¼éƒ½ç„¡æ³•æœ‰å¤ªå¤§çš„ä½œç‚º(why? ä¸éå°±æ˜¯éƒ½è¦åœ¨ class å®šç¾©å¼ä¸­ç›´æ¥æŠŠå¯¦ä½œå¯«å®Œçš„æ„æ€)ã€‚å› ç‚ºé€™é¡ class æ˜¯ç‚ºäº†éš±è—å¯¦ä½œç´°ç¯€æˆ–å‡½å¼æœ¬é«”çš„!! [[äº†è§£ Inline çš„è£¡è£¡å¤–å¤–#å‘ Compiler ç™¼å‡ºç”³è«‹]]\n\n\n## è©²ä½¿ç”¨ pimpl å—?\n- ç•¶ä»¥ä¸ŠæåŠçš„é€Ÿåº¦æˆæœ¬æˆ–å¤§å°å•é¡Œï¼Œä½¿å¾—é¡åˆ¥çš„è€¦åˆå•é¡Œç›¸å½¢ä¹‹ä¸‹ä¸æ€éº¼åš´é‡æ™‚ï¼Œå°±æ‡‰è©²ç›´æ¥ç”¨å…·è±¡é¡åˆ¥ (concrete class) å–ä»£ pimpl æ‰‹æ³•ã€‚\n","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["cpp"]},"/notes/Project/Effective-C++-Series/typedef-and-using":{"title":"typedef and using","content":"","lastmodified":"2023-09-05T15:34:45.962894855Z","tags":["empty","modern"]},"/notes/Resource/Books/The-Second-Brain":{"title":"æ‰“é€ ç¬¬äºŒå¤§è…¦","content":"\u003e æˆç‚ºä¸€å€‹ã€Œèƒ½å‚³é”è³‡è¨Šã€ä¸”å…·æœ‰å‡ºè‰²è©®é‡‹èƒ½åŠ›ã€çš„äºº! \n\n- Key Feature In this sentence:\n\t- Can construct infomation\n\t- Can express info effectively\n\n## CODE \n\n### C (Capture)\n\u003e å°‡è³‡è¨Šè’é›†åœ¨æ²’æœ‰é›œè¨Šçš„åœ°æ–¹ï¼Œä½ å¯ä»¥å¿ƒç„¡æ—é¨–åœ°æ‰¾åˆ°å®ƒã€‚\n\n- å³ä½¿åªæ˜¯çœ‹ä¸€çœ¼æ”¶è—ï¼Œä¹Ÿè¦æ…é¸æ”¶è—çš„åœ°æ–¹ã€‚\n- ä¸å¥½çš„åœ°æ–¹: å€‹äººä¿¡ç®±ã€FB çš„æ”¶è— (å¾ˆå®¹æ˜“è¢«ç¤¾ç¾¤å¸èµ°) ...\n- é©åˆçš„åœ°æ–¹: å±¬æ–¼è‡ªå·±çš„èŠå¤©å®¤ (Line keep)\n\n### O (Orgnize)\n\u003e ä»¥ Project åˆ†é¡ ï¼Œä¸è¦ä»¥é¡åˆ¥åˆ†é¡ã€‚\n\n- æ·ºå°è©: ä»¥ç›®çš„å°å‘åˆ†é¡ã€‚ex. ã€Œå°ˆæ³¨åŠ›å”è­°ã€çš„æ›¸æ‘˜æ‡‰è©²æ”¾åœ¨ã€Œæˆç‚ºå¿ƒç„¡æ—é¶©çš„äººã€è€Œä¸æ˜¯ã€Œå¿ƒç†å­¸ã€ã€‚\n- åƒæ˜¯æ­¸é¡åœ¨ã€Œå¿ƒç†å­¸ã€ã€æˆ–æ˜¯ã€Œå·¥ä½œç”Ÿç”¢åŠ›ã€é€™ç¨®åœ–æ›¸é¤¨å¼çš„åˆ†é¡ï¼Œä½ ä¸åˆ†çœ‹æ¨™é¡Œä¹ŸçŸ¥é“å®ƒæ˜¯å“ªä¸€é¡ï¼Œä¸éœ€è¦åšç„¡æ„ç¾©çš„åˆ†é¡ã€‚\n- æ”¾åœ¨ã€Œæˆç‚ºå¿ƒç„¡æ—é¶©çš„äººã€ï¼Œé»é€²å»é€™å€‹ç›®æ¨™ï¼Œæ­¤æ›¸æ‘˜å°±æœƒå¿«é€Ÿåœ°æµ®ç¾ä¸Šä¾†ï¼Œå‘Šè¨´ä½ å¿«ä½¿ç”¨å®ƒ! \n- çŸ¥è­˜å¿…é ˆç”¨åˆ°æ‰æœ‰ç”¨! \n\n### D (Distill, èƒå–)\n\u003e ç”¨ Bullet Point å‘Šè¨´æœªä¾†çš„ä½ ï¼Œé€™ç¯‡ç­†è¨˜åœ¨èªªä»€éº¼?\n\n- 4 å€‹å±¤æ¬¡çš„èƒå–ï¼Œæ¯ä¸€æ¬¡èƒå–ç´„ä¿ç•™ 10~20% çš„è¨Šæ¯é‡ã€‚\n- èƒå–çš„æ™‚æ©Ÿå¾ˆé‡è¦ï¼Œç„¡æ•ˆçš„èƒå–åè€Œéºå¤±é‡è¦è¨Šæ¯ã€‚\n- How to partice? Distill the note when read it once time.\n\n### E (Express, è¡¨é”)\n\u003e Any way. Deliver it, and share! \n\n\n## é‡æ¸…ç›®æ¨™: ä½ æƒ³è§£æ±ºä»€éº¼å•é¡Œ?\n\u003e Which problems do you want to resovle by The Second Brain? \n\n**è²»æ›¼: 12é“é›£é¡Œ**\nå®ƒæ‡‰è©²å…·æœ‰è½‰ç§»æ€§ï¼Œæ ¸å¿ƒç²¾ç¥ä¸è®Šï¼Œä½†é ˜åŸŸå¯èƒ½æ”¹è®Šçš„ç‰¹è³ªã€‚è¨˜å¾—é€™äº›ä½ çš„ç›®æ¨™ï¼Œç•¶è³‡è¨Šæµéä½ èº«é‚Šæ™‚ï¼Œé©—è­‰ä»–å€‘æ˜¯å¦èƒ½å¹«åŠ©ä½ è§£æ±ºé€™äº›é›£é¡Œ? If true, Capture it! \n\nMy current thinking: \n1. How to improve poor english?\n2. How to spend time \u0026 learning effectively?\n3. How to take effective note?\n4. How to debug (gdb) effective?\n\n## Capture: What Info Can put into Your Second Brain?\n\n- æ‘˜è¦! é€šå¸¸ä¸æ‡‰è¶…éåŸè³‡è¨Šé‡çš„ 1/10\n- å…·æœ‰å•Ÿç™¼æ€§çš„ï¼Œæ”¹è®Šä½ çš„æƒ³æ³•çš„ (ä¸æ‡‚ å¤ªæŠ½è±¡)\n- åœ¨æœªä¾†å¯ä»¥è¢«ä½¿ç”¨çš„ (ex. How to own a project? How to leader a team?)\n- è·Ÿä½ è‡ªèº«ç›¸é—œçš„: çè²´çš„ï¼Œä½ æƒ³æ°¸ä¹…è¨˜æ†¶çš„å›æ†¶ã€‚\n- ç›¸åã€ä¸åŒè§€é»çš„: é¿å…ä½è­‰åå·® (confirmation bias)ï¼Œå¯ä»¥ä½¿ä½ è·³è„«ç•¶å‰èªçŸ¥çš„ã€‚\n\n\u003e è¨˜ä½ï¼Œé‡æ–°æ¶ˆåŒ–éçš„è³‡è¨Šæ›´å¥½å¸æ”¶! \n\n## Organize: Where Do the Info Put?\n\nä¸ä½¿ç”¨åœ–æ›¸é¤¨å¼çš„åˆ†é¡æ³•ï¼Œä½œè€…æå‡º PARA æ–¹æ³•ï¼Œå¯ä»¥çœ‹å‡ºé‡è¦ç¨‹åº¦ä¾åºéæ¸›ã€‚äººçš„æ³¨æ„åŠ›æœ‰é™ï¼Œè«‹ç¬¬ä¸€çœ¼ï¼Œå°±çœ‹åˆ°æœ€å¯èƒ½å¹«åŠ©ä½ çš„è³‡æ–™ã€‚\n\n\u003e è®“æœ€é‡è¦çš„ä»»å‹™ã€æœ€çŸ­æœŸçš„ç›®æ¨™çš„ç›¸é—œè³‡æ–™ä¸Šï¼Œæ²’æœ‰éå¤šçš„é›œè¨Š\n\nP (Project): çŸ­æœŸä»»å‹™\n- Working project\n- Personal project (ex. blog), side project, æ¸›é‡... \n\n\nA (Area): é•·æœŸä»»å‹™ï¼Œé•·æœŸæƒ³æŒæ¡çš„ç›®æ¨™\n- å¥åº·ï¼Œä¸åŒæ–¼ project ä¸­çš„ã€Œæ¸›é‡ã€æ˜¯æ˜ç¢ºç›®æ¨™ã€æ˜¯é”æˆå¥åº·çš„æ‰‹æ®µï¼Œå¥åº·æ˜¯é•·æœŸç›®æ¨™ã€‚\n\nR (Resource): æœªä¾†æœ‰ç”¨è™•çš„\n- æœ‰èˆˆè¶£çš„æ±è¥¿ã€å—œå¥½: ç²¾æ²¹ã€å’–å•¡\n- ç ”ç©¶çš„å¯æ: effective\n- æœ‰ç”¨çš„åƒè€ƒ: travel plan\n\nA (Archive): å‚™è€Œä¸ç”¨\n- ä¸å†æœ‰èˆˆè¶£çš„\n\n\n\n## Distill èƒå–\n\n- ä¸è¦èŠ±ç›¸åŒçš„æ™‚é–“ï¼Œè™•ç†ç›¸åŒçš„åŸå§‹è³‡æ–™\n- æ‘˜è¦! ç”¨ç°¡çŸ­çš„ bullet point åˆ—å‡ºé‡é»ã€‚\n- èª¤å€: ç•¶ä¸èƒ½äº†è§£å…¶ç”¨è™•æ™‚ï¼Œä¸æ‡‰å¼·è¡Œæ¶ˆåŒ–ï¼Œå¦å‰‡é‡é»éé‡é»ã€‚\n\n\u003e My opinion: æ¯èª¿é–±å®ƒã€é–±è®€ä¸€æ¬¡ï¼Œå°±èƒå–ä¸€æ¬¡ã€‚\n\n### åƒè€ƒæ–¹æ³•: 4 å€‹å±¤æ¬¡èƒå–\n\næ¯å€‹æ­¥é©Ÿé–“æ‡‰ä¿ç•™ç´„ 10~20% çš„è³‡æ–™é‡ï¼Œå¦å‰‡ brief isn't brief.\n1. æ“·å–æ®µè½\n2. ç²—é«”å­—\n3. è¢å…‰ç­† highlight\n4.  bullet point \n\n### ä»¥æœƒè­°ç­†è¨˜èˆ‰ä¾‹\n\n1. åˆ—å‡ºæ‰€æœ‰è¨è«–å‡ºä¾†ï¼Œéœ€è¦åšçš„ (need to do)\n2. åŠƒå‡ºé‡é»é …ç›®ã€é—œéµå­—\n3. ç°¡çŸ­åˆ—å‡º: å¦‚ä½•åŸ·è¡Œ (execute)\n\n## Express è¡¨é”\n\n### å“²å­¸æ€è¾¨: å¦‚ä½•é¨°å‡ºå°ˆæ³¨åŠ›ï¼Œå»ä¸æ¶ˆè€—å°ˆæ³¨åŠ›?\n\u003e ä½¿ç”¨ä¸­é–“ç”¢ç‰©\n\nProject è‡ªèµ·é»åˆ°çµ‚é»(æˆå“)ï¼Œæœ‰è¨±å¤šä¸­é–“ç”¢ç‰©ï¼Œä¾‹å¦‚: è‰ç¨¿ã€å¤§ç¶±ã€é¡§å®¢å›è¦†ã€‚æ”¶é›†é€™äº›è³‡æ–™ï¼Œæ”¾é€²ç¬¬äºŒå¤§è…¦ï¼Œé”åˆ°é‡è¤‡ä½¿ç”¨! \n\n### ä¸­é–“ç”¢ç‰©\n1. Note\n2. ä¸ä½¿ç”¨çš„ Proposal \n\t1. ä»¥åŠæª¢è¨ï¼Œç‚ºä½•ä¸ä½¿ç”¨ã€‚å¯èƒ½æ˜¯æœ‰é‡å¤§ç¼ºé™·ï¼Œéœ€è¦é¿å…ä»¥å¾Œè¸©åˆ°ã€‚\n3. åŠæˆå“??? \n4. åœ˜éšŠçš„æ–‡ä»¶ï¼Œé€™ç›¸ç•¶æ–¼ä»–äººçš„ç¶“é©—\n\n\n### åˆ‡åˆ†ã€Œä¸€ä»¶äº‹ã€\nä¸€ä»¶äº‹æœ‰å¾ˆå¤šç¢ç‰‡ï¼Œå¦‚æœä½ æ˜¯å¾é›¶é–‹å§‹ï¼Œå¯ä»¥æŠŠå®Œæˆé€™ä»¶äº‹éœ€è¦é‚£äº›ç¢ç‰‡å¯«ä¸‹ä¾†ï¼Œä¸¦æŠŠä½ èŠ±è²»å°ˆæ³¨åŠ› build å¥½çš„ç¢ç‰‡å­˜èµ·ä¾†ï¼Œè®“é€™äº›ç¢ç‰‡å¯ä»¥ Re-useã€‚\n\nåŒæ™‚ï¼Œä½ åœ¨å¾é›¶å»ºæ§‹ç¢ç‰‡æ™‚ï¼Œä¹Ÿå¯ä»¥å¸å–åˆ¥äººçš„ç¶“é©—ï¼ŒReuse åˆ¥äººçš„ç¢ç‰‡! \n\n\n\n\n## Resource\n- Author's website: https://www.buildingasecondbrain.com/resources\n- Obsidian As a Second Brain: https://www.youtube.com/watch?v=nz99I7apNLI\u0026list=WL\u0026index=2\n- Should Logseq be Your Second Brain? https://www.youtube.com/watch?v=VJ2reQcpbYA\u0026list=WL\u0026index=3\n- Pick a Notes App: Your Notetaking Style (Part 1) https://www.youtube.com/watch?v=f3dDVtJ2sec\u0026list=WL\u0026index=4\n","lastmodified":"2023-09-05T15:34:45.966894908Z","tags":[]},"/notes/Resource/MOCs/C++-Resources":{"title":"C++ Resources","content":"\n## Notes\n- [[../../Project/Effective C++ Series/Effective C++ Outline |Effective C++ Outline]]\n- [[../../Project/Effective C++ Series/Effective modern C++ Outline|Effective modern C++ Outline]]\n\n## Webs\n- [CppCoreGuidelines](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines)\n- [CppDeveloperRoadmap](https://github.com/salmer/CppDeveloperRoadmap)\n- [æ•´ç†äº†ä¸€ä»½C++å­¦ä¹ è·¯çº¿å›¾](- https://mp.weixin.qq.com/s/poq9aDdEL5kLM5sjSqJ72A)\n- \n\n## Books\n- C++æ¨™æº–åº«ï¼šå­¸ç¿’æ•™æœ¬èˆ‡åƒè€ƒå·¥å…·ï¼ˆç¬¬äºŒç‰ˆï¼‰ ä½œè€…ï¼š Nicolai M. Josuttis è­¯è€…ï¼š ä¾¯æ·\n\t- å…§å®¹æ¶µè“‹ C++11 çš„ STL Lib.\n\t- https://www.books.com.tw/products/0010658042?sloc=main\n\n\n## Online Resource\n- [IT ç¢¼è¾²](https://tanqingbo.cn/CSBook001/#C)\n- [ç¢¼è¾²ä¹‹å®¶](https://www.xz577.com/)\n- [æ¬æ›¸åŒ ](http://www.banshujiang.cn/)\n","lastmodified":"2023-09-05T15:34:45.966894908Z","tags":["cpp","moc"]},"/notes/Resource/MOCs/Design-Pattern":{"title":"Design Pattern","content":"\n[[../../Project/Effective C++ Series/Template Method|Template Method]]\n[[../../Project/Effective C++ Series/Classic Strategy Pattern|Classic Strategy Pattern]]","lastmodified":"2023-09-05T15:34:45.966894908Z","tags":["moc"]},"/notes/Resource/Whisky/%E6%A0%BC%E8%98%AD%E5%82%91-%E5%96%AE%E4%B8%80%E9%BA%A5%E8%8A%BD%E5%A8%81%E5%A3%AB%E5%BF%8C":{"title":"æ ¼è˜­å‚‘-å–®ä¸€éº¥èŠ½å¨å£«å¿Œ","content":"Glenmorangie X Single Malt Scotch Whisky\n\n- è²·æ–¼å¥½äº‹å¤šï¼Œè·Ÿ \"çŸ¥å¤š\" å–èµ·ä¾†å·®ä¸å¤šï¼ŒCP å€¼æ¥µä½³!! \n- ç†æƒ³åƒ¹æ ¼: 600-650\n\n","lastmodified":"2023-09-05T15:34:45.966894908Z","tags":[]},"/notes/Resource/Whisky/%E9%A1%98%E6%9C%9B%E6%B8%85%E5%96%AE":{"title":"å¨å£«å¿Œçš„é¡˜æœ›æ¸…å–®","content":"\n## å¾…éæ¿¾\n- [äº”æ”¯æ³¢æœ¬å¨å£«å¿Œæ¨è–¦æ–‡](https://medium.com/need-a-drink/%E5%8F%AA%E9%9C%80%E4%BA%94%E7%93%B6-%E6%B3%A2%E6%9C%AC-%E5%A8%81%E5%A3%AB%E5%BF%8C-%E7%BE%8E%E5%8F%B0%E5%8F%8B%E5%A5%BD-%E6%8E%A8%E8%96%A6%E6%B8%85%E5%96%AE-my-only-5-bourbon-whisky-i-need-112ff911ffbe)\n\n","lastmodified":"2023-09-05T15:34:45.966894908Z","tags":[]}}